"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):window.mediumZoom=t()}(0,function(){var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},t=function(e){return"IMG"===e.tagName},o=function(e){return e&&1===e.nodeType},n=function(e){return".svg"===(e.currentSrc||e.src).substr(-4).toLowerCase()},i=function(e){try{return Array.isArray(e)?e.filter(t):function(e){return NodeList.prototype.isPrototypeOf(e)}(e)?[].slice.call(e).filter(t):o(e)?[e].filter(t):"string"==typeof e?[].slice.call(document.querySelectorAll(e)).filter(t):[]}catch(e){throw new TypeError("The provided selector is invalid.\nExpects a CSS selector, a Node element, a NodeList or an array.\nSee: https://github.com/francoischalifour/medium-zoom")}},r=function(t,o){var n=e({bubbles:!1,cancelable:!1,detail:void 0},o);if("function"==typeof window.CustomEvent)return new CustomEvent(t,n);var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),i};return function(e,t){void 0===t&&(t={});var o=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===o&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}"),function t(d){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=window.Promise||function(e){function t(){}e(t,t)},m=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];var n=t.reduce(function(e,t){return[].concat(e,i(t))},[]);return n.filter(function(e){return-1===f.indexOf(e)}).forEach(function(e){f.push(e),e.classList.add("medium-zoom-image")}),p.forEach(function(e){var t=e.type,o=e.listener,i=e.options;n.forEach(function(e){e.addEventListener(t,o,i)})}),b},l=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target,i=function(){var t={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},i=void 0,r=void 0;if(h.container)if(h.container instanceof Object)i=(t=e({},t,h.container)).width-t.left-t.right-2*h.margin,r=t.height-t.top-t.bottom-2*h.margin;else{var d=(o(h.container)?h.container:document.querySelector(h.container)).getBoundingClientRect(),a=d.width,c=d.height,m=d.left,l=d.top;t=e({},t,{width:a,height:c,left:m,top:l})}i=i||t.width-2*h.margin,r=r||t.height-2*h.margin;var s=y.zoomedHd||y.original,u=n(s)?i:s.naturalWidth||i,f=n(s)?r:s.naturalHeight||r,p=s.getBoundingClientRect(),v=p.top,g=p.left,z=p.width,b=p.height,E=Math.min(u,i)/z,w=Math.min(f,r)/b,L=Math.min(E,w),S="scale("+L+") translate3d("+((i-z)/2-g+h.margin+t.left)/L+"px, "+((r-b)/2-v+h.margin+t.top)/L+"px, 0)";y.zoomed.style.transform=S,y.zoomedHd&&(y.zoomedHd.style.transform=S)};return new c(function(e){if(t&&-1===f.indexOf(t))e(b);else if(y.zoomed)e(b);else{if(t)y.original=t;else{if(!(f.length>0))return void e(b);var n=f;y.original=n[0]}if(y.original.dispatchEvent(r("medium-zoom:open",{detail:{zoom:b}})),g=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,v=!0,y.zoomed=function(e){var t=e.getBoundingClientRect(),o=t.top,n=t.left,i=t.width,r=t.height,d=e.cloneNode(),a=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,c=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return d.removeAttribute("id"),d.style.position="absolute",d.style.top=o+a+"px",d.style.left=n+c+"px",d.style.width=i+"px",d.style.height=r+"px",d.style.transform="",d}(y.original),document.body.appendChild(z),h.template){var d=o(h.template)?h.template:document.querySelector(h.template);y.template=document.createElement("div"),y.template.appendChild(d.content.cloneNode(!0)),document.body.appendChild(y.template)}if(document.body.appendChild(y.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),y.original.classList.add("medium-zoom-image--hidden"),y.zoomed.classList.add("medium-zoom-image--opened"),y.zoomed.addEventListener("click",s),y.zoomed.addEventListener("transitionend",function t(){v=!1,y.zoomed.removeEventListener("transitionend",t),y.original.dispatchEvent(r("medium-zoom:opened",{detail:{zoom:b}})),e(b)}),y.original.getAttribute("data-zoom-src")){y.zoomedHd=y.zoomed.cloneNode(),y.zoomedHd.removeAttribute("srcset"),y.zoomedHd.removeAttribute("sizes"),y.zoomedHd.src=y.zoomed.getAttribute("data-zoom-src"),y.zoomedHd.onerror=function(){clearInterval(a),console.warn("Unable to reach the zoom image target "+y.zoomedHd.src),y.zoomedHd=null,i()};var a=setInterval(function(){y.zoomedHd.complete&&(clearInterval(a),y.zoomedHd.classList.add("medium-zoom-image--opened"),y.zoomedHd.addEventListener("click",s),document.body.appendChild(y.zoomedHd),i())},10)}else if(y.original.hasAttribute("srcset")){y.zoomedHd=y.zoomed.cloneNode(),y.zoomedHd.removeAttribute("sizes");var c=y.zoomedHd.addEventListener("load",function(){y.zoomedHd.removeEventListener("load",c),y.zoomedHd.classList.add("medium-zoom-image--opened"),y.zoomedHd.addEventListener("click",s),document.body.appendChild(y.zoomedHd),i()})}else i()}})},s=function(){return new c(function(e){!v&&y.original?(v=!0,document.body.classList.remove("medium-zoom--opened"),y.zoomed.style.transform="",y.zoomedHd&&(y.zoomedHd.style.transform=""),y.template&&(y.template.style.transition="opacity 150ms",y.template.style.opacity=0),y.original.dispatchEvent(r("medium-zoom:close",{detail:{zoom:b}})),y.zoomed.addEventListener("transitionend",function t(){y.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(y.zoomed),y.zoomedHd&&document.body.removeChild(y.zoomedHd),document.body.removeChild(z),y.zoomed.classList.remove("medium-zoom-image--opened"),y.template&&document.body.removeChild(y.template),v=!1,y.zoomed.removeEventListener("transitionend",t),y.original.dispatchEvent(r("medium-zoom:closed",{detail:{zoom:b}})),y.original=null,y.zoomed=null,y.zoomedHd=null,y.template=null,e(b)})):e(b)})},u=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target;return y.original?s():l({target:e})},f=[],p=[],v=!1,g=0,h=a,y={original:null,zoomed:null,zoomedHd:null,template:null};"[object Object]"===Object.prototype.toString.call(d)?h=d:(d||"string"==typeof d)&&m(d);var z=function(e){var t=document.createElement("div");return t.classList.add("medium-zoom-overlay"),t.style.background=e,t}((h=e({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},h)).background);document.addEventListener("click",function(e){var t=e.target;t!==z?-1!==f.indexOf(t)&&u({target:t}):s()}),document.addEventListener("keyup",function(e){27===(e.keyCode||e.which)&&s()}),document.addEventListener("scroll",function(){if(!v&&y.original){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(g-e)>h.scrollOffset&&setTimeout(s,150)}}),window.addEventListener("resize",s);var b={open:l,close:s,toggle:u,update:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t;if(t.background&&(z.style.background=t.background),t.container&&t.container instanceof Object&&(n.container=e({},h.container,t.container)),t.template){var i=o(t.template)?t.template:document.querySelector(t.template);n.template=i}return h=e({},h,n),f.forEach(function(e){e.dispatchEvent(r("medium-zoom:update",{detail:{zoom:b}}))}),b},clone:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t(e({},h,o))},attach:m,detach:function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];y.zoomed&&s();var n=t.length>0?t.reduce(function(e,t){return[].concat(e,i(t))},[]):f;return n.forEach(function(e){e.classList.remove("medium-zoom-image"),e.dispatchEvent(r("medium-zoom:detach",{detail:{zoom:b}}))}),f=f.filter(function(e){return-1===n.indexOf(e)}),b},on:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f.forEach(function(n){n.addEventListener("medium-zoom:"+e,t,o)}),p.push({type:"medium-zoom:"+e,listener:t,options:o}),b},off:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f.forEach(function(n){n.removeEventListener("medium-zoom:"+e,t,o)}),p=p.filter(function(o){return!(o.type==="medium-zoom:"+e&&o.listener.toString()===t.toString())}),b},getOptions:function(){return h},getImages:function(){return f},getZoomedImage:function(){return y.original}};return b}}),function(){var e=document.querySelector(".other-services__swiper"),t=document.querySelector(".other-services__list"),o=parseInt(getComputedStyle(e).width),n=parseInt(getComputedStyle(t).width);window.onload=function(){var t=getComputedStyle(e).height;e.style.height="".concat(parseInt(t)+40,"px")},t.style.marginLeft="0px",e.addEventListener("mousedown",function(i){e.addEventListener("mouseleave",function(){e.removeEventListener("mousemove",l)}),e.addEventListener("mouseup",function i(c){if(e.removeEventListener("mousemove",l),m>=100){var s=(m=m>n-o?n-o:m)/1.5,u=c.pageX;switch(r=u<a?"left":"right",d=parseInt(t.style.marginLeft),r){case"left":if(-d>=n-o)return;s=s>n-o+d?n-o+d:s,t.style.transition="all 0.35s",t.style.marginLeft="".concat(d-s,"px");break;case"right":if(d>=0)return;s=s>-d?-d:s,t.style.transition="all 0.35s",t.style.marginLeft="".concat(d+s,"px")}setTimeout(function(){t.style.transition="all 0s"},250),e.removeEventListener("mouseup",i)}});var r,d,a=i.pageX,c=i.pageX,m=0;function l(e){var i=e.pageX,a=Math.abs(c-i);switch(d=parseInt(t.style.marginLeft),i<c?r="left":i>c?r="right":(i=c)&&(r=r),r){case"left":if(-d>=n-o)return;t.style.marginLeft="".concat(d-a,"px");break;case"right":if(d>=0)return;t.style.marginLeft="".concat(d+a,"px")}m+=a,c=i}e.addEventListener("mousemove",l)})}(),function(){var e=document.querySelector(".consultation-with-designer__gallery"),t=document.querySelector(".consultation-with-designer__main-image");e.addEventListener("click",function(e){var o=e.target;if(o.classList.contains("consultation-with-designer__image")){var n=t.src.slice(o.src.indexOf("vtb_static/img/consultation-with-designer-")),i=t.previousElementSibling.srcset,r=o.src.slice(o.src.indexOf("vtb_static/img/consultation-with-designer-")),d=o.previousElementSibling.srcset;t.src=r,t.previousElementSibling.srcset=d,o.src=n,o.previousElementSibling.srcset=i}})}(),function(){var e,t=document.querySelectorAll("*[data-modal-target]"),o=document.querySelectorAll("*[data-modal-close]"),n=function(t){var o=t.currentTarget.dataset.modalTarget,n=document.getElementById(o);void 0!==e&&a(e),e=o,n.classList.add("visible"),document.querySelector("body").classList.add("fixed"),window.addEventListener("click",r),window.addEventListener("keydown",i)},i=function(t){"Escape"===t.key&&a(e)},r=function(t){t.target.classList.contains("modal__bg")&&a(e)},d=function(e){return a(e.currentTarget.dataset.modalClose)},a=function(e){document.getElementById(e).classList.remove("visible"),document.querySelector("body").classList.remove("fixed"),window.removeEventListener("click",r),window.removeEventListener("keydown",i)};o.forEach(function(e){return e.addEventListener("click",d)}),window.modals={openModalWindow:n,closeModalWindow:a},function(){var e=!0,o=!1,i=void 0;try{for(var r,d=t[Symbol.iterator]();!(e=(r=d.next()).done);e=!0)r.value.addEventListener("click",n)}catch(e){o=!0,i=e}finally{try{e||null==d.return||d.return()}finally{if(o)throw i}}}()}(),mediumZoom("[data-zoomable]");
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJnbG9iYWwiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIl90eXBlb2YiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJ3aW5kb3ciLCJtZWRpdW1ab29tIiwiX2V4dGVuZHMiLCJPYmplY3QiLCJhc3NpZ24iLCJ0YXJnZXQiLCJpIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwic291cmNlIiwicHJvdG90eXBlIiwiY2FsbCIsImtleSIsImlzU3VwcG9ydGVkIiwibm9kZSIsInRhZ05hbWUiLCJzZWxlY3RvciIsIm5vZGVUeXBlIiwiaXNTdmciLCJpbWFnZSIsImN1cnJlbnRTcmMiLCJpc1Byb3RvdHlwZU9mIiwiZ2V0SW1hZ2VzRnJvbVNlbGVjdG9yIiwiaXNOb2RlIiwiZmlsdGVyIiwiTm9kZUxpc3QiLCJpc05vZGVMaXN0IiwiaXNBcnJheSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlcnIiLCJjcmVhdGVDdXN0b21FdmVudCIsInR5cGUiLCJwYXJhbXMiLCJldmVudFBhcmFtcyIsImNsb25lVGFyZ2V0IiwiX3RlbXBsYXRlJGdldEJvdW5kaW5nIiwidG9wIiwibGVmdCIsIndpZHRoIiwiaGVpZ2h0IiwiY2xvbmUiLCJkb2N1bWVudCIsImNsb25lTm9kZSIsImN1c3RvbUV2ZW50IiwiaW5pdEN1c3RvbUV2ZW50IiwicGFnZVlPZmZzZXQiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxUb3AiLCJzY3JvbGxMZWZ0IiwiYWN0aXZlIiwiY3NzIiwicmVmIiwib3JpZ2luYWwiLCJ6b29tZWQiLCJpbnNlcnRBdCIsImhlYWQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInN0eWxlIiwiY3JlYXRlRWxlbWVudCIsImlzQW5pbWF0aW5nIiwiY2xhc3NMaXN0IiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsInRlbXBsYXRlIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJhcHBlbmRDaGlsZCIsImRpc3BhdGNoRXZlbnQiLCJzdHlsZUluamVjdCIsInBvc2l0aW9uIiwidW5kZWZpbmVkIiwiUHJvbWlzZSIsImZuIiwiYXR0YWNoIiwiX2xlbiIsInNlbGVjdG9ycyIsIkFycmF5IiwiX2tleSIsImV2ZW50Iiwid2hpY2giLCJpbWFnZXNBY2N1bXVsYXRvciIsImN1cnJlbnRTZWxlY3RvciIsImNsb3NlIiwiY29uY2F0IiwibmV3SW1hZ2VzIiwibmV3SW1hZ2UiLCJpbWFnZXMiLCJpbmRleE9mIiwidXBkYXRlIiwib3B0aW9ucyIsInB1c2giLCJuZXdPcHRpb25zIiwiZXZlbnRMaXN0ZW5lcnMiLCJiYWNrZ3JvdW5kIiwiX3JlZiIsIm92ZXJsYXkiLCJsaXN0ZW5lciIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiem9vbSIsIm9wZW4iLCJkZXRhY2giLCJfYW5pbWF0ZSIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwicmlnaHQiLCJib3R0b20iLCJ2aWV3cG9ydFdpZHRoIiwidmlld3BvcnRIZWlnaHQiLCJpbWFnZXNUb0RldGFjaCIsInJlbW92ZSIsImRldGFpbCIsInpvb21PcHRpb25zIiwiY29udGFpbmVyIiwibWFyZ2luIiwiX3pvb21Db250YWluZXIkZ2V0Qm91IiwicXVlcnlTZWxlY3RvciIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIl93aWR0aCIsIl9oZWlnaHQiLCJfbGVmdCIsIl90b3AiLCJ6b29tVGFyZ2V0Iiwiem9vbWVkSGQiLCJuYXR1cmFsV2lkdGgiLCJuYXR1cmFsSGVpZ2h0IiwiX3pvb21UYXJnZXQkZ2V0Qm91bmRpIiwic2NhbGVZIiwiTWF0aCIsIm1pbiIsInNjYWxlWCIsInRyYW5zZm9ybSIsInNjYWxlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2ZW50TGlzdGVuZXIiLCJyZXNvbHZlIiwiYm9keSIsInNsaWNlIiwicGFnZVhPZmZzZXQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJjcmVhdGVPdmVybGF5IiwiY29udGVudCIsIl9oYW5kbGVPcGVuRW5kIiwiX3JlZjIiLCJzcmMiLCJnZXRBdHRyaWJ1dGUiLCJ0cmFuc2xhdGVYIiwidHJhbnNsYXRlWSIsImNvbXBsZXRlIiwiZ2V0Wm9vbVRhcmdldFNpemUiLCJhZGQiLCJoYXNBdHRyaWJ1dGUiLCJsb2FkRXZlbnRMaXN0ZW5lciIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIl9oYW5kbGVDbG9zZUVuZCIsInJlbW92ZUNoaWxkIiwiY2xlYXJJbnRlcnZhbCIsImNvbnNvbGUiLCJ3YXJuIiwidG9TdHJpbmciLCJjYW5jZWxhYmxlIiwidG9nZ2xlIiwia2V5Q29kZSIsImNyZWF0ZUV2ZW50IiwiY3VycmVudFNjcm9sbCIsImFicyIsInNjcm9sbE9mZnNldCIsIl9oYW5kbGVDbGljayIsIl9rZXkyIiwicmVkdWNlIiwib24iLCJvZmYiLCJzd2lwZXJMaXN0Iiwic3dpcGVyV2lkdGgiLCJfcmVmMyIsImdldENvbXB1dGVkU3R5bGUiLCJzd2lwZXIiLCJzd2lwZXJMaXN0V2lkdGgiLCJwYXJzZUludCIsIm9ubG9hZCIsImhlaWdodE9mU3dpcGVyIiwibWFyZ2luTGVmdCIsImdldEltYWdlcyIsInN3aXBlTW91c2VNb3ZlT24iLCJzd2lwZU1vdXNlTW92ZU9mZiIsImdldE9wdGlvbnMiLCJnZXRab29tZWRJbWFnZSIsInN1bW1Td2lwZURpc3RhbmNlIiwibGFzdEN1cnNvclBvc2l0aW9uIiwicGFnZVgiLCJ3YXlUb1doaWNoU3dpcGVJc01hZGUiLCJmaXJzdEN1cnNvclBvc2l0aW9uIiwic3dpcGVMaXN0TWFyZ2luTGVmdCIsImFkZGl0aW9uYWxTd2lwZURpc3RhbmNlIiwidHJhbnNpdGlvbiIsImNyZWF0ZVRleHROb2RlIiwic2V0VGltZW91dCIsIm5ld0N1cnNvclBvc2l0aW9uIiwiaW5pdGlhbEN1cnNvclBvc2l0aW9uIiwic3dpcGVEaXN0YW5jZSIsInN3aXBlIiwiY29udGFpbnMiLCJzcmNNYWluU2NyZWVuSW1hZ2UiLCJtYWluU2NyZWVuSW1hZ2UiLCJzcmNXZWJwTWFpblNjcmVlbkltYWdlIiwic3Jjc2V0Iiwic3JjSW1nIiwic3JjV2VicEltZyIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJtb2RhbFRyaWdnZXJzIiwiY2xvc2VNb2RhbEJ1dHRvbnMiLCJvcGVuTW9kYWxXaW5kb3ciLCJldnQiLCJtb2RhbElEIiwiZGF0YXNldCIsIm1vZGFsVGFyZ2V0IiwidGFyZ2V0TW9kYWwiLCJvcGVuZWRNb2RhbElEIiwiY2xvc2VNb2RhbFdpbmRvdyIsImNsb3NlTW9kYWxCeUVzYyIsImlzRmFzdFN3aXBlIiwiY2xvc2VNb2RhbEJ5QmFja2dyb3VuZCIsImNsb3NlTW9kYWxCeUJ1dHRvbiIsImN1cnJlbnRUYXJnZXQiLCJtb2RhbENsb3NlIiwiYnV0dG9uIiwibW9kYWxzIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiIsIl9kaWRJdGVyYXRvckVycm9yIiwiX2l0ZXJhdG9yRXJyb3IiLCJfc3RlcCIsIl9pdGVyYXRvciIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibmV4dCIsImRvbmUiLCJ2YWx1ZSIsInJldHVybiIsImluaXRpYWxpemVNb2RhbFRyaWdnZXJzIiwiY2hhbmdlTWFpblNjcmVlbkltYWdlIl0sIm1hcHBpbmdzIjoiQUFBQSwrUEFHQSxTQUFVQSxFQUFRQyxHQUNLLFlBQW5CLG9CQUFPQyxRQUFQLFlBQUFDLFFBQU9ELFdBQTBDLG9CQUFYRSxPQUF5QkEsT0FBT0YsUUFBVUQsSUFBOEIsbUJBQVhJLFFBQXlCQSxPQUFPQyxJQUFNRCxPQUFPSixHQUFXTSxPQUFPQyxXQUFhUCxJQURuTCxDQUFBLEVBQVVELFdBQVYsSUFBQVMsRUFFV0MsT0FBV0MsUUFBQSxTQUFBQyxHQUNsQixJQUFBLElBQUFDLEVBQUEsRUFBQUEsRUFBQUMsVUFBQUMsT0FBQUYsSUFBQSxDQUdJLElBQUlHLEVBQVNGLFVBQVVELEdBRnZCSixJQUFBQSxJQUFXQyxLQUFPQyxFQUNWRCxPQUFPTyxVQUFHSCxlQUFwQkksS0FBMkNGLEVBQUFHLEtBQ3JDSCxFQUFTRixHQUFBQSxFQUFiSyxJQUdJUCxPQUFBQSxHQUVIUSxFQUFBLFNBQUFDLEdBQ0YsTUFBQSxRQUFBQSxFQUFBQyxTQUdD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Z0ksR0FBQSxPQUFBQSxFQUFBL0gsaUJBQUEsUUFBQTRILEtBa0ZQOU4sT0FBT2tPLE9BQVMsQ0EvRWRsRCxnQkFBTzlFLEVBL0dYd0gsaUJBQUFBLEdBa0ZZLFdBQUEsSUFBQVMsR0FBQSxFQUFBQyxHQUFBLEVBQUFDLE9BQUEvSixFQUFBLElBcUdSLElBQUEsSUFBQWdLLEVBQUFDLEVBQXFCdEIsRUFBckJ1QixPQUFBQyxjQUFBTixHQUFBRyxFQUFBQyxFQUFBRyxRQUFBQyxNQUFBUixHQUFBLEVBQW9DRyxFQUFBTSxNQWhGNUJ4QyxpQkFBaUIsUUFBQWUsR0FyQmpCLE1BQUF0TCxHQUFBdU0sR0FBQSxFQUFBQyxFQUFBeE0sRUFBQSxRQUFBLElBQUFzTSxHQUFBLE1BQUFJLEVBQUFNLFFBQUFOLEVBQUFNLFNBQUEsUUFBQSxHQUFBVCxFQUFBLE1BQUFDLElBZ0NSUyxHQTdFSSxHQWtGSjdPLFdBQVM4TyIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxuLyohIG1lZGl1bS16b29tIDEuMC40IHwgTUlUIExpY2Vuc2UgfCBodHRwczovL2dpdGh1Yi5jb20vZnJhbmNvaXNjaGFsaWZvdXIvbWVkaXVtLXpvb20gKi9cclxuKGZ1bmN0aW9uKGdsb2JhbCwgZmFjdG9yeSkge1xyXG4gICAgdHlwZW9mIGV4cG9ydHMgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDogdHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOiB3aW5kb3cubWVkaXVtWm9vbSA9IGZhY3RvcnkoKTtcclxuICB9KSh0aGlzLCBmdW5jdGlvbigpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgdmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0YXJnZXQpIHtcclxuICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcclxuICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0YXJnZXQ7XHJcbiAgICB9O1xyXG4gICAgdmFyIGlzU3VwcG9ydGVkID0gZnVuY3Rpb24gaXNTdXBwb3J0ZWQobm9kZSkge1xyXG4gICAgICByZXR1cm4gbm9kZS50YWdOYW1lID09PSBcIklNR1wiO1xyXG4gICAgfTtcclxuICAgIHZhciBpc05vZGVMaXN0ID0gZnVuY3Rpb24gaXNOb2RlTGlzdChzZWxlY3Rvcikge1xyXG4gICAgICByZXR1cm4gTm9kZUxpc3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2Yoc2VsZWN0b3IpO1xyXG4gICAgfTtcclxuICAgIHZhciBpc05vZGUgPSBmdW5jdGlvbiBpc05vZGUoc2VsZWN0b3IpIHtcclxuICAgICAgcmV0dXJuIHNlbGVjdG9yICYmIHNlbGVjdG9yLm5vZGVUeXBlID09PSAxO1xyXG4gICAgfTtcclxuICAgIHZhciBpc1N2ZyA9IGZ1bmN0aW9uIGlzU3ZnKGltYWdlKSB7XHJcbiAgICAgIHZhciBzb3VyY2UgPSBpbWFnZS5jdXJyZW50U3JjIHx8IGltYWdlLnNyYztcclxuICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzdHIoLTQpLnRvTG93ZXJDYXNlKCkgPT09IFwiLnN2Z1wiO1xyXG4gICAgfTtcclxuICAgIHZhciBnZXRJbWFnZXNGcm9tU2VsZWN0b3IgPSBmdW5jdGlvbiBnZXRJbWFnZXNGcm9tU2VsZWN0b3Ioc2VsZWN0b3IpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzZWxlY3RvcikpIHtcclxuICAgICAgICAgIHJldHVybiBzZWxlY3Rvci5maWx0ZXIoaXNTdXBwb3J0ZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNOb2RlTGlzdChzZWxlY3RvcikpIHtcclxuICAgICAgICAgIHJldHVybiBbXS5zbGljZS5jYWxsKHNlbGVjdG9yKS5maWx0ZXIoaXNTdXBwb3J0ZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNOb2RlKHNlbGVjdG9yKSkge1xyXG4gICAgICAgICAgcmV0dXJuIFsgc2VsZWN0b3IgXS5maWx0ZXIoaXNTdXBwb3J0ZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICByZXR1cm4gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSkuZmlsdGVyKGlzU3VwcG9ydGVkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVGhlIHByb3ZpZGVkIHNlbGVjdG9yIGlzIGludmFsaWQuXFxuXCIgKyBcIkV4cGVjdHMgYSBDU1Mgc2VsZWN0b3IsIGEgTm9kZSBlbGVtZW50LCBhIE5vZGVMaXN0IG9yIGFuIGFycmF5LlxcblwiICsgXCJTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9mcmFuY29pc2NoYWxpZm91ci9tZWRpdW0tem9vbVwiKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIHZhciBjcmVhdGVPdmVybGF5ID0gZnVuY3Rpb24gY3JlYXRlT3ZlcmxheShiYWNrZ3JvdW5kKSB7XHJcbiAgICAgIHZhciBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKFwibWVkaXVtLXpvb20tb3ZlcmxheVwiKTtcclxuICAgICAgb3ZlcmxheS5zdHlsZS5iYWNrZ3JvdW5kID0gYmFja2dyb3VuZDtcclxuICAgICAgcmV0dXJuIG92ZXJsYXk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGNsb25lVGFyZ2V0ID0gZnVuY3Rpb24gY2xvbmVUYXJnZXQodGVtcGxhdGUpIHtcclxuICAgICAgdmFyIF90ZW1wbGF0ZSRnZXRCb3VuZGluZyA9IHRlbXBsYXRlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCB0b3AgPSBfdGVtcGxhdGUkZ2V0Qm91bmRpbmcudG9wLCBsZWZ0ID0gX3RlbXBsYXRlJGdldEJvdW5kaW5nLmxlZnQsIHdpZHRoID0gX3RlbXBsYXRlJGdldEJvdW5kaW5nLndpZHRoLCBoZWlnaHQgPSBfdGVtcGxhdGUkZ2V0Qm91bmRpbmcuaGVpZ2h0O1xyXG4gICAgICB2YXIgY2xvbmUgPSB0ZW1wbGF0ZS5jbG9uZU5vZGUoKTtcclxuICAgICAgdmFyIHNjcm9sbFRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wIHx8IDA7XHJcbiAgICAgIHZhciBzY3JvbGxMZWZ0ID0gd2luZG93LnBhZ2VYT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCB8fCAwO1xyXG4gICAgICBjbG9uZS5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKTtcclxuICAgICAgY2xvbmUuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XHJcbiAgICAgIGNsb25lLnN0eWxlLnRvcCA9IHRvcCArIHNjcm9sbFRvcCArIFwicHhcIjtcclxuICAgICAgY2xvbmUuc3R5bGUubGVmdCA9IGxlZnQgKyBzY3JvbGxMZWZ0ICsgXCJweFwiO1xyXG4gICAgICBjbG9uZS5zdHlsZS53aWR0aCA9IHdpZHRoICsgXCJweFwiO1xyXG4gICAgICBjbG9uZS5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyBcInB4XCI7XHJcbiAgICAgIGNsb25lLnN0eWxlLnRyYW5zZm9ybSA9IFwiXCI7XHJcbiAgICAgIHJldHVybiBjbG9uZTtcclxuICAgIH07XHJcbiAgICB2YXIgY3JlYXRlQ3VzdG9tRXZlbnQgPSBmdW5jdGlvbiBjcmVhdGVDdXN0b21FdmVudCh0eXBlLCBwYXJhbXMpIHtcclxuICAgICAgdmFyIGV2ZW50UGFyYW1zID0gX2V4dGVuZHMoe1xyXG4gICAgICAgIGJ1YmJsZXM6IGZhbHNlLFxyXG4gICAgICAgIGNhbmNlbGFibGU6IGZhbHNlLFxyXG4gICAgICAgIGRldGFpbDogdW5kZWZpbmVkXHJcbiAgICAgIH0sIHBhcmFtcyk7XHJcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93LkN1c3RvbUV2ZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEN1c3RvbUV2ZW50KHR5cGUsIGV2ZW50UGFyYW1zKTtcclxuICAgICAgfVxyXG4gICAgICB2YXIgY3VzdG9tRXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudChcIkN1c3RvbUV2ZW50XCIpO1xyXG4gICAgICBjdXN0b21FdmVudC5pbml0Q3VzdG9tRXZlbnQodHlwZSwgZXZlbnRQYXJhbXMuYnViYmxlcywgZXZlbnRQYXJhbXMuY2FuY2VsYWJsZSwgZXZlbnRQYXJhbXMuZGV0YWlsKTtcclxuICAgICAgcmV0dXJuIGN1c3RvbUV2ZW50O1xyXG4gICAgfTtcclxuICAgIHZhciBtZWRpdW1ab29tID0gZnVuY3Rpb24gbWVkaXVtWm9vbShzZWxlY3Rvcikge1xyXG4gICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XHJcbiAgICAgIHZhciBQcm9taXNlID0gd2luZG93LlByb21pc2UgfHwgZnVuY3Rpb24gUHJvbWlzZShmbikge1xyXG4gICAgICAgIGZ1bmN0aW9uIG5vb3AoKSB7fVxyXG4gICAgICAgIGZuKG5vb3AsIG5vb3ApO1xyXG4gICAgICB9O1xyXG4gICAgICB2YXIgX2hhbmRsZUNsaWNrID0gZnVuY3Rpb24gX2hhbmRsZUNsaWNrKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldDtcclxuICAgICAgICBpZiAodGFyZ2V0ID09PSBvdmVybGF5KSB7XHJcbiAgICAgICAgICBjbG9zZSgpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaW1hZ2VzLmluZGV4T2YodGFyZ2V0KSA9PT0gLTEpIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdG9nZ2xlKHtcclxuICAgICAgICAgIHRhcmdldDogdGFyZ2V0XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcbiAgICAgIHZhciBfaGFuZGxlU2Nyb2xsID0gZnVuY3Rpb24gX2hhbmRsZVNjcm9sbCgpIHtcclxuICAgICAgICBpZiAoaXNBbmltYXRpbmcgfHwgIWFjdGl2ZS5vcmlnaW5hbCkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY3VycmVudFNjcm9sbCA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wIHx8IDA7XHJcbiAgICAgICAgaWYgKE1hdGguYWJzKHNjcm9sbFRvcCAtIGN1cnJlbnRTY3JvbGwpID4gem9vbU9wdGlvbnMuc2Nyb2xsT2Zmc2V0KSB7XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KGNsb3NlLCAxNTApO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgdmFyIF9oYW5kbGVLZXlVcCA9IGZ1bmN0aW9uIF9oYW5kbGVLZXlVcChldmVudCkge1xyXG4gICAgICAgIGlmICgoZXZlbnQua2V5Q29kZSB8fCBldmVudC53aGljaCkgPT09IDI3KSB7XHJcbiAgICAgICAgICBjbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgdmFyIHVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZSgpIHtcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XHJcbiAgICAgICAgdmFyIG5ld09wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmJhY2tncm91bmQpIHtcclxuICAgICAgICAgIG92ZXJsYXkuc3R5bGUuYmFja2dyb3VuZCA9IG9wdGlvbnMuYmFja2dyb3VuZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuY29udGFpbmVyICYmIG9wdGlvbnMuY29udGFpbmVyIGluc3RhbmNlb2YgT2JqZWN0KSB7XHJcbiAgICAgICAgICBuZXdPcHRpb25zLmNvbnRhaW5lciA9IF9leHRlbmRzKHt9LCB6b29tT3B0aW9ucy5jb250YWluZXIsIG9wdGlvbnMuY29udGFpbmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9wdGlvbnMudGVtcGxhdGUpIHtcclxuICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9IGlzTm9kZShvcHRpb25zLnRlbXBsYXRlKSA/IG9wdGlvbnMudGVtcGxhdGUgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9wdGlvbnMudGVtcGxhdGUpO1xyXG4gICAgICAgICAgbmV3T3B0aW9ucy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB6b29tT3B0aW9ucyA9IF9leHRlbmRzKHt9LCB6b29tT3B0aW9ucywgbmV3T3B0aW9ucyk7XHJcbiAgICAgICAgaW1hZ2VzLmZvckVhY2goZnVuY3Rpb24oaW1hZ2UpIHtcclxuICAgICAgICAgIGltYWdlLmRpc3BhdGNoRXZlbnQoY3JlYXRlQ3VzdG9tRXZlbnQoXCJtZWRpdW0tem9vbTp1cGRhdGVcIiwge1xyXG4gICAgICAgICAgICBkZXRhaWw6IHtcclxuICAgICAgICAgICAgICB6b29tOiB6b29tXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gem9vbTtcclxuICAgICAgfTtcclxuICAgICAgdmFyIGNsb25lID0gZnVuY3Rpb24gY2xvbmUoKSB7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xyXG4gICAgICAgIHJldHVybiBtZWRpdW1ab29tKF9leHRlbmRzKHt9LCB6b29tT3B0aW9ucywgb3B0aW9ucykpO1xyXG4gICAgICB9O1xyXG4gICAgICB2YXIgYXR0YWNoID0gZnVuY3Rpb24gYXR0YWNoKCkge1xyXG4gICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBzZWxlY3RvcnMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcclxuICAgICAgICAgIHNlbGVjdG9yc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG5ld0ltYWdlcyA9IHNlbGVjdG9ycy5yZWR1Y2UoZnVuY3Rpb24oaW1hZ2VzQWNjdW11bGF0b3IsIGN1cnJlbnRTZWxlY3Rvcikge1xyXG4gICAgICAgICAgcmV0dXJuIFtdLmNvbmNhdChpbWFnZXNBY2N1bXVsYXRvciwgZ2V0SW1hZ2VzRnJvbVNlbGVjdG9yKGN1cnJlbnRTZWxlY3RvcikpO1xyXG4gICAgICAgIH0sIFtdKTtcclxuICAgICAgICBuZXdJbWFnZXMuZmlsdGVyKGZ1bmN0aW9uKG5ld0ltYWdlKSB7XHJcbiAgICAgICAgICByZXR1cm4gaW1hZ2VzLmluZGV4T2YobmV3SW1hZ2UpID09PSAtMTtcclxuICAgICAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uKG5ld0ltYWdlKSB7XHJcbiAgICAgICAgICBpbWFnZXMucHVzaChuZXdJbWFnZSk7XHJcbiAgICAgICAgICBuZXdJbWFnZS5jbGFzc0xpc3QuYWRkKFwibWVkaXVtLXpvb20taW1hZ2VcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZXZlbnRMaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbihfcmVmKSB7XHJcbiAgICAgICAgICB2YXIgdHlwZSA9IF9yZWYudHlwZSwgbGlzdGVuZXIgPSBfcmVmLmxpc3RlbmVyLCBvcHRpb25zID0gX3JlZi5vcHRpb25zO1xyXG4gICAgICAgICAgbmV3SW1hZ2VzLmZvckVhY2goZnVuY3Rpb24oaW1hZ2UpIHtcclxuICAgICAgICAgICAgaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lciwgb3B0aW9ucyk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gem9vbTtcclxuICAgICAgfTtcclxuICAgICAgdmFyIGRldGFjaCA9IGZ1bmN0aW9uIGRldGFjaCgpIHtcclxuICAgICAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIHNlbGVjdG9ycyA9IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XHJcbiAgICAgICAgICBzZWxlY3RvcnNbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFjdGl2ZS56b29tZWQpIHtcclxuICAgICAgICAgIGNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBpbWFnZXNUb0RldGFjaCA9IHNlbGVjdG9ycy5sZW5ndGggPiAwID8gc2VsZWN0b3JzLnJlZHVjZShmdW5jdGlvbihpbWFnZXNBY2N1bXVsYXRvciwgY3VycmVudFNlbGVjdG9yKSB7XHJcbiAgICAgICAgICByZXR1cm4gW10uY29uY2F0KGltYWdlc0FjY3VtdWxhdG9yLCBnZXRJbWFnZXNGcm9tU2VsZWN0b3IoY3VycmVudFNlbGVjdG9yKSk7XHJcbiAgICAgICAgfSwgW10pIDogaW1hZ2VzO1xyXG4gICAgICAgIGltYWdlc1RvRGV0YWNoLmZvckVhY2goZnVuY3Rpb24oaW1hZ2UpIHtcclxuICAgICAgICAgIGltYWdlLmNsYXNzTGlzdC5yZW1vdmUoXCJtZWRpdW0tem9vbS1pbWFnZVwiKTtcclxuICAgICAgICAgIGltYWdlLmRpc3BhdGNoRXZlbnQoY3JlYXRlQ3VzdG9tRXZlbnQoXCJtZWRpdW0tem9vbTpkZXRhY2hcIiwge1xyXG4gICAgICAgICAgICBkZXRhaWw6IHtcclxuICAgICAgICAgICAgICB6b29tOiB6b29tXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpbWFnZXMgPSBpbWFnZXMuZmlsdGVyKGZ1bmN0aW9uKGltYWdlKSB7XHJcbiAgICAgICAgICByZXR1cm4gaW1hZ2VzVG9EZXRhY2guaW5kZXhPZihpbWFnZSkgPT09IC0xO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB6b29tO1xyXG4gICAgICB9O1xyXG4gICAgICB2YXIgb24gPSBmdW5jdGlvbiBvbih0eXBlLCBsaXN0ZW5lcikge1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcclxuICAgICAgICBpbWFnZXMuZm9yRWFjaChmdW5jdGlvbihpbWFnZSkge1xyXG4gICAgICAgICAgaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcIm1lZGl1bS16b29tOlwiICsgdHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGV2ZW50TGlzdGVuZXJzLnB1c2goe1xyXG4gICAgICAgICAgdHlwZTogXCJtZWRpdW0tem9vbTpcIiArIHR5cGUsXHJcbiAgICAgICAgICBsaXN0ZW5lcjogbGlzdGVuZXIsXHJcbiAgICAgICAgICBvcHRpb25zOiBvcHRpb25zXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHpvb207XHJcbiAgICAgIH07XHJcbiAgICAgIHZhciBvZmYgPSBmdW5jdGlvbiBvZmYodHlwZSwgbGlzdGVuZXIpIHtcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XHJcbiAgICAgICAgaW1hZ2VzLmZvckVhY2goZnVuY3Rpb24oaW1hZ2UpIHtcclxuICAgICAgICAgIGltYWdlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZWRpdW0tem9vbTpcIiArIHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBldmVudExpc3RlbmVycyA9IGV2ZW50TGlzdGVuZXJzLmZpbHRlcihmdW5jdGlvbihldmVudExpc3RlbmVyKSB7XHJcbiAgICAgICAgICByZXR1cm4gIShldmVudExpc3RlbmVyLnR5cGUgPT09IFwibWVkaXVtLXpvb206XCIgKyB0eXBlICYmIGV2ZW50TGlzdGVuZXIubGlzdGVuZXIudG9TdHJpbmcoKSA9PT0gbGlzdGVuZXIudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHpvb207XHJcbiAgICAgIH07XHJcbiAgICAgIHZhciBvcGVuID0gZnVuY3Rpb24gb3BlbigpIHtcclxuICAgICAgICB2YXIgX3JlZjIgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LCB0YXJnZXQgPSBfcmVmMi50YXJnZXQ7XHJcbiAgICAgICAgdmFyIF9hbmltYXRlID0gZnVuY3Rpb24gX2FuaW1hdGUoKSB7XHJcbiAgICAgICAgICB2YXIgY29udGFpbmVyID0ge1xyXG4gICAgICAgICAgICB3aWR0aDogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQsXHJcbiAgICAgICAgICAgIGxlZnQ6IDAsXHJcbiAgICAgICAgICAgIHRvcDogMCxcclxuICAgICAgICAgICAgcmlnaHQ6IDAsXHJcbiAgICAgICAgICAgIGJvdHRvbTogMFxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIHZhciB2aWV3cG9ydFdpZHRoID0gdm9pZCAwO1xyXG4gICAgICAgICAgdmFyIHZpZXdwb3J0SGVpZ2h0ID0gdm9pZCAwO1xyXG4gICAgICAgICAgaWYgKHpvb21PcHRpb25zLmNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICBpZiAoem9vbU9wdGlvbnMuY29udGFpbmVyIGluc3RhbmNlb2YgT2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgY29udGFpbmVyID0gX2V4dGVuZHMoe30sIGNvbnRhaW5lciwgem9vbU9wdGlvbnMuY29udGFpbmVyKTtcclxuICAgICAgICAgICAgICB2aWV3cG9ydFdpZHRoID0gY29udGFpbmVyLndpZHRoIC0gY29udGFpbmVyLmxlZnQgLSBjb250YWluZXIucmlnaHQgLSB6b29tT3B0aW9ucy5tYXJnaW4gKiAyO1xyXG4gICAgICAgICAgICAgIHZpZXdwb3J0SGVpZ2h0ID0gY29udGFpbmVyLmhlaWdodCAtIGNvbnRhaW5lci50b3AgLSBjb250YWluZXIuYm90dG9tIC0gem9vbU9wdGlvbnMubWFyZ2luICogMjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB2YXIgem9vbUNvbnRhaW5lciA9IGlzTm9kZSh6b29tT3B0aW9ucy5jb250YWluZXIpID8gem9vbU9wdGlvbnMuY29udGFpbmVyIDogZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih6b29tT3B0aW9ucy5jb250YWluZXIpO1xyXG4gICAgICAgICAgICAgIHZhciBfem9vbUNvbnRhaW5lciRnZXRCb3UgPSB6b29tQ29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBfd2lkdGggPSBfem9vbUNvbnRhaW5lciRnZXRCb3Uud2lkdGgsIF9oZWlnaHQgPSBfem9vbUNvbnRhaW5lciRnZXRCb3UuaGVpZ2h0LCBfbGVmdCA9IF96b29tQ29udGFpbmVyJGdldEJvdS5sZWZ0LCBfdG9wID0gX3pvb21Db250YWluZXIkZ2V0Qm91LnRvcDtcclxuICAgICAgICAgICAgICBjb250YWluZXIgPSBfZXh0ZW5kcyh7fSwgY29udGFpbmVyLCB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogX3dpZHRoLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBfaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgbGVmdDogX2xlZnQsXHJcbiAgICAgICAgICAgICAgICB0b3A6IF90b3BcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdmlld3BvcnRXaWR0aCA9IHZpZXdwb3J0V2lkdGggfHwgY29udGFpbmVyLndpZHRoIC0gem9vbU9wdGlvbnMubWFyZ2luICogMjtcclxuICAgICAgICAgIHZpZXdwb3J0SGVpZ2h0ID0gdmlld3BvcnRIZWlnaHQgfHwgY29udGFpbmVyLmhlaWdodCAtIHpvb21PcHRpb25zLm1hcmdpbiAqIDI7XHJcbiAgICAgICAgICB2YXIgem9vbVRhcmdldCA9IGFjdGl2ZS56b29tZWRIZCB8fCBhY3RpdmUub3JpZ2luYWw7XHJcbiAgICAgICAgICB2YXIgbmF0dXJhbFdpZHRoID0gaXNTdmcoem9vbVRhcmdldCkgPyB2aWV3cG9ydFdpZHRoIDogem9vbVRhcmdldC5uYXR1cmFsV2lkdGggfHwgdmlld3BvcnRXaWR0aDtcclxuICAgICAgICAgIHZhciBuYXR1cmFsSGVpZ2h0ID0gaXNTdmcoem9vbVRhcmdldCkgPyB2aWV3cG9ydEhlaWdodCA6IHpvb21UYXJnZXQubmF0dXJhbEhlaWdodCB8fCB2aWV3cG9ydEhlaWdodDtcclxuICAgICAgICAgIHZhciBfem9vbVRhcmdldCRnZXRCb3VuZGkgPSB6b29tVGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCB0b3AgPSBfem9vbVRhcmdldCRnZXRCb3VuZGkudG9wLCBsZWZ0ID0gX3pvb21UYXJnZXQkZ2V0Qm91bmRpLmxlZnQsIHdpZHRoID0gX3pvb21UYXJnZXQkZ2V0Qm91bmRpLndpZHRoLCBoZWlnaHQgPSBfem9vbVRhcmdldCRnZXRCb3VuZGkuaGVpZ2h0O1xyXG4gICAgICAgICAgdmFyIHNjYWxlWCA9IE1hdGgubWluKG5hdHVyYWxXaWR0aCwgdmlld3BvcnRXaWR0aCkgLyB3aWR0aDtcclxuICAgICAgICAgIHZhciBzY2FsZVkgPSBNYXRoLm1pbihuYXR1cmFsSGVpZ2h0LCB2aWV3cG9ydEhlaWdodCkgLyBoZWlnaHQ7XHJcbiAgICAgICAgICB2YXIgc2NhbGUgPSBNYXRoLm1pbihzY2FsZVgsIHNjYWxlWSk7XHJcbiAgICAgICAgICB2YXIgdHJhbnNsYXRlWCA9ICgtbGVmdCArICh2aWV3cG9ydFdpZHRoIC0gd2lkdGgpIC8gMiArIHpvb21PcHRpb25zLm1hcmdpbiArIGNvbnRhaW5lci5sZWZ0KSAvIHNjYWxlO1xyXG4gICAgICAgICAgdmFyIHRyYW5zbGF0ZVkgPSAoLXRvcCArICh2aWV3cG9ydEhlaWdodCAtIGhlaWdodCkgLyAyICsgem9vbU9wdGlvbnMubWFyZ2luICsgY29udGFpbmVyLnRvcCkgLyBzY2FsZTtcclxuICAgICAgICAgIHZhciB0cmFuc2Zvcm0gPSBcInNjYWxlKFwiICsgc2NhbGUgKyBcIikgdHJhbnNsYXRlM2QoXCIgKyB0cmFuc2xhdGVYICsgXCJweCwgXCIgKyB0cmFuc2xhdGVZICsgXCJweCwgMClcIjtcclxuICAgICAgICAgIGFjdGl2ZS56b29tZWQuc3R5bGUudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xyXG4gICAgICAgICAgaWYgKGFjdGl2ZS56b29tZWRIZCkge1xyXG4gICAgICAgICAgICBhY3RpdmUuem9vbWVkSGQuc3R5bGUudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHtcclxuICAgICAgICAgIGlmICh0YXJnZXQgJiYgaW1hZ2VzLmluZGV4T2YodGFyZ2V0KSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgcmVzb2x2ZSh6b29tKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdmFyIF9oYW5kbGVPcGVuRW5kID0gZnVuY3Rpb24gX2hhbmRsZU9wZW5FbmQoKSB7XHJcbiAgICAgICAgICAgIGlzQW5pbWF0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGFjdGl2ZS56b29tZWQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgX2hhbmRsZU9wZW5FbmQpO1xyXG4gICAgICAgICAgICBhY3RpdmUub3JpZ2luYWwuZGlzcGF0Y2hFdmVudChjcmVhdGVDdXN0b21FdmVudChcIm1lZGl1bS16b29tOm9wZW5lZFwiLCB7XHJcbiAgICAgICAgICAgICAgZGV0YWlsOiB7XHJcbiAgICAgICAgICAgICAgICB6b29tOiB6b29tXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIHJlc29sdmUoem9vbSk7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgaWYgKGFjdGl2ZS56b29tZWQpIHtcclxuICAgICAgICAgICAgcmVzb2x2ZSh6b29tKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKHRhcmdldCkge1xyXG4gICAgICAgICAgICBhY3RpdmUub3JpZ2luYWwgPSB0YXJnZXQ7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGltYWdlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciBfaW1hZ2VzID0gaW1hZ2VzO1xyXG4gICAgICAgICAgICBhY3RpdmUub3JpZ2luYWwgPSBfaW1hZ2VzWzBdO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzb2x2ZSh6b29tKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYWN0aXZlLm9yaWdpbmFsLmRpc3BhdGNoRXZlbnQoY3JlYXRlQ3VzdG9tRXZlbnQoXCJtZWRpdW0tem9vbTpvcGVuXCIsIHtcclxuICAgICAgICAgICAgZGV0YWlsOiB7XHJcbiAgICAgICAgICAgICAgem9vbTogem9vbVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICBzY3JvbGxUb3AgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCB8fCAwO1xyXG4gICAgICAgICAgaXNBbmltYXRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgYWN0aXZlLnpvb21lZCA9IGNsb25lVGFyZ2V0KGFjdGl2ZS5vcmlnaW5hbCk7XHJcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG92ZXJsYXkpO1xyXG4gICAgICAgICAgaWYgKHpvb21PcHRpb25zLnRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9IGlzTm9kZSh6b29tT3B0aW9ucy50ZW1wbGF0ZSkgPyB6b29tT3B0aW9ucy50ZW1wbGF0ZSA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioem9vbU9wdGlvbnMudGVtcGxhdGUpO1xyXG4gICAgICAgICAgICBhY3RpdmUudGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICBhY3RpdmUudGVtcGxhdGUuYXBwZW5kQ2hpbGQodGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGFjdGl2ZS50ZW1wbGF0ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGFjdGl2ZS56b29tZWQpO1xyXG4gICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwibWVkaXVtLXpvb20tLW9wZW5lZFwiKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgYWN0aXZlLm9yaWdpbmFsLmNsYXNzTGlzdC5hZGQoXCJtZWRpdW0tem9vbS1pbWFnZS0taGlkZGVuXCIpO1xyXG4gICAgICAgICAgYWN0aXZlLnpvb21lZC5jbGFzc0xpc3QuYWRkKFwibWVkaXVtLXpvb20taW1hZ2UtLW9wZW5lZFwiKTtcclxuICAgICAgICAgIGFjdGl2ZS56b29tZWQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlKTtcclxuICAgICAgICAgIGFjdGl2ZS56b29tZWQuYWRkRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgX2hhbmRsZU9wZW5FbmQpO1xyXG4gICAgICAgICAgaWYgKGFjdGl2ZS5vcmlnaW5hbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXpvb20tc3JjXCIpKSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZCA9IGFjdGl2ZS56b29tZWQuY2xvbmVOb2RlKCk7XHJcbiAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZC5yZW1vdmVBdHRyaWJ1dGUoXCJzcmNzZXRcIik7XHJcbiAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZC5yZW1vdmVBdHRyaWJ1dGUoXCJzaXplc1wiKTtcclxuICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkLnNyYyA9IGFjdGl2ZS56b29tZWQuZ2V0QXR0cmlidXRlKFwiZGF0YS16b29tLXNyY1wiKTtcclxuICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICBjbGVhckludGVydmFsKGdldFpvb21UYXJnZXRTaXplKTtcclxuICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJVbmFibGUgdG8gcmVhY2ggdGhlIHpvb20gaW1hZ2UgdGFyZ2V0IFwiICsgYWN0aXZlLnpvb21lZEhkLnNyYyk7XHJcbiAgICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkID0gbnVsbDtcclxuICAgICAgICAgICAgICBfYW5pbWF0ZSgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgZ2V0Wm9vbVRhcmdldFNpemUgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICBpZiAoYWN0aXZlLnpvb21lZEhkLmNvbXBsZXRlKSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGdldFpvb21UYXJnZXRTaXplKTtcclxuICAgICAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZC5jbGFzc0xpc3QuYWRkKFwibWVkaXVtLXpvb20taW1hZ2UtLW9wZW5lZFwiKTtcclxuICAgICAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2UpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhY3RpdmUuem9vbWVkSGQpO1xyXG4gICAgICAgICAgICAgICAgX2FuaW1hdGUoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDEwKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoYWN0aXZlLm9yaWdpbmFsLmhhc0F0dHJpYnV0ZShcInNyY3NldFwiKSkge1xyXG4gICAgICAgICAgICBhY3RpdmUuem9vbWVkSGQgPSBhY3RpdmUuem9vbWVkLmNsb25lTm9kZSgpO1xyXG4gICAgICAgICAgICBhY3RpdmUuem9vbWVkSGQucmVtb3ZlQXR0cmlidXRlKFwic2l6ZXNcIik7XHJcbiAgICAgICAgICAgIHZhciBsb2FkRXZlbnRMaXN0ZW5lciA9IGFjdGl2ZS56b29tZWRIZC5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICBhY3RpdmUuem9vbWVkSGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgbG9hZEV2ZW50TGlzdGVuZXIpO1xyXG4gICAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZC5jbGFzc0xpc3QuYWRkKFwibWVkaXVtLXpvb20taW1hZ2UtLW9wZW5lZFwiKTtcclxuICAgICAgICAgICAgICBhY3RpdmUuem9vbWVkSGQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlKTtcclxuICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGFjdGl2ZS56b29tZWRIZCk7XHJcbiAgICAgICAgICAgICAgX2FuaW1hdGUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBfYW5pbWF0ZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG4gICAgICB2YXIgY2xvc2UgPSBmdW5jdGlvbiBjbG9zZSgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xyXG4gICAgICAgICAgaWYgKGlzQW5pbWF0aW5nIHx8ICFhY3RpdmUub3JpZ2luYWwpIHtcclxuICAgICAgICAgICAgcmVzb2x2ZSh6b29tKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdmFyIF9oYW5kbGVDbG9zZUVuZCA9IGZ1bmN0aW9uIF9oYW5kbGVDbG9zZUVuZCgpIHtcclxuICAgICAgICAgICAgYWN0aXZlLm9yaWdpbmFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtZWRpdW0tem9vbS1pbWFnZS0taGlkZGVuXCIpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGFjdGl2ZS56b29tZWQpO1xyXG4gICAgICAgICAgICBpZiAoYWN0aXZlLnpvb21lZEhkKSB7XHJcbiAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhY3RpdmUuem9vbWVkSGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQob3ZlcmxheSk7XHJcbiAgICAgICAgICAgIGFjdGl2ZS56b29tZWQuY2xhc3NMaXN0LnJlbW92ZShcIm1lZGl1bS16b29tLWltYWdlLS1vcGVuZWRcIik7XHJcbiAgICAgICAgICAgIGlmIChhY3RpdmUudGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGFjdGl2ZS50ZW1wbGF0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaXNBbmltYXRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgYWN0aXZlLnpvb21lZC5yZW1vdmVFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBfaGFuZGxlQ2xvc2VFbmQpO1xyXG4gICAgICAgICAgICBhY3RpdmUub3JpZ2luYWwuZGlzcGF0Y2hFdmVudChjcmVhdGVDdXN0b21FdmVudChcIm1lZGl1bS16b29tOmNsb3NlZFwiLCB7XHJcbiAgICAgICAgICAgICAgZGV0YWlsOiB7XHJcbiAgICAgICAgICAgICAgICB6b29tOiB6b29tXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIGFjdGl2ZS5vcmlnaW5hbCA9IG51bGw7XHJcbiAgICAgICAgICAgIGFjdGl2ZS56b29tZWQgPSBudWxsO1xyXG4gICAgICAgICAgICBhY3RpdmUuem9vbWVkSGQgPSBudWxsO1xyXG4gICAgICAgICAgICBhY3RpdmUudGVtcGxhdGUgPSBudWxsO1xyXG4gICAgICAgICAgICByZXNvbHZlKHpvb20pO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIGlzQW5pbWF0aW5nID0gdHJ1ZTtcclxuICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZShcIm1lZGl1bS16b29tLS1vcGVuZWRcIik7XHJcbiAgICAgICAgICBhY3RpdmUuem9vbWVkLnN0eWxlLnRyYW5zZm9ybSA9IFwiXCI7XHJcbiAgICAgICAgICBpZiAoYWN0aXZlLnpvb21lZEhkKSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZC5zdHlsZS50cmFuc2Zvcm0gPSBcIlwiO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGFjdGl2ZS50ZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICBhY3RpdmUudGVtcGxhdGUuc3R5bGUudHJhbnNpdGlvbiA9IFwib3BhY2l0eSAxNTBtc1wiO1xyXG4gICAgICAgICAgICBhY3RpdmUudGVtcGxhdGUuc3R5bGUub3BhY2l0eSA9IDA7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBhY3RpdmUub3JpZ2luYWwuZGlzcGF0Y2hFdmVudChjcmVhdGVDdXN0b21FdmVudChcIm1lZGl1bS16b29tOmNsb3NlXCIsIHtcclxuICAgICAgICAgICAgZGV0YWlsOiB7XHJcbiAgICAgICAgICAgICAgem9vbTogem9vbVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICBhY3RpdmUuem9vbWVkLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIF9oYW5kbGVDbG9zZUVuZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcbiAgICAgIHZhciB0b2dnbGUgPSBmdW5jdGlvbiB0b2dnbGUoKSB7XHJcbiAgICAgICAgdmFyIF9yZWYzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSwgdGFyZ2V0ID0gX3JlZjMudGFyZ2V0O1xyXG4gICAgICAgIGlmIChhY3RpdmUub3JpZ2luYWwpIHtcclxuICAgICAgICAgIHJldHVybiBjbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3Blbih7XHJcbiAgICAgICAgICB0YXJnZXQ6IHRhcmdldFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG4gICAgICB2YXIgZ2V0T3B0aW9ucyA9IGZ1bmN0aW9uIGdldE9wdGlvbnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHpvb21PcHRpb25zO1xyXG4gICAgICB9O1xyXG4gICAgICB2YXIgZ2V0SW1hZ2VzID0gZnVuY3Rpb24gZ2V0SW1hZ2VzKCkge1xyXG4gICAgICAgIHJldHVybiBpbWFnZXM7XHJcbiAgICAgIH07XHJcbiAgICAgIHZhciBnZXRab29tZWRJbWFnZSA9IGZ1bmN0aW9uIGdldFpvb21lZEltYWdlKCkge1xyXG4gICAgICAgIHJldHVybiBhY3RpdmUub3JpZ2luYWw7XHJcbiAgICAgIH07XHJcbiAgICAgIHZhciBpbWFnZXMgPSBbXTtcclxuICAgICAgdmFyIGV2ZW50TGlzdGVuZXJzID0gW107XHJcbiAgICAgIHZhciBpc0FuaW1hdGluZyA9IGZhbHNlO1xyXG4gICAgICB2YXIgc2Nyb2xsVG9wID0gMDtcclxuICAgICAgdmFyIHpvb21PcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgdmFyIGFjdGl2ZSA9IHtcclxuICAgICAgICBvcmlnaW5hbDogbnVsbCxcclxuICAgICAgICB6b29tZWQ6IG51bGwsXHJcbiAgICAgICAgem9vbWVkSGQ6IG51bGwsXHJcbiAgICAgICAgdGVtcGxhdGU6IG51bGxcclxuICAgICAgfTtcclxuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzZWxlY3RvcikgPT09IFwiW29iamVjdCBPYmplY3RdXCIpIHtcclxuICAgICAgICB6b29tT3B0aW9ucyA9IHNlbGVjdG9yO1xyXG4gICAgICB9IGVsc2UgaWYgKHNlbGVjdG9yIHx8IHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgIGF0dGFjaChzZWxlY3Rvcik7XHJcbiAgICAgIH1cclxuICAgICAgem9vbU9wdGlvbnMgPSBfZXh0ZW5kcyh7XHJcbiAgICAgICAgbWFyZ2luOiAwLFxyXG4gICAgICAgIGJhY2tncm91bmQ6IFwiI2ZmZlwiLFxyXG4gICAgICAgIHNjcm9sbE9mZnNldDogNDAsXHJcbiAgICAgICAgY29udGFpbmVyOiBudWxsLFxyXG4gICAgICAgIHRlbXBsYXRlOiBudWxsXHJcbiAgICAgIH0sIHpvb21PcHRpb25zKTtcclxuICAgICAgdmFyIG92ZXJsYXkgPSBjcmVhdGVPdmVybGF5KHpvb21PcHRpb25zLmJhY2tncm91bmQpO1xyXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgX2hhbmRsZUNsaWNrKTtcclxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIF9oYW5kbGVLZXlVcCk7XHJcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgX2hhbmRsZVNjcm9sbCk7XHJcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGNsb3NlKTtcclxuICAgICAgdmFyIHpvb20gPSB7XHJcbiAgICAgICAgb3Blbjogb3BlbixcclxuICAgICAgICBjbG9zZTogY2xvc2UsXHJcbiAgICAgICAgdG9nZ2xlOiB0b2dnbGUsXHJcbiAgICAgICAgdXBkYXRlOiB1cGRhdGUsXHJcbiAgICAgICAgY2xvbmU6IGNsb25lLFxyXG4gICAgICAgIGF0dGFjaDogYXR0YWNoLFxyXG4gICAgICAgIGRldGFjaDogZGV0YWNoLFxyXG4gICAgICAgIG9uOiBvbixcclxuICAgICAgICBvZmY6IG9mZixcclxuICAgICAgICBnZXRPcHRpb25zOiBnZXRPcHRpb25zLFxyXG4gICAgICAgIGdldEltYWdlczogZ2V0SW1hZ2VzLFxyXG4gICAgICAgIGdldFpvb21lZEltYWdlOiBnZXRab29tZWRJbWFnZVxyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gem9vbTtcclxuICAgIH07XHJcbiAgICBmdW5jdGlvbiBzdHlsZUluamVjdChjc3MsIHJlZikge1xyXG4gICAgICBpZiAocmVmID09PSB2b2lkIDApIHJlZiA9IHt9O1xyXG4gICAgICB2YXIgaW5zZXJ0QXQgPSByZWYuaW5zZXJ0QXQ7XHJcbiAgICAgIGlmICghY3NzIHx8IHR5cGVvZiBkb2N1bWVudCA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICB2YXIgaGVhZCA9IGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdO1xyXG4gICAgICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcbiAgICAgIHN0eWxlLnR5cGUgPSBcInRleHQvY3NzXCI7XHJcbiAgICAgIGlmIChpbnNlcnRBdCA9PT0gXCJ0b3BcIikge1xyXG4gICAgICAgIGlmIChoZWFkLmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICAgIGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlLCBoZWFkLmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBoZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcclxuICAgICAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHZhciBjc3MgPSBcIi5tZWRpdW0tem9vbS1vdmVybGF5e3Bvc2l0aW9uOmZpeGVkO3RvcDowO3JpZ2h0OjA7Ym90dG9tOjA7bGVmdDowO29wYWNpdHk6MDt0cmFuc2l0aW9uOm9wYWNpdHkgLjNzO3dpbGwtY2hhbmdlOm9wYWNpdHl9Lm1lZGl1bS16b29tLS1vcGVuZWQgLm1lZGl1bS16b29tLW92ZXJsYXl7Y3Vyc29yOnBvaW50ZXI7Y3Vyc29yOnpvb20tb3V0O29wYWNpdHk6MX0ubWVkaXVtLXpvb20taW1hZ2V7Y3Vyc29yOnBvaW50ZXI7Y3Vyc29yOnpvb20taW47dHJhbnNpdGlvbjp0cmFuc2Zvcm0gLjNzIGN1YmljLWJlemllciguMiwwLC4yLDEpfS5tZWRpdW0tem9vbS1pbWFnZS0taGlkZGVue3Zpc2liaWxpdHk6aGlkZGVufS5tZWRpdW0tem9vbS1pbWFnZS0tb3BlbmVke3Bvc2l0aW9uOnJlbGF0aXZlO2N1cnNvcjpwb2ludGVyO2N1cnNvcjp6b29tLW91dDt3aWxsLWNoYW5nZTp0cmFuc2Zvcm19XCI7XHJcbiAgICBzdHlsZUluamVjdChjc3MpO1xyXG4gICAgcmV0dXJuIG1lZGl1bVpvb207XHJcbiAgfSk7XHJcbigoKSA9PiB7XHJcbiAgICBsZXRcclxuICAgICAgICBzd2lwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3RoZXItc2VydmljZXNfX3N3aXBlcicpLFxyXG4gICAgICAgIHN3aXBlckxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3RoZXItc2VydmljZXNfX2xpc3QnKSxcclxuICAgICAgICBzd2lwZXJXaWR0aCA9IHBhcnNlSW50KGdldENvbXB1dGVkU3R5bGUoc3dpcGVyKS53aWR0aCksXHJcbiAgICAgICAgc3dpcGVyTGlzdFdpZHRoID0gcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZShzd2lwZXJMaXN0KS53aWR0aCk7XHJcblxyXG5cclxuICAgIHdpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgbGV0IGhlaWdodE9mU3dpcGVyID0gZ2V0Q29tcHV0ZWRTdHlsZShzd2lwZXIpLmhlaWdodDtcclxuICAgICAgICBzd2lwZXIuc3R5bGUuaGVpZ2h0ID0gYCR7cGFyc2VJbnQoaGVpZ2h0T2ZTd2lwZXIpICsgNDB9cHhgO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBzd2lwZXJMaXN0LnN0eWxlLm1hcmdpbkxlZnQgPSAnMHB4JztcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gc3dpcGUoZXZlbnQpIHtcclxuXHJcbiAgICAgICAgc3dpcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBzd2l0Y2hPZmZTd2lwZXIpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzd2l0Y2hPZmZTd2lwZXIoKSB7XHJcbiAgICAgICAgICAgIHN3aXBlci5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBzd2lwZU1vdXNlTW92ZU9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN3aXBlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgc3dpcGVNb3VzZU1vdmVPZmYpO1xyXG5cclxuICAgICAgICBsZXRcclxuICAgICAgICAgICAgZmlyc3RDdXJzb3JQb3NpdGlvbiA9IGV2ZW50LnBhZ2VYLFxyXG4gICAgICAgICAgICBpbml0aWFsQ3Vyc29yUG9zaXRpb24gPSBldmVudC5wYWdlWCxcclxuICAgICAgICAgICAgc3VtbVN3aXBlRGlzdGFuY2UgPSAwLFxyXG4gICAgICAgICAgICB3YXlUb1doaWNoU3dpcGVJc01hZGUsXHJcbiAgICAgICAgICAgIHN3aXBlTGlzdE1hcmdpbkxlZnQsXHJcbiAgICAgICAgICAgIGlzRmFzdFN3aXBlID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHN3aXBlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBzd2lwZU1vdXNlTW92ZU9uKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc3dpcGVNb3VzZU1vdmVPbihldmVudCkge1xyXG5cclxuICAgICAgICAgICAgbGV0XHJcbiAgICAgICAgICAgICAgICBuZXdDdXJzb3JQb3NpdGlvbiA9IGV2ZW50LnBhZ2VYLFxyXG4gICAgICAgICAgICAgICAgc3dpcGVEaXN0YW5jZSA9IE1hdGguYWJzKGluaXRpYWxDdXJzb3JQb3NpdGlvbiAtIG5ld0N1cnNvclBvc2l0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIHN3aXBlTGlzdE1hcmdpbkxlZnQgPSBwYXJzZUludChzd2lwZXJMaXN0LnN0eWxlLm1hcmdpbkxlZnQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKG5ld0N1cnNvclBvc2l0aW9uIDwgaW5pdGlhbEN1cnNvclBvc2l0aW9uKSB3YXlUb1doaWNoU3dpcGVJc01hZGUgPSAnbGVmdCc7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG5ld0N1cnNvclBvc2l0aW9uID4gaW5pdGlhbEN1cnNvclBvc2l0aW9uKSB3YXlUb1doaWNoU3dpcGVJc01hZGUgPSAncmlnaHQnO1xyXG4gICAgICAgICAgICBlbHNlIGlmIChuZXdDdXJzb3JQb3NpdGlvbiA9IGluaXRpYWxDdXJzb3JQb3NpdGlvbikgd2F5VG9XaGljaFN3aXBlSXNNYWRlID0gd2F5VG9XaGljaFN3aXBlSXNNYWRlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgc3dpdGNoKHdheVRvV2hpY2hTd2lwZUlzTWFkZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbGVmdCc6XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgtc3dpcGVMaXN0TWFyZ2luTGVmdCA+PSAoc3dpcGVyTGlzdFdpZHRoIC0gc3dpcGVyV2lkdGgpKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpcGVyTGlzdC5zdHlsZS5tYXJnaW5MZWZ0ID0gYCR7c3dpcGVMaXN0TWFyZ2luTGVmdCAtIHN3aXBlRGlzdGFuY2V9cHhgO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3dpcGVMaXN0TWFyZ2luTGVmdCA+PSAwICkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXBlckxpc3Quc3R5bGUubWFyZ2luTGVmdCA9IGAke3N3aXBlTGlzdE1hcmdpbkxlZnQgKyBzd2lwZURpc3RhbmNlfXB4YDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc3VtbVN3aXBlRGlzdGFuY2UgKz0gc3dpcGVEaXN0YW5jZTtcclxuICAgICAgICAgICAgaW5pdGlhbEN1cnNvclBvc2l0aW9uID0gbmV3Q3Vyc29yUG9zaXRpb247XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzd2lwZU1vdXNlTW92ZU9mZihldmVudCkge1xyXG4gICAgICAgICAgICBzd2lwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgc3dpcGVNb3VzZU1vdmVPbik7XHJcblxyXG4gICAgICAgICAgICBpc0Zhc3RTd2lwZSA9IChzdW1tU3dpcGVEaXN0YW5jZSA+PSAxMDApID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoIWlzRmFzdFN3aXBlKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBzdW1tU3dpcGVEaXN0YW5jZSA9IChzdW1tU3dpcGVEaXN0YW5jZSA+IChzd2lwZXJMaXN0V2lkdGggLSBzd2lwZXJXaWR0aCkpID8gKHN3aXBlckxpc3RXaWR0aCAtIHN3aXBlcldpZHRoKSA6IHN1bW1Td2lwZURpc3RhbmNlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbGV0IGFkZGl0aW9uYWxTd2lwZURpc3RhbmNlID0gKHN1bW1Td2lwZURpc3RhbmNlIC8gMS41KTsgLy8gPC0tLS0gY2hhbmdlIHN3aXBlIHNwZWVkLCBmb3IgZXhhbXBsZTogKHN1bW1Td2lwZURpc3RhbmNlIC8gMi41KVxyXG5cclxuXHJcbiAgICAgICAgICAgIGxldCBsYXN0Q3Vyc29yUG9zaXRpb24gPSBldmVudC5wYWdlWDtcclxuICAgICAgICAgICAgd2F5VG9XaGljaFN3aXBlSXNNYWRlID0gKGxhc3RDdXJzb3JQb3NpdGlvbiA8IGZpcnN0Q3Vyc29yUG9zaXRpb24pID8gJ2xlZnQnIDogJ3JpZ2h0JztcclxuXHJcbiAgICAgICAgICAgIHN3aXBlTGlzdE1hcmdpbkxlZnQgPSBwYXJzZUludChzd2lwZXJMaXN0LnN0eWxlLm1hcmdpbkxlZnQpO1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoKHdheVRvV2hpY2hTd2lwZUlzTWFkZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbGVmdCc6XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgtc3dpcGVMaXN0TWFyZ2luTGVmdCA+PSAoc3dpcGVyTGlzdFdpZHRoIC0gc3dpcGVyV2lkdGgpKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbFN3aXBlRGlzdGFuY2UgPSAoYWRkaXRpb25hbFN3aXBlRGlzdGFuY2UgPiAoKHN3aXBlckxpc3RXaWR0aCAtIHN3aXBlcldpZHRoKSArIHN3aXBlTGlzdE1hcmdpbkxlZnQpKSA/ICgoc3dpcGVyTGlzdFdpZHRoIC0gc3dpcGVyV2lkdGgpICsgc3dpcGVMaXN0TWFyZ2luTGVmdCkgOiBhZGRpdGlvbmFsU3dpcGVEaXN0YW5jZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3dpcGVyTGlzdC5zdHlsZS50cmFuc2l0aW9uID0gJ2FsbCAwLjM1cyc7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpcGVyTGlzdC5zdHlsZS5tYXJnaW5MZWZ0ID0gYCR7c3dpcGVMaXN0TWFyZ2luTGVmdCAtIGFkZGl0aW9uYWxTd2lwZURpc3RhbmNlfXB4YDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlICdyaWdodCc6XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN3aXBlTGlzdE1hcmdpbkxlZnQgPj0gMCApIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbFN3aXBlRGlzdGFuY2UgPSAoYWRkaXRpb25hbFN3aXBlRGlzdGFuY2UgPiAtc3dpcGVMaXN0TWFyZ2luTGVmdCkgPyAtc3dpcGVMaXN0TWFyZ2luTGVmdCA6IGFkZGl0aW9uYWxTd2lwZURpc3RhbmNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzd2lwZXJMaXN0LnN0eWxlLnRyYW5zaXRpb24gPSAnYWxsIDAuMzVzJztcclxuICAgICAgICAgICAgICAgICAgICBzd2lwZXJMaXN0LnN0eWxlLm1hcmdpbkxlZnQgPSBgJHtzd2lwZUxpc3RNYXJnaW5MZWZ0ICsgYWRkaXRpb25hbFN3aXBlRGlzdGFuY2V9cHhgO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHN3aXBlckxpc3Quc3R5bGUudHJhbnNpdGlvbiA9ICdhbGwgMHMnO1xyXG4gICAgICAgICAgICB9LCAyNTApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgc3dpcGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBzd2lwZU1vdXNlTW92ZU9mZik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN3aXBlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBzd2lwZSk7XHJcbn0pKCk7XHJcbigoKSA9PiB7XHJcbiAgICBsZXRcclxuICAgICAgICBpbWFnZUdhbGxlcnkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29uc3VsdGF0aW9uLXdpdGgtZGVzaWduZXJfX2dhbGxlcnknKSxcclxuICAgICAgICBtYWluU2NyZWVuSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29uc3VsdGF0aW9uLXdpdGgtZGVzaWduZXJfX21haW4taW1hZ2UnKTtcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gY2hhbmdlTWFpblNjcmVlbkltYWdlKGV2ZW50KSB7XHJcbiAgICAgICAgbGV0IHRhcmdldD0gZXZlbnQudGFyZ2V0O1xyXG4gICAgICAgIGlmICghdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY29uc3VsdGF0aW9uLXdpdGgtZGVzaWduZXJfX2ltYWdlJykpIHJldHVybjtcclxuXHJcbiAgICAgICAgbGV0XHJcbiAgICAgICAgICAgIHNyY01haW5TY3JlZW5JbWFnZSA9IG1haW5TY3JlZW5JbWFnZS5zcmMuc2xpY2UodGFyZ2V0LnNyYy5pbmRleE9mKCd2dGJfc3RhdGljL2ltZy9jb25zdWx0YXRpb24td2l0aC1kZXNpZ25lci0nKSksXHJcbiAgICAgICAgICAgIHNyY1dlYnBNYWluU2NyZWVuSW1hZ2UgPSBtYWluU2NyZWVuSW1hZ2UucHJldmlvdXNFbGVtZW50U2libGluZy5zcmNzZXQsXHJcbiAgICAgICAgICAgIHNyY0ltZyA9IHRhcmdldC5zcmMuc2xpY2UodGFyZ2V0LnNyYy5pbmRleE9mKCd2dGJfc3RhdGljL2ltZy9jb25zdWx0YXRpb24td2l0aC1kZXNpZ25lci0nKSksXHJcbiAgICAgICAgICAgIHNyY1dlYnBJbWcgPSB0YXJnZXQucHJldmlvdXNFbGVtZW50U2libGluZy5zcmNzZXQ7XHJcblxyXG4gICAgICAgIG1haW5TY3JlZW5JbWFnZS5zcmMgPSBzcmNJbWc7XHJcbiAgICAgICAgbWFpblNjcmVlbkltYWdlLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuc3Jjc2V0ID0gc3JjV2VicEltZztcclxuICAgICAgICB0YXJnZXQuc3JjID0gc3JjTWFpblNjcmVlbkltYWdlO1xyXG4gICAgICAgIHRhcmdldC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLnNyY3NldCA9IHNyY1dlYnBNYWluU2NyZWVuSW1hZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgaW1hZ2VHYWxsZXJ5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2hhbmdlTWFpblNjcmVlbkltYWdlKTtcclxufSkoKTtcclxuKCgpID0+IHtcclxuICBjb25zdCBtb2RhbFRyaWdnZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnKltkYXRhLW1vZGFsLXRhcmdldF0nKTtcclxuICBjb25zdCBjbG9zZU1vZGFsQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJypbZGF0YS1tb2RhbC1jbG9zZV0nKTtcclxuICBsZXQgb3BlbmVkTW9kYWxJRDtcclxuXHJcbiAgY29uc3Qgb3Blbk1vZGFsV2luZG93ID0gKGV2dCkgPT4ge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZ0LmN1cnJlbnRUYXJnZXQ7XHJcbiAgICBjb25zdCBtb2RhbElEID0gdGFyZ2V0LmRhdGFzZXQubW9kYWxUYXJnZXQ7XHJcbiAgICBjb25zdCB0YXJnZXRNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1vZGFsSUQpO1xyXG5cclxuICAgIChvcGVuZWRNb2RhbElEICE9PSB1bmRlZmluZWQpID8gY2xvc2VNb2RhbFdpbmRvdyhvcGVuZWRNb2RhbElEKSA6IG51bGw7XHJcblxyXG4gICAgb3BlbmVkTW9kYWxJRCA9IG1vZGFsSUQ7XHJcblxyXG4gICAgdGFyZ2V0TW9kYWwuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmNsYXNzTGlzdC5hZGQoJ2ZpeGVkJyk7XHJcblxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VNb2RhbEJ5QmFja2dyb3VuZCk7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGNsb3NlTW9kYWxCeUVzYyk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgY2xvc2VNb2RhbEJ5RXNjID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgIGNsb3NlTW9kYWxXaW5kb3cob3BlbmVkTW9kYWxJRClcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBjbG9zZU1vZGFsQnlCYWNrZ3JvdW5kID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RhbF9fYmcnKSkge1xyXG4gICAgICBjbG9zZU1vZGFsV2luZG93KG9wZW5lZE1vZGFsSUQpXHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgY2xvc2VNb2RhbEJ5QnV0dG9uID0gKGV2dCkgPT4gY2xvc2VNb2RhbFdpbmRvdyhldnQuY3VycmVudFRhcmdldC5kYXRhc2V0Lm1vZGFsQ2xvc2UpO1xyXG5cclxuICBjb25zdCBjbG9zZU1vZGFsV2luZG93ID0gKG1vZGFsSUQpID0+IHtcclxuICAgIGNvbnN0IHRhcmdldE1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobW9kYWxJRCk7XHJcblxyXG4gICAgdGFyZ2V0TW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmNsYXNzTGlzdC5yZW1vdmUoJ2ZpeGVkJyk7XHJcblxyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VNb2RhbEJ5QmFja2dyb3VuZCk7XHJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGNsb3NlTW9kYWxCeUVzYyk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaW5pdGlhbGl6ZU1vZGFsVHJpZ2dlcnMgPSAoKSA9PiB7XHJcbiAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiBtb2RhbFRyaWdnZXJzKSB7XHJcbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5Nb2RhbFdpbmRvdyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY2xvc2VNb2RhbEJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4gYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VNb2RhbEJ5QnV0dG9uKSk7XHJcblxyXG4gIHdpbmRvdy5tb2RhbHMgPSB7XHJcbiAgICBvcGVuTW9kYWxXaW5kb3c6IG9wZW5Nb2RhbFdpbmRvdyxcclxuICAgIGNsb3NlTW9kYWxXaW5kb3c6IGNsb3NlTW9kYWxXaW5kb3csXHJcbiAgfTtcclxuXHJcbiAgaW5pdGlhbGl6ZU1vZGFsVHJpZ2dlcnMoKTtcclxufSkoKTtcclxuXHJcbm1lZGl1bVpvb20oJ1tkYXRhLXpvb21hYmxlXScpOyJdfQ==
