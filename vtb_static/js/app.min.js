"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):window.mediumZoom=t()}(0,function(){var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},t=function(e){return"IMG"===e.tagName},o=function(e){return e&&1===e.nodeType},n=function(e){return".svg"===(e.currentSrc||e.src).substr(-4).toLowerCase()},i=function(e){try{return Array.isArray(e)?e.filter(t):function(e){return NodeList.prototype.isPrototypeOf(e)}(e)?[].slice.call(e).filter(t):o(e)?[e].filter(t):"string"==typeof e?[].slice.call(document.querySelectorAll(e)).filter(t):[]}catch(e){throw new TypeError("The provided selector is invalid.\nExpects a CSS selector, a Node element, a NodeList or an array.\nSee: https://github.com/francoischalifour/medium-zoom")}},r=function(t,o){var n=e({bubbles:!1,cancelable:!1,detail:void 0},o);if("function"==typeof window.CustomEvent)return new CustomEvent(t,n);var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),i};return function(e,t){void 0===t&&(t={});var o=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===o&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}"),function t(d){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=window.Promise||function(e){function t(){}e(t,t)},m=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];var n=t.reduce(function(e,t){return[].concat(e,i(t))},[]);return n.filter(function(e){return-1===f.indexOf(e)}).forEach(function(e){f.push(e),e.classList.add("medium-zoom-image")}),p.forEach(function(e){var t=e.type,o=e.listener,i=e.options;n.forEach(function(e){e.addEventListener(t,o,i)})}),b},c=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target,i=function(){var t={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},i=void 0,r=void 0;if(y.container)if(y.container instanceof Object)i=(t=e({},t,y.container)).width-t.left-t.right-2*y.margin,r=t.height-t.top-t.bottom-2*y.margin;else{var d=(o(y.container)?y.container:document.querySelector(y.container)).getBoundingClientRect(),a=d.width,l=d.height,m=d.left,c=d.top;t=e({},t,{width:a,height:l,left:m,top:c})}i=i||t.width-2*y.margin,r=r||t.height-2*y.margin;var u=h.zoomedHd||h.original,s=n(u)?i:u.naturalWidth||i,f=n(u)?r:u.naturalHeight||r,p=u.getBoundingClientRect(),v=p.top,g=p.left,z=p.width,b=p.height,E=Math.min(s,i)/z,w=Math.min(f,r)/b,L=Math.min(E,w),S="scale("+L+") translate3d("+((i-z)/2-g+y.margin+t.left)/L+"px, "+((r-b)/2-v+y.margin+t.top)/L+"px, 0)";h.zoomed.style.transform=S,h.zoomedHd&&(h.zoomedHd.style.transform=S)};return new l(function(e){if(t&&-1===f.indexOf(t))e(b);else if(h.zoomed)e(b);else{if(t)h.original=t;else{if(!(f.length>0))return void e(b);var n=f;h.original=n[0]}if(h.original.dispatchEvent(r("medium-zoom:open",{detail:{zoom:b}})),g=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,v=!0,h.zoomed=function(e){var t=e.getBoundingClientRect(),o=t.top,n=t.left,i=t.width,r=t.height,d=e.cloneNode(),a=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,l=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return d.removeAttribute("id"),d.style.position="absolute",d.style.top=o+a+"px",d.style.left=n+l+"px",d.style.width=i+"px",d.style.height=r+"px",d.style.transform="",d}(h.original),document.body.appendChild(z),y.template){var d=o(y.template)?y.template:document.querySelector(y.template);h.template=document.createElement("div"),h.template.appendChild(d.content.cloneNode(!0)),document.body.appendChild(h.template)}if(document.body.appendChild(h.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),h.original.classList.add("medium-zoom-image--hidden"),h.zoomed.classList.add("medium-zoom-image--opened"),h.zoomed.addEventListener("click",u),h.zoomed.addEventListener("transitionend",function t(){v=!1,h.zoomed.removeEventListener("transitionend",t),h.original.dispatchEvent(r("medium-zoom:opened",{detail:{zoom:b}})),e(b)}),h.original.getAttribute("data-zoom-src")){h.zoomedHd=h.zoomed.cloneNode(),h.zoomedHd.removeAttribute("srcset"),h.zoomedHd.removeAttribute("sizes"),h.zoomedHd.src=h.zoomed.getAttribute("data-zoom-src"),h.zoomedHd.onerror=function(){clearInterval(a),console.warn("Unable to reach the zoom image target "+h.zoomedHd.src),h.zoomedHd=null,i()};var a=setInterval(function(){h.zoomedHd.complete&&(clearInterval(a),h.zoomedHd.classList.add("medium-zoom-image--opened"),h.zoomedHd.addEventListener("click",u),document.body.appendChild(h.zoomedHd),i())},10)}else if(h.original.hasAttribute("srcset")){h.zoomedHd=h.zoomed.cloneNode(),h.zoomedHd.removeAttribute("sizes");var l=h.zoomedHd.addEventListener("load",function(){h.zoomedHd.removeEventListener("load",l),h.zoomedHd.classList.add("medium-zoom-image--opened"),h.zoomedHd.addEventListener("click",u),document.body.appendChild(h.zoomedHd),i()})}else i()}})},u=function(){return new l(function(e){!v&&h.original?(v=!0,document.body.classList.remove("medium-zoom--opened"),h.zoomed.style.transform="",h.zoomedHd&&(h.zoomedHd.style.transform=""),h.template&&(h.template.style.transition="opacity 150ms",h.template.style.opacity=0),h.original.dispatchEvent(r("medium-zoom:close",{detail:{zoom:b}})),h.zoomed.addEventListener("transitionend",function t(){h.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(h.zoomed),h.zoomedHd&&document.body.removeChild(h.zoomedHd),document.body.removeChild(z),h.zoomed.classList.remove("medium-zoom-image--opened"),h.template&&document.body.removeChild(h.template),v=!1,h.zoomed.removeEventListener("transitionend",t),h.original.dispatchEvent(r("medium-zoom:closed",{detail:{zoom:b}})),h.original=null,h.zoomed=null,h.zoomedHd=null,h.template=null,e(b)})):e(b)})},s=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target;return h.original?u():c({target:e})},f=[],p=[],v=!1,g=0,y=a,h={original:null,zoomed:null,zoomedHd:null,template:null};"[object Object]"===Object.prototype.toString.call(d)?y=d:(d||"string"==typeof d)&&m(d);var z=function(e){var t=document.createElement("div");return t.classList.add("medium-zoom-overlay"),t.style.background=e,t}((y=e({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},y)).background);document.addEventListener("click",function(e){var t=e.target;t!==z?-1!==f.indexOf(t)&&s({target:t}):u()}),document.addEventListener("keyup",function(e){27===(e.keyCode||e.which)&&u()}),document.addEventListener("scroll",function(){if(!v&&h.original){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(g-e)>y.scrollOffset&&setTimeout(u,150)}}),window.addEventListener("resize",u);var b={open:c,close:u,toggle:s,update:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t;if(t.background&&(z.style.background=t.background),t.container&&t.container instanceof Object&&(n.container=e({},y.container,t.container)),t.template){var i=o(t.template)?t.template:document.querySelector(t.template);n.template=i}return y=e({},y,n),f.forEach(function(e){e.dispatchEvent(r("medium-zoom:update",{detail:{zoom:b}}))}),b},clone:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t(e({},y,o))},attach:m,detach:function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];h.zoomed&&u();var n=t.length>0?t.reduce(function(e,t){return[].concat(e,i(t))},[]):f;return n.forEach(function(e){e.classList.remove("medium-zoom-image"),e.dispatchEvent(r("medium-zoom:detach",{detail:{zoom:b}}))}),f=f.filter(function(e){return-1===n.indexOf(e)}),b},on:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f.forEach(function(n){n.addEventListener("medium-zoom:"+e,t,o)}),p.push({type:"medium-zoom:"+e,listener:t,options:o}),b},off:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f.forEach(function(n){n.removeEventListener("medium-zoom:"+e,t,o)}),p=p.filter(function(o){return!(o.type==="medium-zoom:"+e&&o.listener.toString()===t.toString())}),b},getOptions:function(){return y},getImages:function(){return f},getZoomedImage:function(){return h.original}};return b}}),function(){var e=document.querySelector(".other-services__swiper"),t=document.querySelector(".other-services__list"),o=parseInt(getComputedStyle(e).width),n=parseInt(getComputedStyle(t).width);window.onload=function(){var t=getComputedStyle(e).height;e.style.height="".concat(parseInt(t)+40,"px")},t.style.marginLeft="0px",e.addEventListener("mousedown",function(i){e.addEventListener("mouseleave",function(){e.removeEventListener("mousemove",c)}),e.addEventListener("mouseup",function i(l){if(e.removeEventListener("mousemove",c),m>=100){var u=(m=m>n-o?n-o:m)/1.5,s=l.pageX;switch(r=s<a?"left":"right",d=parseInt(t.style.marginLeft),r){case"left":if(-d>=n-o)return;u=u>n-o+d?n-o+d:u,t.style.transition="all 0.35s",t.style.marginLeft="".concat(d-u,"px");break;case"right":if(d>=0)return;u=u>-d?-d:u,t.style.transition="all 0.35s",t.style.marginLeft="".concat(d+u,"px")}setTimeout(function(){t.style.transition="all 0s"},250),e.removeEventListener("mouseup",i)}});var r,d,a=i.pageX,l=i.pageX,m=0;function c(e){var i=e.pageX,a=Math.abs(l-i);switch(d=parseInt(t.style.marginLeft),i<l?r="left":i>l?r="right":(i=l)&&(r=r),r){case"left":if(-d>=n-o)return;t.style.marginLeft="".concat(d-a,"px");break;case"right":if(d>=0)return;t.style.marginLeft="".concat(d+a,"px")}m+=a,l=i}e.addEventListener("mousemove",c)})}(),function(){var e,t=document.querySelectorAll("*[data-modal-target]"),o=document.querySelectorAll("*[data-modal-close]"),n=function(t){var o=t.currentTarget,n=o.dataset.modalTarget,d=document.getElementById(n);void 0!==e&&a(e),"service-example"===n&&function(e,t){var o=e.parentElement.querySelector(".what-you-get__item-title").textContent.replace(/\s+/g," ").trim(),n=t.querySelector(".modal__title"),i=e.dataset.modalServiceExampleImage,r=t.querySelector(".modal__image");n.textContent=o,r.src=i}(o,d),e=n,d.classList.add("visible"),document.querySelector("body").classList.add("fixed"),window.addEventListener("click",r),window.addEventListener("keydown",i)},i=function(t){"Escape"===t.key&&a(e)},r=function(t){t.target.classList.contains("modal__bg")&&a(e)},d=function(e){return a(e.currentTarget.dataset.modalClose)},a=function(e){document.getElementById(e).classList.remove("visible"),document.querySelector("body").classList.remove("fixed"),window.removeEventListener("click",r),window.removeEventListener("keydown",i)};o.forEach(function(e){return e.addEventListener("click",d)}),window.modals={openModalWindow:n,closeModalWindow:a},function(){var e=!0,o=!1,i=void 0;try{for(var r,d=t[Symbol.iterator]();!(e=(r=d.next()).done);e=!0)r.value.addEventListener("click",n)}catch(e){o=!0,i=e}finally{try{e||null==d.return||d.return()}finally{if(o)throw i}}}();var l=!0;window.HTMLDialogElement||(document.body.classList.add("no-dialog"),l=!1),button.onclick=function(){l?modal.showModal():modal.setAttribute("open",""),modal.querySelector("input").focus()},modal.addEventListener("transitionend",function(e){modal.querySelector("input").focus()})}(),function(){var e=document.querySelectorAll("*[data-scroll-link]"),t=function(e){var t=e.target,o=document.getElementById(t.dataset.scrollLink);o&&o.scrollIntoView({behavior:"smooth"})};Boolean(e)&&e.forEach(function(e){return e.addEventListener("click",t)})}(),mediumZoom("[data-zoomable]");
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJnbG9iYWwiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIl90eXBlb2YiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJ3aW5kb3ciLCJtZWRpdW1ab29tIiwiX2V4dGVuZHMiLCJPYmplY3QiLCJhc3NpZ24iLCJ0YXJnZXQiLCJpIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwic291cmNlIiwicHJvdG90eXBlIiwiY2FsbCIsImtleSIsImlzU3VwcG9ydGVkIiwibm9kZSIsInRhZ05hbWUiLCJzZWxlY3RvciIsIm5vZGVUeXBlIiwiaXNTdmciLCJpbWFnZSIsImN1cnJlbnRTcmMiLCJpc1Byb3RvdHlwZU9mIiwiZ2V0SW1hZ2VzRnJvbVNlbGVjdG9yIiwiaXNOb2RlIiwiZmlsdGVyIiwiTm9kZUxpc3QiLCJpc05vZGVMaXN0IiwiaXNBcnJheSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlcnIiLCJjcmVhdGVDdXN0b21FdmVudCIsInR5cGUiLCJwYXJhbXMiLCJldmVudFBhcmFtcyIsImNsb25lVGFyZ2V0IiwiX3RlbXBsYXRlJGdldEJvdW5kaW5nIiwidG9wIiwibGVmdCIsIndpZHRoIiwiaGVpZ2h0IiwiY2xvbmUiLCJkb2N1bWVudCIsImNsb25lTm9kZSIsImN1c3RvbUV2ZW50IiwiaW5pdEN1c3RvbUV2ZW50IiwicGFnZVlPZmZzZXQiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxUb3AiLCJzY3JvbGxMZWZ0IiwiYWN0aXZlIiwiY3NzIiwicmVmIiwib3JpZ2luYWwiLCJ6b29tZWQiLCJpbnNlcnRBdCIsImhlYWQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInN0eWxlIiwiY3JlYXRlRWxlbWVudCIsImlzQW5pbWF0aW5nIiwiY2xhc3NMaXN0IiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsInRlbXBsYXRlIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJhcHBlbmRDaGlsZCIsImRpc3BhdGNoRXZlbnQiLCJzdHlsZUluamVjdCIsInBvc2l0aW9uIiwidW5kZWZpbmVkIiwiUHJvbWlzZSIsImZuIiwiYXR0YWNoIiwiX2xlbiIsInNlbGVjdG9ycyIsIkFycmF5IiwiX2tleSIsImV2ZW50Iiwid2hpY2giLCJpbWFnZXNBY2N1bXVsYXRvciIsImN1cnJlbnRTZWxlY3RvciIsImNsb3NlIiwiY29uY2F0IiwibmV3SW1hZ2VzIiwibmV3SW1hZ2UiLCJpbWFnZXMiLCJpbmRleE9mIiwidXBkYXRlIiwib3B0aW9ucyIsInB1c2giLCJuZXdPcHRpb25zIiwiZXZlbnRMaXN0ZW5lcnMiLCJiYWNrZ3JvdW5kIiwiX3JlZiIsIm92ZXJsYXkiLCJsaXN0ZW5lciIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiem9vbSIsIm9wZW4iLCJkZXRhY2giLCJfYW5pbWF0ZSIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwicmlnaHQiLCJib3R0b20iLCJ2aWV3cG9ydFdpZHRoIiwidmlld3BvcnRIZWlnaHQiLCJpbWFnZXNUb0RldGFjaCIsInJlbW92ZSIsImRldGFpbCIsInpvb21PcHRpb25zIiwiY29udGFpbmVyIiwibWFyZ2luIiwiX3pvb21Db250YWluZXIkZ2V0Qm91IiwicXVlcnlTZWxlY3RvciIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIl93aWR0aCIsIl9oZWlnaHQiLCJfbGVmdCIsIl90b3AiLCJ6b29tVGFyZ2V0Iiwiem9vbWVkSGQiLCJuYXR1cmFsV2lkdGgiLCJuYXR1cmFsSGVpZ2h0IiwiX3pvb21UYXJnZXQkZ2V0Qm91bmRpIiwic2NhbGVZIiwiTWF0aCIsIm1pbiIsInNjYWxlWCIsInRyYW5zZm9ybSIsInNjYWxlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2ZW50TGlzdGVuZXIiLCJyZXNvbHZlIiwiYm9keSIsInNsaWNlIiwicGFnZVhPZmZzZXQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJjcmVhdGVPdmVybGF5IiwiY29udGVudCIsIl9oYW5kbGVPcGVuRW5kIiwiX3JlZjIiLCJzcmMiLCJnZXRBdHRyaWJ1dGUiLCJ0cmFuc2xhdGVYIiwidHJhbnNsYXRlWSIsImNvbXBsZXRlIiwiZ2V0Wm9vbVRhcmdldFNpemUiLCJhZGQiLCJoYXNBdHRyaWJ1dGUiLCJsb2FkRXZlbnRMaXN0ZW5lciIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIl9oYW5kbGVDbG9zZUVuZCIsInJlbW92ZUNoaWxkIiwiY2xlYXJJbnRlcnZhbCIsImNvbnNvbGUiLCJ3YXJuIiwidG9TdHJpbmciLCJjYW5jZWxhYmxlIiwidG9nZ2xlIiwia2V5Q29kZSIsImNyZWF0ZUV2ZW50IiwiY3VycmVudFNjcm9sbCIsImFicyIsInNjcm9sbE9mZnNldCIsIl9oYW5kbGVDbGljayIsIl9rZXkyIiwicmVkdWNlIiwib24iLCJvZmYiLCJzd2lwZXJMaXN0Iiwic3dpcGVyV2lkdGgiLCJfcmVmMyIsImdldENvbXB1dGVkU3R5bGUiLCJzd2lwZXIiLCJzd2lwZXJMaXN0V2lkdGgiLCJwYXJzZUludCIsIm9ubG9hZCIsImhlaWdodE9mU3dpcGVyIiwibWFyZ2luTGVmdCIsImdldEltYWdlcyIsInN3aXBlTW91c2VNb3ZlT24iLCJzd2lwZU1vdXNlTW92ZU9mZiIsImdldE9wdGlvbnMiLCJnZXRab29tZWRJbWFnZSIsInN1bW1Td2lwZURpc3RhbmNlIiwibGFzdEN1cnNvclBvc2l0aW9uIiwicGFnZVgiLCJ3YXlUb1doaWNoU3dpcGVJc01hZGUiLCJmaXJzdEN1cnNvclBvc2l0aW9uIiwic3dpcGVMaXN0TWFyZ2luTGVmdCIsImFkZGl0aW9uYWxTd2lwZURpc3RhbmNlIiwidHJhbnNpdGlvbiIsImNyZWF0ZVRleHROb2RlIiwic2V0VGltZW91dCIsIm5ld0N1cnNvclBvc2l0aW9uIiwiaW5pdGlhbEN1cnNvclBvc2l0aW9uIiwic3dpcGVEaXN0YW5jZSIsIm1vZGFsVHJpZ2dlcnMiLCJvcGVuTW9kYWxXaW5kb3ciLCJldnQiLCJtb2RhbElEIiwiZGF0YXNldCIsIm1vZGFsVGFyZ2V0IiwidGFyZ2V0TW9kYWwiLCJnZXRFbGVtZW50QnlJZCIsIm9wZW5lZE1vZGFsSUQiLCJjbG9zZU1vZGFsV2luZG93Iiwic2VydmljZVRpdGxlIiwicGFyZW50RWxlbWVudCIsInRleHRDb250ZW50IiwicmVwbGFjZSIsInRyaW0iLCJtb2RhbFRpdGxlIiwicGF0aFRvSW1hZ2UiLCJtb2RhbFNlcnZpY2VFeGFtcGxlSW1hZ2UiLCJtb2RhbEltYWdlIiwiY3JlYXRlU2VydmljZUV4YW1wbGVNb2RhbCIsImNsb3NlTW9kYWxCeUJhY2tncm91bmQiLCJjbG9zZU1vZGFsQnlFc2MiLCJjbG9zZU1vZGFsQnlCdXR0b24iLCJjdXJyZW50VGFyZ2V0IiwibW9kYWxDbG9zZSIsImJ1dHRvbiIsIm1vZGFscyIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24iLCJfZGlkSXRlcmF0b3JFcnJvciIsIl9pdGVyYXRvckVycm9yIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm5leHQiLCJkb25lIiwidmFsdWUiLCJyZXR1cm4iLCJpc0RpYWxvZ1N1cHBvcnRlZCIsIkhUTUxEaWFsb2dFbGVtZW50Iiwib25jbGljayIsImNsb3NlTW9kYWxCdXR0b25zIiwibW9kYWwiLCJzZXRBdHRyaWJ1dGUiLCJmb2N1cyIsInNjcm9sbGluZ0xpbmtzIiwic2Nyb2xsTGluayIsInNjcm9sbFRvIiwic2Nyb2xsSW50b1ZpZXciLCJCb29sZWFuIiwibGluayIsInNjcm9sbFRvRWxlbWVudCJdLCJtYXBwaW5ncyI6IkFBQUEsK1BBR0EsU0FBVUEsRUFBUUMsR0FDSyxZQUFuQixvQkFBT0MsUUFBUCxZQUFBQyxRQUFPRCxXQUEwQyxvQkFBWEUsT0FBeUJBLE9BQU9GLFFBQVVELElBQThCLG1CQUFYSSxRQUF5QkEsT0FBT0MsSUFBTUQsT0FBT0osR0FBV00sT0FBT0MsV0FBYVAsSUFEbkwsQ0FBQSxFQUFVRCxXQUFWLElBQUFTLEVBRVdDLE9BQVdDLFFBQUEsU0FBQUMsR0FDbEIsSUFBQSxJQUFBQyxFQUFBLEVBQUFBLEVBQUFDLFVBQUFDLE9BQUFGLElBQUEsQ0FHSSxJQUFJRyxFQUFTRixVQUFV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Y2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcblxyXG4vKiEgbWVkaXVtLXpvb20gMS4wLjQgfCBNSVQgTGljZW5zZSB8IGh0dHBzOi8vZ2l0aHViLmNvbS9mcmFuY29pc2NoYWxpZm91ci9tZWRpdW0tem9vbSAqL1xyXG4oZnVuY3Rpb24oZ2xvYmFsLCBmYWN0b3J5KSB7XHJcbiAgICB0eXBlb2YgZXhwb3J0cyA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOiB0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6IHdpbmRvdy5tZWRpdW1ab29tID0gZmFjdG9yeSgpO1xyXG4gIH0pKHRoaXMsIGZ1bmN0aW9uKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICB2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHRhcmdldCkge1xyXG4gICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xyXG4gICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcclxuICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRhcmdldDtcclxuICAgIH07XHJcbiAgICB2YXIgaXNTdXBwb3J0ZWQgPSBmdW5jdGlvbiBpc1N1cHBvcnRlZChub2RlKSB7XHJcbiAgICAgIHJldHVybiBub2RlLnRhZ05hbWUgPT09IFwiSU1HXCI7XHJcbiAgICB9O1xyXG4gICAgdmFyIGlzTm9kZUxpc3QgPSBmdW5jdGlvbiBpc05vZGVMaXN0KHNlbGVjdG9yKSB7XHJcbiAgICAgIHJldHVybiBOb2RlTGlzdC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihzZWxlY3Rvcik7XHJcbiAgICB9O1xyXG4gICAgdmFyIGlzTm9kZSA9IGZ1bmN0aW9uIGlzTm9kZShzZWxlY3Rvcikge1xyXG4gICAgICByZXR1cm4gc2VsZWN0b3IgJiYgc2VsZWN0b3Iubm9kZVR5cGUgPT09IDE7XHJcbiAgICB9O1xyXG4gICAgdmFyIGlzU3ZnID0gZnVuY3Rpb24gaXNTdmcoaW1hZ2UpIHtcclxuICAgICAgdmFyIHNvdXJjZSA9IGltYWdlLmN1cnJlbnRTcmMgfHwgaW1hZ2Uuc3JjO1xyXG4gICAgICByZXR1cm4gc291cmNlLnN1YnN0cigtNCkudG9Mb3dlckNhc2UoKSA9PT0gXCIuc3ZnXCI7XHJcbiAgICB9O1xyXG4gICAgdmFyIGdldEltYWdlc0Zyb21TZWxlY3RvciA9IGZ1bmN0aW9uIGdldEltYWdlc0Zyb21TZWxlY3RvcihzZWxlY3Rvcikge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHNlbGVjdG9yKSkge1xyXG4gICAgICAgICAgcmV0dXJuIHNlbGVjdG9yLmZpbHRlcihpc1N1cHBvcnRlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc05vZGVMaXN0KHNlbGVjdG9yKSkge1xyXG4gICAgICAgICAgcmV0dXJuIFtdLnNsaWNlLmNhbGwoc2VsZWN0b3IpLmZpbHRlcihpc1N1cHBvcnRlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc05vZGUoc2VsZWN0b3IpKSB7XHJcbiAgICAgICAgICByZXR1cm4gWyBzZWxlY3RvciBdLmZpbHRlcihpc1N1cHBvcnRlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgIHJldHVybiBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKS5maWx0ZXIoaXNTdXBwb3J0ZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJUaGUgcHJvdmlkZWQgc2VsZWN0b3IgaXMgaW52YWxpZC5cXG5cIiArIFwiRXhwZWN0cyBhIENTUyBzZWxlY3RvciwgYSBOb2RlIGVsZW1lbnQsIGEgTm9kZUxpc3Qgb3IgYW4gYXJyYXkuXFxuXCIgKyBcIlNlZTogaHR0cHM6Ly9naXRodWIuY29tL2ZyYW5jb2lzY2hhbGlmb3VyL21lZGl1bS16b29tXCIpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgdmFyIGNyZWF0ZU92ZXJsYXkgPSBmdW5jdGlvbiBjcmVhdGVPdmVybGF5KGJhY2tncm91bmQpIHtcclxuICAgICAgdmFyIG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICBvdmVybGF5LmNsYXNzTGlzdC5hZGQoXCJtZWRpdW0tem9vbS1vdmVybGF5XCIpO1xyXG4gICAgICBvdmVybGF5LnN0eWxlLmJhY2tncm91bmQgPSBiYWNrZ3JvdW5kO1xyXG4gICAgICByZXR1cm4gb3ZlcmxheTtcclxuICAgIH07XHJcbiAgICB2YXIgY2xvbmVUYXJnZXQgPSBmdW5jdGlvbiBjbG9uZVRhcmdldCh0ZW1wbGF0ZSkge1xyXG4gICAgICB2YXIgX3RlbXBsYXRlJGdldEJvdW5kaW5nID0gdGVtcGxhdGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIHRvcCA9IF90ZW1wbGF0ZSRnZXRCb3VuZGluZy50b3AsIGxlZnQgPSBfdGVtcGxhdGUkZ2V0Qm91bmRpbmcubGVmdCwgd2lkdGggPSBfdGVtcGxhdGUkZ2V0Qm91bmRpbmcud2lkdGgsIGhlaWdodCA9IF90ZW1wbGF0ZSRnZXRCb3VuZGluZy5oZWlnaHQ7XHJcbiAgICAgIHZhciBjbG9uZSA9IHRlbXBsYXRlLmNsb25lTm9kZSgpO1xyXG4gICAgICB2YXIgc2Nyb2xsVG9wID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgfHwgMDtcclxuICAgICAgdmFyIHNjcm9sbExlZnQgPSB3aW5kb3cucGFnZVhPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0IHx8IDA7XHJcbiAgICAgIGNsb25lLnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpO1xyXG4gICAgICBjbG9uZS5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuICAgICAgY2xvbmUuc3R5bGUudG9wID0gdG9wICsgc2Nyb2xsVG9wICsgXCJweFwiO1xyXG4gICAgICBjbG9uZS5zdHlsZS5sZWZ0ID0gbGVmdCArIHNjcm9sbExlZnQgKyBcInB4XCI7XHJcbiAgICAgIGNsb25lLnN0eWxlLndpZHRoID0gd2lkdGggKyBcInB4XCI7XHJcbiAgICAgIGNsb25lLnN0eWxlLmhlaWdodCA9IGhlaWdodCArIFwicHhcIjtcclxuICAgICAgY2xvbmUuc3R5bGUudHJhbnNmb3JtID0gXCJcIjtcclxuICAgICAgcmV0dXJuIGNsb25lO1xyXG4gICAgfTtcclxuICAgIHZhciBjcmVhdGVDdXN0b21FdmVudCA9IGZ1bmN0aW9uIGNyZWF0ZUN1c3RvbUV2ZW50KHR5cGUsIHBhcmFtcykge1xyXG4gICAgICB2YXIgZXZlbnRQYXJhbXMgPSBfZXh0ZW5kcyh7XHJcbiAgICAgICAgYnViYmxlczogZmFsc2UsXHJcbiAgICAgICAgY2FuY2VsYWJsZTogZmFsc2UsXHJcbiAgICAgICAgZGV0YWlsOiB1bmRlZmluZWRcclxuICAgICAgfSwgcGFyYW1zKTtcclxuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cuQ3VzdG9tRXZlbnQgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ3VzdG9tRXZlbnQodHlwZSwgZXZlbnRQYXJhbXMpO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBjdXN0b21FdmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiQ3VzdG9tRXZlbnRcIik7XHJcbiAgICAgIGN1c3RvbUV2ZW50LmluaXRDdXN0b21FdmVudCh0eXBlLCBldmVudFBhcmFtcy5idWJibGVzLCBldmVudFBhcmFtcy5jYW5jZWxhYmxlLCBldmVudFBhcmFtcy5kZXRhaWwpO1xyXG4gICAgICByZXR1cm4gY3VzdG9tRXZlbnQ7XHJcbiAgICB9O1xyXG4gICAgdmFyIG1lZGl1bVpvb20gPSBmdW5jdGlvbiBtZWRpdW1ab29tKHNlbGVjdG9yKSB7XHJcbiAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcclxuICAgICAgdmFyIFByb21pc2UgPSB3aW5kb3cuUHJvbWlzZSB8fCBmdW5jdGlvbiBQcm9taXNlKGZuKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gbm9vcCgpIHt9XHJcbiAgICAgICAgZm4obm9vcCwgbm9vcCk7XHJcbiAgICAgIH07XHJcbiAgICAgIHZhciBfaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiBfaGFuZGxlQ2xpY2soZXZlbnQpIHtcclxuICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgICAgIGlmICh0YXJnZXQgPT09IG92ZXJsYXkpIHtcclxuICAgICAgICAgIGNsb3NlKCk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpbWFnZXMuaW5kZXhPZih0YXJnZXQpID09PSAtMSkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0b2dnbGUoe1xyXG4gICAgICAgICAgdGFyZ2V0OiB0YXJnZXRcclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuICAgICAgdmFyIF9oYW5kbGVTY3JvbGwgPSBmdW5jdGlvbiBfaGFuZGxlU2Nyb2xsKCkge1xyXG4gICAgICAgIGlmIChpc0FuaW1hdGluZyB8fCAhYWN0aXZlLm9yaWdpbmFsKSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBjdXJyZW50U2Nyb2xsID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgfHwgMDtcclxuICAgICAgICBpZiAoTWF0aC5hYnMoc2Nyb2xsVG9wIC0gY3VycmVudFNjcm9sbCkgPiB6b29tT3B0aW9ucy5zY3JvbGxPZmZzZXQpIHtcclxuICAgICAgICAgIHNldFRpbWVvdXQoY2xvc2UsIDE1MCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgICB2YXIgX2hhbmRsZUtleVVwID0gZnVuY3Rpb24gX2hhbmRsZUtleVVwKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKChldmVudC5rZXlDb2RlIHx8IGV2ZW50LndoaWNoKSA9PT0gMjcpIHtcclxuICAgICAgICAgIGNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgICB2YXIgdXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKCkge1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcclxuICAgICAgICB2YXIgbmV3T3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuYmFja2dyb3VuZCkge1xyXG4gICAgICAgICAgb3ZlcmxheS5zdHlsZS5iYWNrZ3JvdW5kID0gb3B0aW9ucy5iYWNrZ3JvdW5kO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob3B0aW9ucy5jb250YWluZXIgJiYgb3B0aW9ucy5jb250YWluZXIgaW5zdGFuY2VvZiBPYmplY3QpIHtcclxuICAgICAgICAgIG5ld09wdGlvbnMuY29udGFpbmVyID0gX2V4dGVuZHMoe30sIHpvb21PcHRpb25zLmNvbnRhaW5lciwgb3B0aW9ucy5jb250YWluZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob3B0aW9ucy50ZW1wbGF0ZSkge1xyXG4gICAgICAgICAgdmFyIHRlbXBsYXRlID0gaXNOb2RlKG9wdGlvbnMudGVtcGxhdGUpID8gb3B0aW9ucy50ZW1wbGF0ZSA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob3B0aW9ucy50ZW1wbGF0ZSk7XHJcbiAgICAgICAgICBuZXdPcHRpb25zLnRlbXBsYXRlID0gdGVtcGxhdGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHpvb21PcHRpb25zID0gX2V4dGVuZHMoe30sIHpvb21PcHRpb25zLCBuZXdPcHRpb25zKTtcclxuICAgICAgICBpbWFnZXMuZm9yRWFjaChmdW5jdGlvbihpbWFnZSkge1xyXG4gICAgICAgICAgaW1hZ2UuZGlzcGF0Y2hFdmVudChjcmVhdGVDdXN0b21FdmVudChcIm1lZGl1bS16b29tOnVwZGF0ZVwiLCB7XHJcbiAgICAgICAgICAgIGRldGFpbDoge1xyXG4gICAgICAgICAgICAgIHpvb206IHpvb21cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB6b29tO1xyXG4gICAgICB9O1xyXG4gICAgICB2YXIgY2xvbmUgPSBmdW5jdGlvbiBjbG9uZSgpIHtcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XHJcbiAgICAgICAgcmV0dXJuIG1lZGl1bVpvb20oX2V4dGVuZHMoe30sIHpvb21PcHRpb25zLCBvcHRpb25zKSk7XHJcbiAgICAgIH07XHJcbiAgICAgIHZhciBhdHRhY2ggPSBmdW5jdGlvbiBhdHRhY2goKSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHNlbGVjdG9ycyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xyXG4gICAgICAgICAgc2VsZWN0b3JzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbmV3SW1hZ2VzID0gc2VsZWN0b3JzLnJlZHVjZShmdW5jdGlvbihpbWFnZXNBY2N1bXVsYXRvciwgY3VycmVudFNlbGVjdG9yKSB7XHJcbiAgICAgICAgICByZXR1cm4gW10uY29uY2F0KGltYWdlc0FjY3VtdWxhdG9yLCBnZXRJbWFnZXNGcm9tU2VsZWN0b3IoY3VycmVudFNlbGVjdG9yKSk7XHJcbiAgICAgICAgfSwgW10pO1xyXG4gICAgICAgIG5ld0ltYWdlcy5maWx0ZXIoZnVuY3Rpb24obmV3SW1hZ2UpIHtcclxuICAgICAgICAgIHJldHVybiBpbWFnZXMuaW5kZXhPZihuZXdJbWFnZSkgPT09IC0xO1xyXG4gICAgICAgIH0pLmZvckVhY2goZnVuY3Rpb24obmV3SW1hZ2UpIHtcclxuICAgICAgICAgIGltYWdlcy5wdXNoKG5ld0ltYWdlKTtcclxuICAgICAgICAgIG5ld0ltYWdlLmNsYXNzTGlzdC5hZGQoXCJtZWRpdW0tem9vbS1pbWFnZVwiKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBldmVudExpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKF9yZWYpIHtcclxuICAgICAgICAgIHZhciB0eXBlID0gX3JlZi50eXBlLCBsaXN0ZW5lciA9IF9yZWYubGlzdGVuZXIsIG9wdGlvbnMgPSBfcmVmLm9wdGlvbnM7XHJcbiAgICAgICAgICBuZXdJbWFnZXMuZm9yRWFjaChmdW5jdGlvbihpbWFnZSkge1xyXG4gICAgICAgICAgICBpbWFnZS5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB6b29tO1xyXG4gICAgICB9O1xyXG4gICAgICB2YXIgZGV0YWNoID0gZnVuY3Rpb24gZGV0YWNoKCkge1xyXG4gICAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgc2VsZWN0b3JzID0gQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcclxuICAgICAgICAgIHNlbGVjdG9yc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYWN0aXZlLnpvb21lZCkge1xyXG4gICAgICAgICAgY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGltYWdlc1RvRGV0YWNoID0gc2VsZWN0b3JzLmxlbmd0aCA+IDAgPyBzZWxlY3RvcnMucmVkdWNlKGZ1bmN0aW9uKGltYWdlc0FjY3VtdWxhdG9yLCBjdXJyZW50U2VsZWN0b3IpIHtcclxuICAgICAgICAgIHJldHVybiBbXS5jb25jYXQoaW1hZ2VzQWNjdW11bGF0b3IsIGdldEltYWdlc0Zyb21TZWxlY3RvcihjdXJyZW50U2VsZWN0b3IpKTtcclxuICAgICAgICB9LCBbXSkgOiBpbWFnZXM7XHJcbiAgICAgICAgaW1hZ2VzVG9EZXRhY2guZm9yRWFjaChmdW5jdGlvbihpbWFnZSkge1xyXG4gICAgICAgICAgaW1hZ2UuY2xhc3NMaXN0LnJlbW92ZShcIm1lZGl1bS16b29tLWltYWdlXCIpO1xyXG4gICAgICAgICAgaW1hZ2UuZGlzcGF0Y2hFdmVudChjcmVhdGVDdXN0b21FdmVudChcIm1lZGl1bS16b29tOmRldGFjaFwiLCB7XHJcbiAgICAgICAgICAgIGRldGFpbDoge1xyXG4gICAgICAgICAgICAgIHpvb206IHpvb21cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGltYWdlcyA9IGltYWdlcy5maWx0ZXIoZnVuY3Rpb24oaW1hZ2UpIHtcclxuICAgICAgICAgIHJldHVybiBpbWFnZXNUb0RldGFjaC5pbmRleE9mKGltYWdlKSA9PT0gLTE7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHpvb207XHJcbiAgICAgIH07XHJcbiAgICAgIHZhciBvbiA9IGZ1bmN0aW9uIG9uKHR5cGUsIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xyXG4gICAgICAgIGltYWdlcy5mb3JFYWNoKGZ1bmN0aW9uKGltYWdlKSB7XHJcbiAgICAgICAgICBpbWFnZS5hZGRFdmVudExpc3RlbmVyKFwibWVkaXVtLXpvb206XCIgKyB0eXBlLCBsaXN0ZW5lciwgb3B0aW9ucyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZXZlbnRMaXN0ZW5lcnMucHVzaCh7XHJcbiAgICAgICAgICB0eXBlOiBcIm1lZGl1bS16b29tOlwiICsgdHlwZSxcclxuICAgICAgICAgIGxpc3RlbmVyOiBsaXN0ZW5lcixcclxuICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnNcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gem9vbTtcclxuICAgICAgfTtcclxuICAgICAgdmFyIG9mZiA9IGZ1bmN0aW9uIG9mZih0eXBlLCBsaXN0ZW5lcikge1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcclxuICAgICAgICBpbWFnZXMuZm9yRWFjaChmdW5jdGlvbihpbWFnZSkge1xyXG4gICAgICAgICAgaW1hZ2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lZGl1bS16b29tOlwiICsgdHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGV2ZW50TGlzdGVuZXJzID0gZXZlbnRMaXN0ZW5lcnMuZmlsdGVyKGZ1bmN0aW9uKGV2ZW50TGlzdGVuZXIpIHtcclxuICAgICAgICAgIHJldHVybiAhKGV2ZW50TGlzdGVuZXIudHlwZSA9PT0gXCJtZWRpdW0tem9vbTpcIiArIHR5cGUgJiYgZXZlbnRMaXN0ZW5lci5saXN0ZW5lci50b1N0cmluZygpID09PSBsaXN0ZW5lci50b1N0cmluZygpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gem9vbTtcclxuICAgICAgfTtcclxuICAgICAgdmFyIG9wZW4gPSBmdW5jdGlvbiBvcGVuKCkge1xyXG4gICAgICAgIHZhciBfcmVmMiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sIHRhcmdldCA9IF9yZWYyLnRhcmdldDtcclxuICAgICAgICB2YXIgX2FuaW1hdGUgPSBmdW5jdGlvbiBfYW5pbWF0ZSgpIHtcclxuICAgICAgICAgIHZhciBjb250YWluZXIgPSB7XHJcbiAgICAgICAgICAgIHdpZHRoOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgsXHJcbiAgICAgICAgICAgIGhlaWdodDogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCxcclxuICAgICAgICAgICAgbGVmdDogMCxcclxuICAgICAgICAgICAgdG9wOiAwLFxyXG4gICAgICAgICAgICByaWdodDogMCxcclxuICAgICAgICAgICAgYm90dG9tOiAwXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgdmFyIHZpZXdwb3J0V2lkdGggPSB2b2lkIDA7XHJcbiAgICAgICAgICB2YXIgdmlld3BvcnRIZWlnaHQgPSB2b2lkIDA7XHJcbiAgICAgICAgICBpZiAoem9vbU9wdGlvbnMuY29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIGlmICh6b29tT3B0aW9ucy5jb250YWluZXIgaW5zdGFuY2VvZiBPYmplY3QpIHtcclxuICAgICAgICAgICAgICBjb250YWluZXIgPSBfZXh0ZW5kcyh7fSwgY29udGFpbmVyLCB6b29tT3B0aW9ucy5jb250YWluZXIpO1xyXG4gICAgICAgICAgICAgIHZpZXdwb3J0V2lkdGggPSBjb250YWluZXIud2lkdGggLSBjb250YWluZXIubGVmdCAtIGNvbnRhaW5lci5yaWdodCAtIHpvb21PcHRpb25zLm1hcmdpbiAqIDI7XHJcbiAgICAgICAgICAgICAgdmlld3BvcnRIZWlnaHQgPSBjb250YWluZXIuaGVpZ2h0IC0gY29udGFpbmVyLnRvcCAtIGNvbnRhaW5lci5ib3R0b20gLSB6b29tT3B0aW9ucy5tYXJnaW4gKiAyO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHZhciB6b29tQ29udGFpbmVyID0gaXNOb2RlKHpvb21PcHRpb25zLmNvbnRhaW5lcikgPyB6b29tT3B0aW9ucy5jb250YWluZXIgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHpvb21PcHRpb25zLmNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgICAgdmFyIF96b29tQ29udGFpbmVyJGdldEJvdSA9IHpvb21Db250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIF93aWR0aCA9IF96b29tQ29udGFpbmVyJGdldEJvdS53aWR0aCwgX2hlaWdodCA9IF96b29tQ29udGFpbmVyJGdldEJvdS5oZWlnaHQsIF9sZWZ0ID0gX3pvb21Db250YWluZXIkZ2V0Qm91LmxlZnQsIF90b3AgPSBfem9vbUNvbnRhaW5lciRnZXRCb3UudG9wO1xyXG4gICAgICAgICAgICAgIGNvbnRhaW5lciA9IF9leHRlbmRzKHt9LCBjb250YWluZXIsIHtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiBfd2lkdGgsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IF9oZWlnaHQsXHJcbiAgICAgICAgICAgICAgICBsZWZ0OiBfbGVmdCxcclxuICAgICAgICAgICAgICAgIHRvcDogX3RvcFxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB2aWV3cG9ydFdpZHRoID0gdmlld3BvcnRXaWR0aCB8fCBjb250YWluZXIud2lkdGggLSB6b29tT3B0aW9ucy5tYXJnaW4gKiAyO1xyXG4gICAgICAgICAgdmlld3BvcnRIZWlnaHQgPSB2aWV3cG9ydEhlaWdodCB8fCBjb250YWluZXIuaGVpZ2h0IC0gem9vbU9wdGlvbnMubWFyZ2luICogMjtcclxuICAgICAgICAgIHZhciB6b29tVGFyZ2V0ID0gYWN0aXZlLnpvb21lZEhkIHx8IGFjdGl2ZS5vcmlnaW5hbDtcclxuICAgICAgICAgIHZhciBuYXR1cmFsV2lkdGggPSBpc1N2Zyh6b29tVGFyZ2V0KSA/IHZpZXdwb3J0V2lkdGggOiB6b29tVGFyZ2V0Lm5hdHVyYWxXaWR0aCB8fCB2aWV3cG9ydFdpZHRoO1xyXG4gICAgICAgICAgdmFyIG5hdHVyYWxIZWlnaHQgPSBpc1N2Zyh6b29tVGFyZ2V0KSA/IHZpZXdwb3J0SGVpZ2h0IDogem9vbVRhcmdldC5uYXR1cmFsSGVpZ2h0IHx8IHZpZXdwb3J0SGVpZ2h0O1xyXG4gICAgICAgICAgdmFyIF96b29tVGFyZ2V0JGdldEJvdW5kaSA9IHpvb21UYXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIHRvcCA9IF96b29tVGFyZ2V0JGdldEJvdW5kaS50b3AsIGxlZnQgPSBfem9vbVRhcmdldCRnZXRCb3VuZGkubGVmdCwgd2lkdGggPSBfem9vbVRhcmdldCRnZXRCb3VuZGkud2lkdGgsIGhlaWdodCA9IF96b29tVGFyZ2V0JGdldEJvdW5kaS5oZWlnaHQ7XHJcbiAgICAgICAgICB2YXIgc2NhbGVYID0gTWF0aC5taW4obmF0dXJhbFdpZHRoLCB2aWV3cG9ydFdpZHRoKSAvIHdpZHRoO1xyXG4gICAgICAgICAgdmFyIHNjYWxlWSA9IE1hdGgubWluKG5hdHVyYWxIZWlnaHQsIHZpZXdwb3J0SGVpZ2h0KSAvIGhlaWdodDtcclxuICAgICAgICAgIHZhciBzY2FsZSA9IE1hdGgubWluKHNjYWxlWCwgc2NhbGVZKTtcclxuICAgICAgICAgIHZhciB0cmFuc2xhdGVYID0gKC1sZWZ0ICsgKHZpZXdwb3J0V2lkdGggLSB3aWR0aCkgLyAyICsgem9vbU9wdGlvbnMubWFyZ2luICsgY29udGFpbmVyLmxlZnQpIC8gc2NhbGU7XHJcbiAgICAgICAgICB2YXIgdHJhbnNsYXRlWSA9ICgtdG9wICsgKHZpZXdwb3J0SGVpZ2h0IC0gaGVpZ2h0KSAvIDIgKyB6b29tT3B0aW9ucy5tYXJnaW4gKyBjb250YWluZXIudG9wKSAvIHNjYWxlO1xyXG4gICAgICAgICAgdmFyIHRyYW5zZm9ybSA9IFwic2NhbGUoXCIgKyBzY2FsZSArIFwiKSB0cmFuc2xhdGUzZChcIiArIHRyYW5zbGF0ZVggKyBcInB4LCBcIiArIHRyYW5zbGF0ZVkgKyBcInB4LCAwKVwiO1xyXG4gICAgICAgICAgYWN0aXZlLnpvb21lZC5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XHJcbiAgICAgICAgICBpZiAoYWN0aXZlLnpvb21lZEhkKSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZC5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xyXG4gICAgICAgICAgaWYgKHRhcmdldCAmJiBpbWFnZXMuaW5kZXhPZih0YXJnZXQpID09PSAtMSkge1xyXG4gICAgICAgICAgICByZXNvbHZlKHpvb20pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB2YXIgX2hhbmRsZU9wZW5FbmQgPSBmdW5jdGlvbiBfaGFuZGxlT3BlbkVuZCgpIHtcclxuICAgICAgICAgICAgaXNBbmltYXRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgYWN0aXZlLnpvb21lZC5yZW1vdmVFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBfaGFuZGxlT3BlbkVuZCk7XHJcbiAgICAgICAgICAgIGFjdGl2ZS5vcmlnaW5hbC5kaXNwYXRjaEV2ZW50KGNyZWF0ZUN1c3RvbUV2ZW50KFwibWVkaXVtLXpvb206b3BlbmVkXCIsIHtcclxuICAgICAgICAgICAgICBkZXRhaWw6IHtcclxuICAgICAgICAgICAgICAgIHpvb206IHpvb21cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgcmVzb2x2ZSh6b29tKTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBpZiAoYWN0aXZlLnpvb21lZCkge1xyXG4gICAgICAgICAgICByZXNvbHZlKHpvb20pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAodGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZS5vcmlnaW5hbCA9IHRhcmdldDtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoaW1hZ2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdmFyIF9pbWFnZXMgPSBpbWFnZXM7XHJcbiAgICAgICAgICAgIGFjdGl2ZS5vcmlnaW5hbCA9IF9pbWFnZXNbMF07XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXNvbHZlKHpvb20pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBhY3RpdmUub3JpZ2luYWwuZGlzcGF0Y2hFdmVudChjcmVhdGVDdXN0b21FdmVudChcIm1lZGl1bS16b29tOm9wZW5cIiwge1xyXG4gICAgICAgICAgICBkZXRhaWw6IHtcclxuICAgICAgICAgICAgICB6b29tOiB6b29tXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pKTtcclxuICAgICAgICAgIHNjcm9sbFRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wIHx8IDA7XHJcbiAgICAgICAgICBpc0FuaW1hdGluZyA9IHRydWU7XHJcbiAgICAgICAgICBhY3RpdmUuem9vbWVkID0gY2xvbmVUYXJnZXQoYWN0aXZlLm9yaWdpbmFsKTtcclxuICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQob3ZlcmxheSk7XHJcbiAgICAgICAgICBpZiAoem9vbU9wdGlvbnMudGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgdmFyIHRlbXBsYXRlID0gaXNOb2RlKHpvb21PcHRpb25zLnRlbXBsYXRlKSA/IHpvb21PcHRpb25zLnRlbXBsYXRlIDogZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih6b29tT3B0aW9ucy50ZW1wbGF0ZSk7XHJcbiAgICAgICAgICAgIGFjdGl2ZS50ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIGFjdGl2ZS50ZW1wbGF0ZS5hcHBlbmRDaGlsZCh0ZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYWN0aXZlLnRlbXBsYXRlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYWN0aXZlLnpvb21lZCk7XHJcbiAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJtZWRpdW0tem9vbS0tb3BlbmVkXCIpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBhY3RpdmUub3JpZ2luYWwuY2xhc3NMaXN0LmFkZChcIm1lZGl1bS16b29tLWltYWdlLS1oaWRkZW5cIik7XHJcbiAgICAgICAgICBhY3RpdmUuem9vbWVkLmNsYXNzTGlzdC5hZGQoXCJtZWRpdW0tem9vbS1pbWFnZS0tb3BlbmVkXCIpO1xyXG4gICAgICAgICAgYWN0aXZlLnpvb21lZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2UpO1xyXG4gICAgICAgICAgYWN0aXZlLnpvb21lZC5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBfaGFuZGxlT3BlbkVuZCk7XHJcbiAgICAgICAgICBpZiAoYWN0aXZlLm9yaWdpbmFsLmdldEF0dHJpYnV0ZShcImRhdGEtem9vbS1zcmNcIikpIHtcclxuICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkID0gYWN0aXZlLnpvb21lZC5jbG9uZU5vZGUoKTtcclxuICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkLnJlbW92ZUF0dHJpYnV0ZShcInNyY3NldFwiKTtcclxuICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkLnJlbW92ZUF0dHJpYnV0ZShcInNpemVzXCIpO1xyXG4gICAgICAgICAgICBhY3RpdmUuem9vbWVkSGQuc3JjID0gYWN0aXZlLnpvb21lZC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXpvb20tc3JjXCIpO1xyXG4gICAgICAgICAgICBhY3RpdmUuem9vbWVkSGQub25lcnJvciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoZ2V0Wm9vbVRhcmdldFNpemUpO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlVuYWJsZSB0byByZWFjaCB0aGUgem9vbSBpbWFnZSB0YXJnZXQgXCIgKyBhY3RpdmUuem9vbWVkSGQuc3JjKTtcclxuICAgICAgICAgICAgICBhY3RpdmUuem9vbWVkSGQgPSBudWxsO1xyXG4gICAgICAgICAgICAgIF9hbmltYXRlKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBnZXRab29tVGFyZ2V0U2l6ZSA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGlmIChhY3RpdmUuem9vbWVkSGQuY29tcGxldGUpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoZ2V0Wm9vbVRhcmdldFNpemUpO1xyXG4gICAgICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkLmNsYXNzTGlzdC5hZGQoXCJtZWRpdW0tem9vbS1pbWFnZS0tb3BlbmVkXCIpO1xyXG4gICAgICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZSk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGFjdGl2ZS56b29tZWRIZCk7XHJcbiAgICAgICAgICAgICAgICBfYW5pbWF0ZSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgMTApO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChhY3RpdmUub3JpZ2luYWwuaGFzQXR0cmlidXRlKFwic3Jjc2V0XCIpKSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZCA9IGFjdGl2ZS56b29tZWQuY2xvbmVOb2RlKCk7XHJcbiAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZC5yZW1vdmVBdHRyaWJ1dGUoXCJzaXplc1wiKTtcclxuICAgICAgICAgICAgdmFyIGxvYWRFdmVudExpc3RlbmVyID0gYWN0aXZlLnpvb21lZEhkLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZC5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLCBsb2FkRXZlbnRMaXN0ZW5lcik7XHJcbiAgICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkLmNsYXNzTGlzdC5hZGQoXCJtZWRpdW0tem9vbS1pbWFnZS0tb3BlbmVkXCIpO1xyXG4gICAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2UpO1xyXG4gICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYWN0aXZlLnpvb21lZEhkKTtcclxuICAgICAgICAgICAgICBfYW5pbWF0ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIF9hbmltYXRlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcbiAgICAgIHZhciBjbG9zZSA9IGZ1bmN0aW9uIGNsb3NlKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7XHJcbiAgICAgICAgICBpZiAoaXNBbmltYXRpbmcgfHwgIWFjdGl2ZS5vcmlnaW5hbCkge1xyXG4gICAgICAgICAgICByZXNvbHZlKHpvb20pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB2YXIgX2hhbmRsZUNsb3NlRW5kID0gZnVuY3Rpb24gX2hhbmRsZUNsb3NlRW5kKCkge1xyXG4gICAgICAgICAgICBhY3RpdmUub3JpZ2luYWwuY2xhc3NMaXN0LnJlbW92ZShcIm1lZGl1bS16b29tLWltYWdlLS1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYWN0aXZlLnpvb21lZCk7XHJcbiAgICAgICAgICAgIGlmIChhY3RpdmUuem9vbWVkSGQpIHtcclxuICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGFjdGl2ZS56b29tZWRIZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChvdmVybGF5KTtcclxuICAgICAgICAgICAgYWN0aXZlLnpvb21lZC5jbGFzc0xpc3QucmVtb3ZlKFwibWVkaXVtLXpvb20taW1hZ2UtLW9wZW5lZFwiKTtcclxuICAgICAgICAgICAgaWYgKGFjdGl2ZS50ZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYWN0aXZlLnRlbXBsYXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpc0FuaW1hdGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBhY3RpdmUuem9vbWVkLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIF9oYW5kbGVDbG9zZUVuZCk7XHJcbiAgICAgICAgICAgIGFjdGl2ZS5vcmlnaW5hbC5kaXNwYXRjaEV2ZW50KGNyZWF0ZUN1c3RvbUV2ZW50KFwibWVkaXVtLXpvb206Y2xvc2VkXCIsIHtcclxuICAgICAgICAgICAgICBkZXRhaWw6IHtcclxuICAgICAgICAgICAgICAgIHpvb206IHpvb21cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgYWN0aXZlLm9yaWdpbmFsID0gbnVsbDtcclxuICAgICAgICAgICAgYWN0aXZlLnpvb21lZCA9IG51bGw7XHJcbiAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZCA9IG51bGw7XHJcbiAgICAgICAgICAgIGFjdGl2ZS50ZW1wbGF0ZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHJlc29sdmUoem9vbSk7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgaXNBbmltYXRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKFwibWVkaXVtLXpvb20tLW9wZW5lZFwiKTtcclxuICAgICAgICAgIGFjdGl2ZS56b29tZWQuc3R5bGUudHJhbnNmb3JtID0gXCJcIjtcclxuICAgICAgICAgIGlmIChhY3RpdmUuem9vbWVkSGQpIHtcclxuICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkLnN0eWxlLnRyYW5zZm9ybSA9IFwiXCI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoYWN0aXZlLnRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZS50ZW1wbGF0ZS5zdHlsZS50cmFuc2l0aW9uID0gXCJvcGFjaXR5IDE1MG1zXCI7XHJcbiAgICAgICAgICAgIGFjdGl2ZS50ZW1wbGF0ZS5zdHlsZS5vcGFjaXR5ID0gMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGFjdGl2ZS5vcmlnaW5hbC5kaXNwYXRjaEV2ZW50KGNyZWF0ZUN1c3RvbUV2ZW50KFwibWVkaXVtLXpvb206Y2xvc2VcIiwge1xyXG4gICAgICAgICAgICBkZXRhaWw6IHtcclxuICAgICAgICAgICAgICB6b29tOiB6b29tXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pKTtcclxuICAgICAgICAgIGFjdGl2ZS56b29tZWQuYWRkRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgX2hhbmRsZUNsb3NlRW5kKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuICAgICAgdmFyIHRvZ2dsZSA9IGZ1bmN0aW9uIHRvZ2dsZSgpIHtcclxuICAgICAgICB2YXIgX3JlZjMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LCB0YXJnZXQgPSBfcmVmMy50YXJnZXQ7XHJcbiAgICAgICAgaWYgKGFjdGl2ZS5vcmlnaW5hbCkge1xyXG4gICAgICAgICAgcmV0dXJuIGNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvcGVuKHtcclxuICAgICAgICAgIHRhcmdldDogdGFyZ2V0XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcbiAgICAgIHZhciBnZXRPcHRpb25zID0gZnVuY3Rpb24gZ2V0T3B0aW9ucygpIHtcclxuICAgICAgICByZXR1cm4gem9vbU9wdGlvbnM7XHJcbiAgICAgIH07XHJcbiAgICAgIHZhciBnZXRJbWFnZXMgPSBmdW5jdGlvbiBnZXRJbWFnZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIGltYWdlcztcclxuICAgICAgfTtcclxuICAgICAgdmFyIGdldFpvb21lZEltYWdlID0gZnVuY3Rpb24gZ2V0Wm9vbWVkSW1hZ2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIGFjdGl2ZS5vcmlnaW5hbDtcclxuICAgICAgfTtcclxuICAgICAgdmFyIGltYWdlcyA9IFtdO1xyXG4gICAgICB2YXIgZXZlbnRMaXN0ZW5lcnMgPSBbXTtcclxuICAgICAgdmFyIGlzQW5pbWF0aW5nID0gZmFsc2U7XHJcbiAgICAgIHZhciBzY3JvbGxUb3AgPSAwO1xyXG4gICAgICB2YXIgem9vbU9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICB2YXIgYWN0aXZlID0ge1xyXG4gICAgICAgIG9yaWdpbmFsOiBudWxsLFxyXG4gICAgICAgIHpvb21lZDogbnVsbCxcclxuICAgICAgICB6b29tZWRIZDogbnVsbCxcclxuICAgICAgICB0ZW1wbGF0ZTogbnVsbFxyXG4gICAgICB9O1xyXG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHNlbGVjdG9yKSA9PT0gXCJbb2JqZWN0IE9iamVjdF1cIikge1xyXG4gICAgICAgIHpvb21PcHRpb25zID0gc2VsZWN0b3I7XHJcbiAgICAgIH0gZWxzZSBpZiAoc2VsZWN0b3IgfHwgdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgYXR0YWNoKHNlbGVjdG9yKTtcclxuICAgICAgfVxyXG4gICAgICB6b29tT3B0aW9ucyA9IF9leHRlbmRzKHtcclxuICAgICAgICBtYXJnaW46IDAsXHJcbiAgICAgICAgYmFja2dyb3VuZDogXCIjZmZmXCIsXHJcbiAgICAgICAgc2Nyb2xsT2Zmc2V0OiA0MCxcclxuICAgICAgICBjb250YWluZXI6IG51bGwsXHJcbiAgICAgICAgdGVtcGxhdGU6IG51bGxcclxuICAgICAgfSwgem9vbU9wdGlvbnMpO1xyXG4gICAgICB2YXIgb3ZlcmxheSA9IGNyZWF0ZU92ZXJsYXkoem9vbU9wdGlvbnMuYmFja2dyb3VuZCk7XHJcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBfaGFuZGxlQ2xpY2spO1xyXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgX2hhbmRsZUtleVVwKTtcclxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBfaGFuZGxlU2Nyb2xsKTtcclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgY2xvc2UpO1xyXG4gICAgICB2YXIgem9vbSA9IHtcclxuICAgICAgICBvcGVuOiBvcGVuLFxyXG4gICAgICAgIGNsb3NlOiBjbG9zZSxcclxuICAgICAgICB0b2dnbGU6IHRvZ2dsZSxcclxuICAgICAgICB1cGRhdGU6IHVwZGF0ZSxcclxuICAgICAgICBjbG9uZTogY2xvbmUsXHJcbiAgICAgICAgYXR0YWNoOiBhdHRhY2gsXHJcbiAgICAgICAgZGV0YWNoOiBkZXRhY2gsXHJcbiAgICAgICAgb246IG9uLFxyXG4gICAgICAgIG9mZjogb2ZmLFxyXG4gICAgICAgIGdldE9wdGlvbnM6IGdldE9wdGlvbnMsXHJcbiAgICAgICAgZ2V0SW1hZ2VzOiBnZXRJbWFnZXMsXHJcbiAgICAgICAgZ2V0Wm9vbWVkSW1hZ2U6IGdldFpvb21lZEltYWdlXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiB6b29tO1xyXG4gICAgfTtcclxuICAgIGZ1bmN0aW9uIHN0eWxlSW5qZWN0KGNzcywgcmVmKSB7XHJcbiAgICAgIGlmIChyZWYgPT09IHZvaWQgMCkgcmVmID0ge307XHJcbiAgICAgIHZhciBpbnNlcnRBdCA9IHJlZi5pbnNlcnRBdDtcclxuICAgICAgaWYgKCFjc3MgfHwgdHlwZW9mIGRvY3VtZW50ID09PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBoZWFkID0gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07XHJcbiAgICAgIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcclxuICAgICAgc3R5bGUudHlwZSA9IFwidGV4dC9jc3NcIjtcclxuICAgICAgaWYgKGluc2VydEF0ID09PSBcInRvcFwiKSB7XHJcbiAgICAgICAgaWYgKGhlYWQuZmlyc3RDaGlsZCkge1xyXG4gICAgICAgICAgaGVhZC5pbnNlcnRCZWZvcmUoc3R5bGUsIGhlYWQuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBoZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xyXG4gICAgICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdmFyIGNzcyA9IFwiLm1lZGl1bS16b29tLW92ZXJsYXl7cG9zaXRpb246Zml4ZWQ7dG9wOjA7cmlnaHQ6MDtib3R0b206MDtsZWZ0OjA7b3BhY2l0eTowO3RyYW5zaXRpb246b3BhY2l0eSAuM3M7d2lsbC1jaGFuZ2U6b3BhY2l0eX0ubWVkaXVtLXpvb20tLW9wZW5lZCAubWVkaXVtLXpvb20tb3ZlcmxheXtjdXJzb3I6cG9pbnRlcjtjdXJzb3I6em9vbS1vdXQ7b3BhY2l0eToxfS5tZWRpdW0tem9vbS1pbWFnZXtjdXJzb3I6cG9pbnRlcjtjdXJzb3I6em9vbS1pbjt0cmFuc2l0aW9uOnRyYW5zZm9ybSAuM3MgY3ViaWMtYmV6aWVyKC4yLDAsLjIsMSl9Lm1lZGl1bS16b29tLWltYWdlLS1oaWRkZW57dmlzaWJpbGl0eTpoaWRkZW59Lm1lZGl1bS16b29tLWltYWdlLS1vcGVuZWR7cG9zaXRpb246cmVsYXRpdmU7Y3Vyc29yOnBvaW50ZXI7Y3Vyc29yOnpvb20tb3V0O3dpbGwtY2hhbmdlOnRyYW5zZm9ybX1cIjtcclxuICAgIHN0eWxlSW5qZWN0KGNzcyk7XHJcbiAgICByZXR1cm4gbWVkaXVtWm9vbTtcclxuICB9KTtcclxuKCgpID0+IHtcclxuICAgIGxldFxyXG4gICAgICAgIHN3aXBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vdGhlci1zZXJ2aWNlc19fc3dpcGVyJyksXHJcbiAgICAgICAgc3dpcGVyTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vdGhlci1zZXJ2aWNlc19fbGlzdCcpLFxyXG4gICAgICAgIHN3aXBlcldpZHRoID0gcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZShzd2lwZXIpLndpZHRoKSxcclxuICAgICAgICBzd2lwZXJMaXN0V2lkdGggPSBwYXJzZUludChnZXRDb21wdXRlZFN0eWxlKHN3aXBlckxpc3QpLndpZHRoKTtcclxuXHJcblxyXG4gICAgd2luZG93Lm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICBsZXQgaGVpZ2h0T2ZTd2lwZXIgPSBnZXRDb21wdXRlZFN0eWxlKHN3aXBlcikuaGVpZ2h0O1xyXG4gICAgICAgIHN3aXBlci5zdHlsZS5oZWlnaHQgPSBgJHtwYXJzZUludChoZWlnaHRPZlN3aXBlcikgKyA0MH1weGA7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHN3aXBlckxpc3Quc3R5bGUubWFyZ2luTGVmdCA9ICcwcHgnO1xyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBzd2lwZShldmVudCkge1xyXG5cclxuICAgICAgICBzd2lwZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHN3aXRjaE9mZlN3aXBlcik7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHN3aXRjaE9mZlN3aXBlcigpIHtcclxuICAgICAgICAgICAgc3dpcGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHN3aXBlTW91c2VNb3ZlT24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3dpcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBzd2lwZU1vdXNlTW92ZU9mZik7XHJcblxyXG4gICAgICAgIGxldFxyXG4gICAgICAgICAgICBmaXJzdEN1cnNvclBvc2l0aW9uID0gZXZlbnQucGFnZVgsXHJcbiAgICAgICAgICAgIGluaXRpYWxDdXJzb3JQb3NpdGlvbiA9IGV2ZW50LnBhZ2VYLFxyXG4gICAgICAgICAgICBzdW1tU3dpcGVEaXN0YW5jZSA9IDAsXHJcbiAgICAgICAgICAgIHdheVRvV2hpY2hTd2lwZUlzTWFkZSxcclxuICAgICAgICAgICAgc3dpcGVMaXN0TWFyZ2luTGVmdCxcclxuICAgICAgICAgICAgaXNGYXN0U3dpcGUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgc3dpcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHN3aXBlTW91c2VNb3ZlT24pO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzd2lwZU1vdXNlTW92ZU9uKGV2ZW50KSB7XHJcblxyXG4gICAgICAgICAgICBsZXRcclxuICAgICAgICAgICAgICAgIG5ld0N1cnNvclBvc2l0aW9uID0gZXZlbnQucGFnZVgsXHJcbiAgICAgICAgICAgICAgICBzd2lwZURpc3RhbmNlID0gTWF0aC5hYnMoaW5pdGlhbEN1cnNvclBvc2l0aW9uIC0gbmV3Q3Vyc29yUG9zaXRpb24pO1xyXG5cclxuICAgICAgICAgICAgc3dpcGVMaXN0TWFyZ2luTGVmdCA9IHBhcnNlSW50KHN3aXBlckxpc3Quc3R5bGUubWFyZ2luTGVmdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAobmV3Q3Vyc29yUG9zaXRpb24gPCBpbml0aWFsQ3Vyc29yUG9zaXRpb24pIHdheVRvV2hpY2hTd2lwZUlzTWFkZSA9ICdsZWZ0JztcclxuICAgICAgICAgICAgZWxzZSBpZiAobmV3Q3Vyc29yUG9zaXRpb24gPiBpbml0aWFsQ3Vyc29yUG9zaXRpb24pIHdheVRvV2hpY2hTd2lwZUlzTWFkZSA9ICdyaWdodCc7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG5ld0N1cnNvclBvc2l0aW9uID0gaW5pdGlhbEN1cnNvclBvc2l0aW9uKSB3YXlUb1doaWNoU3dpcGVJc01hZGUgPSB3YXlUb1doaWNoU3dpcGVJc01hZGU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBzd2l0Y2god2F5VG9XaGljaFN3aXBlSXNNYWRlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdsZWZ0JzpcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKC1zd2lwZUxpc3RNYXJnaW5MZWZ0ID49IChzd2lwZXJMaXN0V2lkdGggLSBzd2lwZXJXaWR0aCkpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICBzd2lwZXJMaXN0LnN0eWxlLm1hcmdpbkxlZnQgPSBgJHtzd2lwZUxpc3RNYXJnaW5MZWZ0IC0gc3dpcGVEaXN0YW5jZX1weGA7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzd2lwZUxpc3RNYXJnaW5MZWZ0ID49IDAgKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpcGVyTGlzdC5zdHlsZS5tYXJnaW5MZWZ0ID0gYCR7c3dpcGVMaXN0TWFyZ2luTGVmdCArIHN3aXBlRGlzdGFuY2V9cHhgO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzdW1tU3dpcGVEaXN0YW5jZSArPSBzd2lwZURpc3RhbmNlO1xyXG4gICAgICAgICAgICBpbml0aWFsQ3Vyc29yUG9zaXRpb24gPSBuZXdDdXJzb3JQb3NpdGlvbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHN3aXBlTW91c2VNb3ZlT2ZmKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHN3aXBlci5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBzd2lwZU1vdXNlTW92ZU9uKTtcclxuXHJcbiAgICAgICAgICAgIGlzRmFzdFN3aXBlID0gKHN1bW1Td2lwZURpc3RhbmNlID49IDEwMCkgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICghaXNGYXN0U3dpcGUpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHN1bW1Td2lwZURpc3RhbmNlID0gKHN1bW1Td2lwZURpc3RhbmNlID4gKHN3aXBlckxpc3RXaWR0aCAtIHN3aXBlcldpZHRoKSkgPyAoc3dpcGVyTGlzdFdpZHRoIC0gc3dpcGVyV2lkdGgpIDogc3VtbVN3aXBlRGlzdGFuY2U7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBsZXQgYWRkaXRpb25hbFN3aXBlRGlzdGFuY2UgPSAoc3VtbVN3aXBlRGlzdGFuY2UgLyAxLjUpOyAvLyA8LS0tLSBjaGFuZ2Ugc3dpcGUgc3BlZWQsIGZvciBleGFtcGxlOiAoc3VtbVN3aXBlRGlzdGFuY2UgLyAyLjUpXHJcblxyXG5cclxuICAgICAgICAgICAgbGV0IGxhc3RDdXJzb3JQb3NpdGlvbiA9IGV2ZW50LnBhZ2VYO1xyXG4gICAgICAgICAgICB3YXlUb1doaWNoU3dpcGVJc01hZGUgPSAobGFzdEN1cnNvclBvc2l0aW9uIDwgZmlyc3RDdXJzb3JQb3NpdGlvbikgPyAnbGVmdCcgOiAncmlnaHQnO1xyXG5cclxuICAgICAgICAgICAgc3dpcGVMaXN0TWFyZ2luTGVmdCA9IHBhcnNlSW50KHN3aXBlckxpc3Quc3R5bGUubWFyZ2luTGVmdCk7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2god2F5VG9XaGljaFN3aXBlSXNNYWRlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdsZWZ0JzpcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKC1zd2lwZUxpc3RNYXJnaW5MZWZ0ID49IChzd2lwZXJMaXN0V2lkdGggLSBzd2lwZXJXaWR0aCkpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBhZGRpdGlvbmFsU3dpcGVEaXN0YW5jZSA9IChhZGRpdGlvbmFsU3dpcGVEaXN0YW5jZSA+ICgoc3dpcGVyTGlzdFdpZHRoIC0gc3dpcGVyV2lkdGgpICsgc3dpcGVMaXN0TWFyZ2luTGVmdCkpID8gKChzd2lwZXJMaXN0V2lkdGggLSBzd2lwZXJXaWR0aCkgKyBzd2lwZUxpc3RNYXJnaW5MZWZ0KSA6IGFkZGl0aW9uYWxTd2lwZURpc3RhbmNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzd2lwZXJMaXN0LnN0eWxlLnRyYW5zaXRpb24gPSAnYWxsIDAuMzVzJztcclxuICAgICAgICAgICAgICAgICAgICBzd2lwZXJMaXN0LnN0eWxlLm1hcmdpbkxlZnQgPSBgJHtzd2lwZUxpc3RNYXJnaW5MZWZ0IC0gYWRkaXRpb25hbFN3aXBlRGlzdGFuY2V9cHhgO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3dpcGVMaXN0TWFyZ2luTGVmdCA+PSAwICkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBhZGRpdGlvbmFsU3dpcGVEaXN0YW5jZSA9IChhZGRpdGlvbmFsU3dpcGVEaXN0YW5jZSA+IC1zd2lwZUxpc3RNYXJnaW5MZWZ0KSA/IC1zd2lwZUxpc3RNYXJnaW5MZWZ0IDogYWRkaXRpb25hbFN3aXBlRGlzdGFuY2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHN3aXBlckxpc3Quc3R5bGUudHJhbnNpdGlvbiA9ICdhbGwgMC4zNXMnO1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXBlckxpc3Quc3R5bGUubWFyZ2luTGVmdCA9IGAke3N3aXBlTGlzdE1hcmdpbkxlZnQgKyBhZGRpdGlvbmFsU3dpcGVEaXN0YW5jZX1weGA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc3dpcGVyTGlzdC5zdHlsZS50cmFuc2l0aW9uID0gJ2FsbCAwcyc7XHJcbiAgICAgICAgICAgIH0sIDI1MCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBzd2lwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHN3aXBlTW91c2VNb3ZlT2ZmKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3dpcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHN3aXBlKTtcclxufSkoKTtcclxuKCgpID0+IHtcclxuICBjb25zdCBtb2RhbFRyaWdnZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnKltkYXRhLW1vZGFsLXRhcmdldF0nKTtcclxuICBjb25zdCBjbG9zZU1vZGFsQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJypbZGF0YS1tb2RhbC1jbG9zZV0nKTtcclxuICBsZXQgb3BlbmVkTW9kYWxJRDtcclxuXHJcbiAgY29uc3Qgb3Blbk1vZGFsV2luZG93ID0gKGV2dCkgPT4ge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZ0LmN1cnJlbnRUYXJnZXQ7XHJcbiAgICBjb25zdCBtb2RhbElEID0gdGFyZ2V0LmRhdGFzZXQubW9kYWxUYXJnZXQ7XHJcbiAgICBjb25zdCB0YXJnZXRNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1vZGFsSUQpO1xyXG5cclxuICAgIChvcGVuZWRNb2RhbElEICE9PSB1bmRlZmluZWQpID8gY2xvc2VNb2RhbFdpbmRvdyhvcGVuZWRNb2RhbElEKSA6IG51bGw7XHJcblxyXG4gICAgKG1vZGFsSUQgPT09ICdzZXJ2aWNlLWV4YW1wbGUnKSA/IGNyZWF0ZVNlcnZpY2VFeGFtcGxlTW9kYWwodGFyZ2V0LCB0YXJnZXRNb2RhbCkgOiBudWxsO1xyXG5cclxuICAgIG9wZW5lZE1vZGFsSUQgPSBtb2RhbElEO1xyXG5cclxuICAgIHRhcmdldE1vZGFsLmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5jbGFzc0xpc3QuYWRkKCdmaXhlZCcpO1xyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlTW9kYWxCeUJhY2tncm91bmQpO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBjbG9zZU1vZGFsQnlFc2MpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNsb3NlTW9kYWxCeUVzYyA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgICBjbG9zZU1vZGFsV2luZG93KG9wZW5lZE1vZGFsSUQpXHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgY2xvc2VNb2RhbEJ5QmFja2dyb3VuZCA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kYWxfX2JnJykpIHtcclxuICAgICAgY2xvc2VNb2RhbFdpbmRvdyhvcGVuZWRNb2RhbElEKVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNsb3NlTW9kYWxCeUJ1dHRvbiA9IChldnQpID0+IGNsb3NlTW9kYWxXaW5kb3coZXZ0LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5tb2RhbENsb3NlKTtcclxuXHJcbiAgY29uc3QgY2xvc2VNb2RhbFdpbmRvdyA9IChtb2RhbElEKSA9PiB7XHJcbiAgICBjb25zdCB0YXJnZXRNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1vZGFsSUQpO1xyXG5cclxuICAgIHRhcmdldE1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5jbGFzc0xpc3QucmVtb3ZlKCdmaXhlZCcpO1xyXG5cclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlTW9kYWxCeUJhY2tncm91bmQpO1xyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBjbG9zZU1vZGFsQnlFc2MpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGluaXRpYWxpemVNb2RhbFRyaWdnZXJzID0gKCkgPT4ge1xyXG4gICAgZm9yIChjb25zdCBidXR0b24gb2YgbW9kYWxUcmlnZ2Vycykge1xyXG4gICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuTW9kYWxXaW5kb3cpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNsb3NlTW9kYWxCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlTW9kYWxCeUJ1dHRvbikpO1xyXG5cclxuICB3aW5kb3cubW9kYWxzID0ge1xyXG4gICAgb3Blbk1vZGFsV2luZG93OiBvcGVuTW9kYWxXaW5kb3csXHJcbiAgICBjbG9zZU1vZGFsV2luZG93OiBjbG9zZU1vZGFsV2luZG93LFxyXG4gIH07XHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZVNlcnZpY2VFeGFtcGxlTW9kYWwodGFyZ2V0LCB0YXJnZXRNb2RhbCkge1xyXG4gICAgY29uc3RcclxuICAgICAgc2VydmljZVRpdGxlID0gdGFyZ2V0LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignLndoYXQteW91LWdldF9faXRlbS10aXRsZScpLnRleHRDb250ZW50LnJlcGxhY2UoL1xccysvZywnICcpLnRyaW0oKSxcclxuICAgICAgbW9kYWxUaXRsZSA9IHRhcmdldE1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fdGl0bGUnKSxcclxuICAgICAgcGF0aFRvSW1hZ2UgPSB0YXJnZXQuZGF0YXNldC5tb2RhbFNlcnZpY2VFeGFtcGxlSW1hZ2UsXHJcbiAgICAgIG1vZGFsSW1hZ2UgPSB0YXJnZXRNb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2ltYWdlJyk7XHJcbiAgICBcclxuICAgIG1vZGFsVGl0bGUudGV4dENvbnRlbnQgPSBzZXJ2aWNlVGl0bGU7XHJcbiAgICBtb2RhbEltYWdlLnNyYyA9IHBhdGhUb0ltYWdlO1xyXG4gIH1cclxuXHJcbiAgaW5pdGlhbGl6ZU1vZGFsVHJpZ2dlcnMoKTtcclxuXHJcblxyXG5cclxuICBsZXQgaXNEaWFsb2dTdXBwb3J0ZWQgPSB0cnVlO1xyXG4gICAgaWYgKCF3aW5kb3cuSFRNTERpYWxvZ0VsZW1lbnQpIHtcclxuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChcIm5vLWRpYWxvZ1wiKTtcclxuICAgIGlzRGlhbG9nU3VwcG9ydGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBidXR0b24ub25jbGljayA9ICgpID0+IHtcclxuICAgIGlmIChpc0RpYWxvZ1N1cHBvcnRlZCkge1xyXG4gICAgICBtb2RhbC5zaG93TW9kYWwoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG1vZGFsLnNldEF0dHJpYnV0ZShcIm9wZW5cIiwgXCJcIik7XHJcbiAgICB9XHJcbiAgICAvLyAgIEZvY3VzIGZpcnN0IGlucHV0IHdoZW4gZGlhbG9nIG9wZW5zXHJcbiAgICBtb2RhbC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikuZm9jdXMoKTtcclxuICB9O1xyXG5cclxuICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBlID0+IHtcclxuICAgIG1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKS5mb2N1cygpO1xyXG4gIH0pO1xyXG5cclxufSkoKTtcclxuKCgpID0+IHtcclxuICBjb25zdCBzY3JvbGxpbmdMaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJypbZGF0YS1zY3JvbGwtbGlua10nKTtcclxuXHJcbiAgY29uc3Qgc2Nyb2xsVG9FbGVtZW50ID0gKGV2dCkgPT4ge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZ0LnRhcmdldDtcclxuICAgIGNvbnN0IHNjcm9sbFRvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0LmRhdGFzZXQuc2Nyb2xsTGluayk7XHJcblxyXG4gICAgaWYgKHNjcm9sbFRvKSB7XHJcbiAgICAgIHNjcm9sbFRvLnNjcm9sbEludG9WaWV3KHtcclxuICAgICAgICBiZWhhdmlvcjogJ3Ntb290aCdcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgaWYoQm9vbGVhbihzY3JvbGxpbmdMaW5rcykpIHtcclxuICAgIHNjcm9sbGluZ0xpbmtzLmZvckVhY2gobGluayA9PiBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2Nyb2xsVG9FbGVtZW50KSk7XHJcbiAgfVxyXG59KSgpO1xyXG5cclxubWVkaXVtWm9vbSgnW2RhdGEtem9vbWFibGVdJyk7Il19
