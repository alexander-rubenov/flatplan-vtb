"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):window.mediumZoom=t()}(0,function(){var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},t=function(e){return"IMG"===e.tagName},o=function(e){return e&&1===e.nodeType},n=function(e){return".svg"===(e.currentSrc||e.src).substr(-4).toLowerCase()},i=function(e){try{return Array.isArray(e)?e.filter(t):function(e){return NodeList.prototype.isPrototypeOf(e)}(e)?[].slice.call(e).filter(t):o(e)?[e].filter(t):"string"==typeof e?[].slice.call(document.querySelectorAll(e)).filter(t):[]}catch(e){throw new TypeError("The provided selector is invalid.\nExpects a CSS selector, a Node element, a NodeList or an array.\nSee: https://github.com/francoischalifour/medium-zoom")}},r=function(t,o){var n=e({bubbles:!1,cancelable:!1,detail:void 0},o);if("function"==typeof window.CustomEvent)return new CustomEvent(t,n);var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),i};return function(e,t){void 0===t&&(t={});var o=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===o&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}"),function t(d){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=window.Promise||function(e){function t(){}e(t,t)},l=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];var n=t.reduce(function(e,t){return[].concat(e,i(t))},[]);return n.filter(function(e){return-1===f.indexOf(e)}).forEach(function(e){f.push(e),e.classList.add("medium-zoom-image")}),p.forEach(function(e){var t=e.type,o=e.listener,i=e.options;n.forEach(function(e){e.addEventListener(t,o,i)})}),b},m=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target,i=function(){var t={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},i=void 0,r=void 0;if(y.container)if(y.container instanceof Object)i=(t=e({},t,y.container)).width-t.left-t.right-2*y.margin,r=t.height-t.top-t.bottom-2*y.margin;else{var d=(o(y.container)?y.container:document.querySelector(y.container)).getBoundingClientRect(),a=d.width,c=d.height,l=d.left,m=d.top;t=e({},t,{width:a,height:c,left:l,top:m})}i=i||t.width-2*y.margin,r=r||t.height-2*y.margin;var s=h.zoomedHd||h.original,u=n(s)?i:s.naturalWidth||i,f=n(s)?r:s.naturalHeight||r,p=s.getBoundingClientRect(),v=p.top,g=p.left,z=p.width,b=p.height,E=Math.min(u,i)/z,w=Math.min(f,r)/b,L=Math.min(E,w),S="scale("+L+") translate3d("+((i-z)/2-g+y.margin+t.left)/L+"px, "+((r-b)/2-v+y.margin+t.top)/L+"px, 0)";h.zoomed.style.transform=S,h.zoomedHd&&(h.zoomedHd.style.transform=S)};return new c(function(e){if(t&&-1===f.indexOf(t))e(b);else if(h.zoomed)e(b);else{if(t)h.original=t;else{if(!(f.length>0))return void e(b);var n=f;h.original=n[0]}if(h.original.dispatchEvent(r("medium-zoom:open",{detail:{zoom:b}})),g=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,v=!0,h.zoomed=function(e){var t=e.getBoundingClientRect(),o=t.top,n=t.left,i=t.width,r=t.height,d=e.cloneNode(),a=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,c=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return d.removeAttribute("id"),d.style.position="absolute",d.style.top=o+a+"px",d.style.left=n+c+"px",d.style.width=i+"px",d.style.height=r+"px",d.style.transform="",d}(h.original),document.body.appendChild(z),y.template){var d=o(y.template)?y.template:document.querySelector(y.template);h.template=document.createElement("div"),h.template.appendChild(d.content.cloneNode(!0)),document.body.appendChild(h.template)}if(document.body.appendChild(h.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),h.original.classList.add("medium-zoom-image--hidden"),h.zoomed.classList.add("medium-zoom-image--opened"),h.zoomed.addEventListener("click",s),h.zoomed.addEventListener("transitionend",function t(){v=!1,h.zoomed.removeEventListener("transitionend",t),h.original.dispatchEvent(r("medium-zoom:opened",{detail:{zoom:b}})),e(b)}),h.original.getAttribute("data-zoom-src")){h.zoomedHd=h.zoomed.cloneNode(),h.zoomedHd.removeAttribute("srcset"),h.zoomedHd.removeAttribute("sizes"),h.zoomedHd.src=h.zoomed.getAttribute("data-zoom-src"),h.zoomedHd.onerror=function(){clearInterval(a),console.warn("Unable to reach the zoom image target "+h.zoomedHd.src),h.zoomedHd=null,i()};var a=setInterval(function(){h.zoomedHd.complete&&(clearInterval(a),h.zoomedHd.classList.add("medium-zoom-image--opened"),h.zoomedHd.addEventListener("click",s),document.body.appendChild(h.zoomedHd),i())},10)}else if(h.original.hasAttribute("srcset")){h.zoomedHd=h.zoomed.cloneNode(),h.zoomedHd.removeAttribute("sizes");var c=h.zoomedHd.addEventListener("load",function(){h.zoomedHd.removeEventListener("load",c),h.zoomedHd.classList.add("medium-zoom-image--opened"),h.zoomedHd.addEventListener("click",s),document.body.appendChild(h.zoomedHd),i()})}else i()}})},s=function(){return new c(function(e){!v&&h.original?(v=!0,document.body.classList.remove("medium-zoom--opened"),h.zoomed.style.transform="",h.zoomedHd&&(h.zoomedHd.style.transform=""),h.template&&(h.template.style.transition="opacity 150ms",h.template.style.opacity=0),h.original.dispatchEvent(r("medium-zoom:close",{detail:{zoom:b}})),h.zoomed.addEventListener("transitionend",function t(){h.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(h.zoomed),h.zoomedHd&&document.body.removeChild(h.zoomedHd),document.body.removeChild(z),h.zoomed.classList.remove("medium-zoom-image--opened"),h.template&&document.body.removeChild(h.template),v=!1,h.zoomed.removeEventListener("transitionend",t),h.original.dispatchEvent(r("medium-zoom:closed",{detail:{zoom:b}})),h.original=null,h.zoomed=null,h.zoomedHd=null,h.template=null,e(b)})):e(b)})},u=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target;return h.original?s():m({target:e})},f=[],p=[],v=!1,g=0,y=a,h={original:null,zoomed:null,zoomedHd:null,template:null};"[object Object]"===Object.prototype.toString.call(d)?y=d:(d||"string"==typeof d)&&l(d);var z=function(e){var t=document.createElement("div");return t.classList.add("medium-zoom-overlay"),t.style.background=e,t}((y=e({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},y)).background);document.addEventListener("click",function(e){var t=e.target;t!==z?-1!==f.indexOf(t)&&u({target:t}):s()}),document.addEventListener("keyup",function(e){27===(e.keyCode||e.which)&&s()}),document.addEventListener("scroll",function(){if(!v&&h.original){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(g-e)>y.scrollOffset&&setTimeout(s,150)}}),window.addEventListener("resize",s);var b={open:m,close:s,toggle:u,update:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t;if(t.background&&(z.style.background=t.background),t.container&&t.container instanceof Object&&(n.container=e({},y.container,t.container)),t.template){var i=o(t.template)?t.template:document.querySelector(t.template);n.template=i}return y=e({},y,n),f.forEach(function(e){e.dispatchEvent(r("medium-zoom:update",{detail:{zoom:b}}))}),b},clone:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t(e({},y,o))},attach:l,detach:function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];h.zoomed&&s();var n=t.length>0?t.reduce(function(e,t){return[].concat(e,i(t))},[]):f;return n.forEach(function(e){e.classList.remove("medium-zoom-image"),e.dispatchEvent(r("medium-zoom:detach",{detail:{zoom:b}}))}),f=f.filter(function(e){return-1===n.indexOf(e)}),b},on:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f.forEach(function(n){n.addEventListener("medium-zoom:"+e,t,o)}),p.push({type:"medium-zoom:"+e,listener:t,options:o}),b},off:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f.forEach(function(n){n.removeEventListener("medium-zoom:"+e,t,o)}),p=p.filter(function(o){return!(o.type==="medium-zoom:"+e&&o.listener.toString()===t.toString())}),b},getOptions:function(){return y},getImages:function(){return f},getZoomedImage:function(){return h.original}};return b}}),function(){var e=document.querySelector(".other-services__swiper"),t=document.querySelector(".other-services__list"),o=parseInt(getComputedStyle(e).width),n=parseInt(getComputedStyle(t).width);window.onload=function(){var t=getComputedStyle(e).height;e.style.height="".concat(parseInt(t)+40,"px")},t.style.marginLeft="0px",e.addEventListener("mousedown",function(i){e.addEventListener("mouseleave",function(){e.removeEventListener("mousemove",m)}),e.addEventListener("mouseup",function i(c){if(e.removeEventListener("mousemove",m),l>=100){var s=(l=l>n-o?n-o:l)/1.5,u=c.pageX;switch(r=u<a?"left":"right",d=parseInt(t.style.marginLeft),r){case"left":if(-d>=n-o)return;s=s>n-o+d?n-o+d:s,t.style.transition="all 0.35s",t.style.marginLeft="".concat(d-s,"px");break;case"right":if(d>=0)return;s=s>-d?-d:s,t.style.transition="all 0.35s",t.style.marginLeft="".concat(d+s,"px")}setTimeout(function(){t.style.transition="all 0s"},250),e.removeEventListener("mouseup",i)}});var r,d,a=i.pageX,c=i.pageX,l=0;function m(e){var i=e.pageX,a=Math.abs(c-i);switch(d=parseInt(t.style.marginLeft),i<c?r="left":i>c?r="right":(i=c)&&(r=r),r){case"left":if(-d>=n-o)return;t.style.marginLeft="".concat(d-a,"px");break;case"right":if(d>=0)return;t.style.marginLeft="".concat(d+a,"px")}l+=a,c=i}e.addEventListener("mousemove",m)})}(),function(){var e,t=document.querySelectorAll("*[data-modal-target]"),o=document.querySelectorAll("*[data-modal-close]"),n=function(t){var o=t.currentTarget,n=o.dataset.modalTarget,d=document.getElementById(n);void 0!==e&&a(e),"service-example"===n&&function(e,t){var o=e.parentElement.querySelector(".what-you-get__item-title").textContent.replace(/\s+/g," ").trim(),n=t.querySelector(".modal__title"),i=e.dataset.modalServiceExampleImage,r=t.querySelector(".modal__image");n.textContent=o,r.src=i}(o,d),e=n,d.classList.add("visible"),document.querySelector("body").classList.add("fixed"),window.addEventListener("click",r),window.addEventListener("keydown",i);var c=d.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])'),l=c[0],m=c[c.length-1];d.addEventListener("keydown",function(e){"Tab"!==e.key&&9!==e.keyCode||(e.shiftKey?document.activeElement===l&&(e.preventDefault(),m.focus()):document.activeElement===m&&(e.preventDefault(),l.focus()))})},i=function(t){"Escape"===t.key&&a(e)},r=function(t){t.target.classList.contains("modal__bg")&&a(e)},d=function(e){return a(e.currentTarget.dataset.modalClose)},a=function(e){document.getElementById(e).classList.remove("visible"),document.querySelector("body").classList.remove("fixed"),window.removeEventListener("click",r),window.removeEventListener("keydown",i)};o.forEach(function(e){return e.addEventListener("click",d)}),window.modals={openModalWindow:n,closeModalWindow:a},function(){var e=!0,o=!1,i=void 0;try{for(var r,d=t[Symbol.iterator]();!(e=(r=d.next()).done);e=!0)r.value.addEventListener("click",n)}catch(e){o=!0,i=e}finally{try{e||null==d.return||d.return()}finally{if(o)throw i}}}()}(),function(){var e=document.querySelectorAll("*[data-scroll-link]"),t=function(e){var t=e.target,o=document.getElementById(t.dataset.scrollLink);o&&o.scrollIntoView({behavior:"smooth"})};Boolean(e)&&e.forEach(function(e){return e.addEventListener("click",t)})}(),document.addEventListener("DOMContentLoaded",function(){var e=[].slice.call(document.querySelectorAll("picture.lazy"));if("IntersectionObserver"in window){var t=new IntersectionObserver(function(e,o){e.forEach(function(e){if(e.isIntersecting){var o=e.target,n=o.querySelector('[type="image/webp"]'),i=o.querySelector("img");n.srcset=n.dataset.src,i.src=i.dataset.src,o.setAttribute("data-picture","opacity-1"),o.classList.remove("lazy"),t.unobserve(o)}})});e.forEach(function(e){t.observe(e)})}}),mediumZoom("[data-zoomable]");
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJnbG9iYWwiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIl90eXBlb2YiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJ3aW5kb3ciLCJtZWRpdW1ab29tIiwiX2V4dGVuZHMiLCJPYmplY3QiLCJhc3NpZ24iLCJ0YXJnZXQiLCJpIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwic291cmNlIiwicHJvdG90eXBlIiwiY2FsbCIsImtleSIsImlzU3VwcG9ydGVkIiwibm9kZSIsInRhZ05hbWUiLCJzZWxlY3RvciIsIm5vZGVUeXBlIiwiaXNTdmciLCJpbWFnZSIsImN1cnJlbnRTcmMiLCJpc1Byb3RvdHlwZU9mIiwiZ2V0SW1hZ2VzRnJvbVNlbGVjdG9yIiwiaXNOb2RlIiwiZmlsdGVyIiwiTm9kZUxpc3QiLCJpc05vZGVMaXN0IiwiaXNBcnJheSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlcnIiLCJjcmVhdGVDdXN0b21FdmVudCIsInR5cGUiLCJwYXJhbXMiLCJldmVudFBhcmFtcyIsImNsb25lVGFyZ2V0IiwiX3RlbXBsYXRlJGdldEJvdW5kaW5nIiwidG9wIiwibGVmdCIsIndpZHRoIiwiaGVpZ2h0IiwiY2xvbmUiLCJkb2N1bWVudCIsImNsb25lTm9kZSIsImN1c3RvbUV2ZW50IiwiaW5pdEN1c3RvbUV2ZW50IiwicGFnZVlPZmZzZXQiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxUb3AiLCJzY3JvbGxMZWZ0IiwiYWN0aXZlIiwiY3NzIiwicmVmIiwib3JpZ2luYWwiLCJ6b29tZWQiLCJpbnNlcnRBdCIsImhlYWQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInN0eWxlIiwiY3JlYXRlRWxlbWVudCIsImlzQW5pbWF0aW5nIiwiY2xhc3NMaXN0IiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsInRlbXBsYXRlIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJhcHBlbmRDaGlsZCIsImRpc3BhdGNoRXZlbnQiLCJzdHlsZUluamVjdCIsInBvc2l0aW9uIiwidW5kZWZpbmVkIiwiUHJvbWlzZSIsImZuIiwiYXR0YWNoIiwiX2xlbiIsInNlbGVjdG9ycyIsIkFycmF5IiwiX2tleSIsImV2ZW50Iiwid2hpY2giLCJpbWFnZXNBY2N1bXVsYXRvciIsImN1cnJlbnRTZWxlY3RvciIsImNsb3NlIiwiY29uY2F0IiwibmV3SW1hZ2VzIiwibmV3SW1hZ2UiLCJpbWFnZXMiLCJpbmRleE9mIiwidXBkYXRlIiwib3B0aW9ucyIsInB1c2giLCJuZXdPcHRpb25zIiwiZXZlbnRMaXN0ZW5lcnMiLCJiYWNrZ3JvdW5kIiwiX3JlZiIsIm92ZXJsYXkiLCJsaXN0ZW5lciIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiem9vbSIsIm9wZW4iLCJkZXRhY2giLCJfYW5pbWF0ZSIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwicmlnaHQiLCJib3R0b20iLCJ2aWV3cG9ydFdpZHRoIiwidmlld3BvcnRIZWlnaHQiLCJpbWFnZXNUb0RldGFjaCIsInJlbW92ZSIsImRldGFpbCIsInpvb21PcHRpb25zIiwiY29udGFpbmVyIiwibWFyZ2luIiwiX3pvb21Db250YWluZXIkZ2V0Qm91IiwicXVlcnlTZWxlY3RvciIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIl93aWR0aCIsIl9oZWlnaHQiLCJfbGVmdCIsIl90b3AiLCJ6b29tVGFyZ2V0Iiwiem9vbWVkSGQiLCJuYXR1cmFsV2lkdGgiLCJuYXR1cmFsSGVpZ2h0IiwiX3pvb21UYXJnZXQkZ2V0Qm91bmRpIiwic2NhbGVZIiwiTWF0aCIsIm1pbiIsInNjYWxlWCIsInRyYW5zZm9ybSIsInNjYWxlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2ZW50TGlzdGVuZXIiLCJyZXNvbHZlIiwiYm9keSIsInNsaWNlIiwicGFnZVhPZmZzZXQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJjcmVhdGVPdmVybGF5IiwiY29udGVudCIsIl9oYW5kbGVPcGVuRW5kIiwiX3JlZjIiLCJzcmMiLCJnZXRBdHRyaWJ1dGUiLCJ0cmFuc2xhdGVYIiwidHJhbnNsYXRlWSIsImNvbXBsZXRlIiwiZ2V0Wm9vbVRhcmdldFNpemUiLCJhZGQiLCJoYXNBdHRyaWJ1dGUiLCJsb2FkRXZlbnRMaXN0ZW5lciIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIl9oYW5kbGVDbG9zZUVuZCIsInJlbW92ZUNoaWxkIiwiY2xlYXJJbnRlcnZhbCIsImNvbnNvbGUiLCJ3YXJuIiwidG9TdHJpbmciLCJjYW5jZWxhYmxlIiwidG9nZ2xlIiwia2V5Q29kZSIsImNyZWF0ZUV2ZW50IiwiY3VycmVudFNjcm9sbCIsImFicyIsInNjcm9sbE9mZnNldCIsIl9oYW5kbGVDbGljayIsIl9rZXkyIiwicmVkdWNlIiwib24iLCJvZmYiLCJzd2lwZXJMaXN0Iiwic3dpcGVyV2lkdGgiLCJfcmVmMyIsImdldENvbXB1dGVkU3R5bGUiLCJzd2lwZXIiLCJzd2lwZXJMaXN0V2lkdGgiLCJwYXJzZUludCIsIm9ubG9hZCIsImhlaWdodE9mU3dpcGVyIiwibWFyZ2luTGVmdCIsImdldEltYWdlcyIsInN3aXBlTW91c2VNb3ZlT24iLCJzd2lwZU1vdXNlTW92ZU9mZiIsImdldE9wdGlvbnMiLCJnZXRab29tZWRJbWFnZSIsInN1bW1Td2lwZURpc3RhbmNlIiwibGFzdEN1cnNvclBvc2l0aW9uIiwicGFnZVgiLCJ3YXlUb1doaWNoU3dpcGVJc01hZGUiLCJmaXJzdEN1cnNvclBvc2l0aW9uIiwic3dpcGVMaXN0TWFyZ2luTGVmdCIsImFkZGl0aW9uYWxTd2lwZURpc3RhbmNlIiwidHJhbnNpdGlvbiIsImNyZWF0ZVRleHROb2RlIiwic2V0VGltZW91dCIsIm5ld0N1cnNvclBvc2l0aW9uIiwiaW5pdGlhbEN1cnNvclBvc2l0aW9uIiwic3dpcGVEaXN0YW5jZSIsIm1vZGFsVHJpZ2dlcnMiLCJvcGVuTW9kYWxXaW5kb3ciLCJldnQiLCJtb2RhbElEIiwiZGF0YXNldCIsIm1vZGFsVGFyZ2V0IiwidGFyZ2V0TW9kYWwiLCJnZXRFbGVtZW50QnlJZCIsIm9wZW5lZE1vZGFsSUQiLCJjbG9zZU1vZGFsV2luZG93Iiwic2VydmljZVRpdGxlIiwiY3VycmVudFRhcmdldCIsInRleHRDb250ZW50IiwicmVwbGFjZSIsInRyaW0iLCJtb2RhbFRpdGxlIiwicGF0aFRvSW1hZ2UiLCJjcmVhdGVTZXJ2aWNlRXhhbXBsZU1vZGFsIiwiY2xvc2VNb2RhbEJ5QmFja2dyb3VuZCIsImNsb3NlTW9kYWxCeUVzYyIsImZvY3VzYWJsZUVsZW1lbnRzIiwiZmlyc3RGb2N1c2FibGVFbGVtZW50IiwibGFzdEZvY3VzYWJsZUVsZW1lbnQiLCJzaGlmdEtleSIsInByZXZlbnREZWZhdWx0IiwiYWN0aXZlRWxlbWVudCIsImZvY3VzIiwiaXNGYXN0U3dpcGUiLCJidXR0b24iLCJjbG9zZU1vZGFsQnlCdXR0b24iLCJtb2RhbHMiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uIiwiX2RpZEl0ZXJhdG9yRXJyb3IiLCJfaXRlcmF0b3JFcnJvciIsIl9zdGVwIiwiX2l0ZXJhdG9yIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJuZXh0IiwiZG9uZSIsInZhbHVlIiwicmV0dXJuIiwic2Nyb2xsaW5nTGlua3MiLCJzY3JvbGxUb0VsZW1lbnQiLCJzY3JvbGxUbyIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJCb29sZWFuIiwibGluayIsImxhenlQaWN0dXJlcyIsImVudHJpZXMiLCJvYnNlcnZlciIsImVudHJ5IiwiaXNJbnRlcnNlY3RpbmciLCJsYXp5UGljdHVyZSIsImxhenlXZWJwSW1hZ2UiLCJzcmNzZXQiLCJsYXp5SW1hZ2UiLCJsYXp5UGljdHVyZU9ic2VydmVyIiwidW5vYnNlcnZlIl0sIm1hcHBpbmdzIjoiQUFBQSwrUEFHQSxTQUFVQSxFQUFRQyxHQUNLLFlBQW5CLG9CQUFPQyxRQUFQLFlBQUFDLFFBQU9ELFdBQTBDLG9CQUFYRSxPQUF5QkEsT0FBT0YsUUFBVUQsSUFBOEIsbUJBQVhJLFFBQXlCQSxPQUFPQyxJQUFNRCxPQUFPSixHQUFXTSxPQUFPQyxXQUFhUCxJQURuTCxDQUFBLEVBQVVE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QkMsR0FDRHNCLEVBQUFDLGVBQUEsQ0FDRkMsU0FBTSxZQUtOQyxRQUFBTCxJQUNGQSxFQUFBakosUUFBQSxTQUFBdUosR0FBQSxPQUFBQSxFQUFBdEosaUJBQUEsUUFBQWlKLEtBbEJILEdBdUJEMU0sU0F4Q0R5RCxpQkFBQSxtQkFBQSxXQWtIQSxJQUFJdUosRUFBZSxHQUFHaEgsTUFBTTlILEtBQUs4QixTQUFTYixpQkFBaUIsaUJBdkV6RCxHQUFBLHlCQUEwQjVCLE9BQUEsQ0FDeEJpTixJQUFBQSxFQUFpQkQsSUFBQUEscUJBQWpCLFNBQUEwQyxFQUFBQyxHQUNERCxFQUFBekosUUFBQSxTQUFBMkosR0FISCxHQUFBQSxFQUFBQyxlQUFBLENBOEVRLElBQUlDLEVBQWNGLEVBQU12UCxPQXhFMUJxTixFQUFzQm9DLEVBQXRCcEMsY0FBQUEsdUJBQ0lyTixFQUFPdUQsRUFBbUJ3RCxjQUFjLE9BRS9DMkksRUFBQUMsT0FBQUQsRUFBQW5ELFFBQUE1RCxJQUhIaUgsRUFBQWpILElBQUFpSCxFQUFBckQsUUFBQTVELElBTU1xRixFQUFBQSxhQUFxQixlQUFyQkEsYUFBcUJ5QixFQUFTN0MsVUFBcUJFLE9BQUFBLFFBQXpEK0MsRUFBQUMsVUFBQUwsUUFNRXJOLEVBQVMyRSxRQUFBQSxTQUFUMEksR0FFQTlQLEVBQU9xSSxRQUFvQnlILFFBS1M3UCxXQUFBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcblxyXG4vKiEgbWVkaXVtLXpvb20gMS4wLjQgfCBNSVQgTGljZW5zZSB8IGh0dHBzOi8vZ2l0aHViLmNvbS9mcmFuY29pc2NoYWxpZm91ci9tZWRpdW0tem9vbSAqL1xyXG4oZnVuY3Rpb24oZ2xvYmFsLCBmYWN0b3J5KSB7XHJcbiAgICB0eXBlb2YgZXhwb3J0cyA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOiB0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6IHdpbmRvdy5tZWRpdW1ab29tID0gZmFjdG9yeSgpO1xyXG4gIH0pKHRoaXMsIGZ1bmN0aW9uKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICB2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHRhcmdldCkge1xyXG4gICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xyXG4gICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcclxuICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRhcmdldDtcclxuICAgIH07XHJcbiAgICB2YXIgaXNTdXBwb3J0ZWQgPSBmdW5jdGlvbiBpc1N1cHBvcnRlZChub2RlKSB7XHJcbiAgICAgIHJldHVybiBub2RlLnRhZ05hbWUgPT09IFwiSU1HXCI7XHJcbiAgICB9O1xyXG4gICAgdmFyIGlzTm9kZUxpc3QgPSBmdW5jdGlvbiBpc05vZGVMaXN0KHNlbGVjdG9yKSB7XHJcbiAgICAgIHJldHVybiBOb2RlTGlzdC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihzZWxlY3Rvcik7XHJcbiAgICB9O1xyXG4gICAgdmFyIGlzTm9kZSA9IGZ1bmN0aW9uIGlzTm9kZShzZWxlY3Rvcikge1xyXG4gICAgICByZXR1cm4gc2VsZWN0b3IgJiYgc2VsZWN0b3Iubm9kZVR5cGUgPT09IDE7XHJcbiAgICB9O1xyXG4gICAgdmFyIGlzU3ZnID0gZnVuY3Rpb24gaXNTdmcoaW1hZ2UpIHtcclxuICAgICAgdmFyIHNvdXJjZSA9IGltYWdlLmN1cnJlbnRTcmMgfHwgaW1hZ2Uuc3JjO1xyXG4gICAgICByZXR1cm4gc291cmNlLnN1YnN0cigtNCkudG9Mb3dlckNhc2UoKSA9PT0gXCIuc3ZnXCI7XHJcbiAgICB9O1xyXG4gICAgdmFyIGdldEltYWdlc0Zyb21TZWxlY3RvciA9IGZ1bmN0aW9uIGdldEltYWdlc0Zyb21TZWxlY3RvcihzZWxlY3Rvcikge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHNlbGVjdG9yKSkge1xyXG4gICAgICAgICAgcmV0dXJuIHNlbGVjdG9yLmZpbHRlcihpc1N1cHBvcnRlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc05vZGVMaXN0KHNlbGVjdG9yKSkge1xyXG4gICAgICAgICAgcmV0dXJuIFtdLnNsaWNlLmNhbGwoc2VsZWN0b3IpLmZpbHRlcihpc1N1cHBvcnRlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc05vZGUoc2VsZWN0b3IpKSB7XHJcbiAgICAgICAgICByZXR1cm4gWyBzZWxlY3RvciBdLmZpbHRlcihpc1N1cHBvcnRlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgIHJldHVybiBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKS5maWx0ZXIoaXNTdXBwb3J0ZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJUaGUgcHJvdmlkZWQgc2VsZWN0b3IgaXMgaW52YWxpZC5cXG5cIiArIFwiRXhwZWN0cyBhIENTUyBzZWxlY3RvciwgYSBOb2RlIGVsZW1lbnQsIGEgTm9kZUxpc3Qgb3IgYW4gYXJyYXkuXFxuXCIgKyBcIlNlZTogaHR0cHM6Ly9naXRodWIuY29tL2ZyYW5jb2lzY2hhbGlmb3VyL21lZGl1bS16b29tXCIpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgdmFyIGNyZWF0ZU92ZXJsYXkgPSBmdW5jdGlvbiBjcmVhdGVPdmVybGF5KGJhY2tncm91bmQpIHtcclxuICAgICAgdmFyIG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICBvdmVybGF5LmNsYXNzTGlzdC5hZGQoXCJtZWRpdW0tem9vbS1vdmVybGF5XCIpO1xyXG4gICAgICBvdmVybGF5LnN0eWxlLmJhY2tncm91bmQgPSBiYWNrZ3JvdW5kO1xyXG4gICAgICByZXR1cm4gb3ZlcmxheTtcclxuICAgIH07XHJcbiAgICB2YXIgY2xvbmVUYXJnZXQgPSBmdW5jdGlvbiBjbG9uZVRhcmdldCh0ZW1wbGF0ZSkge1xyXG4gICAgICB2YXIgX3RlbXBsYXRlJGdldEJvdW5kaW5nID0gdGVtcGxhdGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIHRvcCA9IF90ZW1wbGF0ZSRnZXRCb3VuZGluZy50b3AsIGxlZnQgPSBfdGVtcGxhdGUkZ2V0Qm91bmRpbmcubGVmdCwgd2lkdGggPSBfdGVtcGxhdGUkZ2V0Qm91bmRpbmcud2lkdGgsIGhlaWdodCA9IF90ZW1wbGF0ZSRnZXRCb3VuZGluZy5oZWlnaHQ7XHJcbiAgICAgIHZhciBjbG9uZSA9IHRlbXBsYXRlLmNsb25lTm9kZSgpO1xyXG4gICAgICB2YXIgc2Nyb2xsVG9wID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgfHwgMDtcclxuICAgICAgdmFyIHNjcm9sbExlZnQgPSB3aW5kb3cucGFnZVhPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0IHx8IDA7XHJcbiAgICAgIGNsb25lLnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpO1xyXG4gICAgICBjbG9uZS5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuICAgICAgY2xvbmUuc3R5bGUudG9wID0gdG9wICsgc2Nyb2xsVG9wICsgXCJweFwiO1xyXG4gICAgICBjbG9uZS5zdHlsZS5sZWZ0ID0gbGVmdCArIHNjcm9sbExlZnQgKyBcInB4XCI7XHJcbiAgICAgIGNsb25lLnN0eWxlLndpZHRoID0gd2lkdGggKyBcInB4XCI7XHJcbiAgICAgIGNsb25lLnN0eWxlLmhlaWdodCA9IGhlaWdodCArIFwicHhcIjtcclxuICAgICAgY2xvbmUuc3R5bGUudHJhbnNmb3JtID0gXCJcIjtcclxuICAgICAgcmV0dXJuIGNsb25lO1xyXG4gICAgfTtcclxuICAgIHZhciBjcmVhdGVDdXN0b21FdmVudCA9IGZ1bmN0aW9uIGNyZWF0ZUN1c3RvbUV2ZW50KHR5cGUsIHBhcmFtcykge1xyXG4gICAgICB2YXIgZXZlbnRQYXJhbXMgPSBfZXh0ZW5kcyh7XHJcbiAgICAgICAgYnViYmxlczogZmFsc2UsXHJcbiAgICAgICAgY2FuY2VsYWJsZTogZmFsc2UsXHJcbiAgICAgICAgZGV0YWlsOiB1bmRlZmluZWRcclxuICAgICAgfSwgcGFyYW1zKTtcclxuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cuQ3VzdG9tRXZlbnQgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ3VzdG9tRXZlbnQodHlwZSwgZXZlbnRQYXJhbXMpO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBjdXN0b21FdmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiQ3VzdG9tRXZlbnRcIik7XHJcbiAgICAgIGN1c3RvbUV2ZW50LmluaXRDdXN0b21FdmVudCh0eXBlLCBldmVudFBhcmFtcy5idWJibGVzLCBldmVudFBhcmFtcy5jYW5jZWxhYmxlLCBldmVudFBhcmFtcy5kZXRhaWwpO1xyXG4gICAgICByZXR1cm4gY3VzdG9tRXZlbnQ7XHJcbiAgICB9O1xyXG4gICAgdmFyIG1lZGl1bVpvb20gPSBmdW5jdGlvbiBtZWRpdW1ab29tKHNlbGVjdG9yKSB7XHJcbiAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcclxuICAgICAgdmFyIFByb21pc2UgPSB3aW5kb3cuUHJvbWlzZSB8fCBmdW5jdGlvbiBQcm9taXNlKGZuKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gbm9vcCgpIHt9XHJcbiAgICAgICAgZm4obm9vcCwgbm9vcCk7XHJcbiAgICAgIH07XHJcbiAgICAgIHZhciBfaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiBfaGFuZGxlQ2xpY2soZXZlbnQpIHtcclxuICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgICAgIGlmICh0YXJnZXQgPT09IG92ZXJsYXkpIHtcclxuICAgICAgICAgIGNsb3NlKCk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpbWFnZXMuaW5kZXhPZih0YXJnZXQpID09PSAtMSkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0b2dnbGUoe1xyXG4gICAgICAgICAgdGFyZ2V0OiB0YXJnZXRcclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuICAgICAgdmFyIF9oYW5kbGVTY3JvbGwgPSBmdW5jdGlvbiBfaGFuZGxlU2Nyb2xsKCkge1xyXG4gICAgICAgIGlmIChpc0FuaW1hdGluZyB8fCAhYWN0aXZlLm9yaWdpbmFsKSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBjdXJyZW50U2Nyb2xsID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgfHwgMDtcclxuICAgICAgICBpZiAoTWF0aC5hYnMoc2Nyb2xsVG9wIC0gY3VycmVudFNjcm9sbCkgPiB6b29tT3B0aW9ucy5zY3JvbGxPZmZzZXQpIHtcclxuICAgICAgICAgIHNldFRpbWVvdXQoY2xvc2UsIDE1MCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgICB2YXIgX2hhbmRsZUtleVVwID0gZnVuY3Rpb24gX2hhbmRsZUtleVVwKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKChldmVudC5rZXlDb2RlIHx8IGV2ZW50LndoaWNoKSA9PT0gMjcpIHtcclxuICAgICAgICAgIGNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgICB2YXIgdXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKCkge1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcclxuICAgICAgICB2YXIgbmV3T3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuYmFja2dyb3VuZCkge1xyXG4gICAgICAgICAgb3ZlcmxheS5zdHlsZS5iYWNrZ3JvdW5kID0gb3B0aW9ucy5iYWNrZ3JvdW5kO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob3B0aW9ucy5jb250YWluZXIgJiYgb3B0aW9ucy5jb250YWluZXIgaW5zdGFuY2VvZiBPYmplY3QpIHtcclxuICAgICAgICAgIG5ld09wdGlvbnMuY29udGFpbmVyID0gX2V4dGVuZHMoe30sIHpvb21PcHRpb25zLmNvbnRhaW5lciwgb3B0aW9ucy5jb250YWluZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob3B0aW9ucy50ZW1wbGF0ZSkge1xyXG4gICAgICAgICAgdmFyIHRlbXBsYXRlID0gaXNOb2RlKG9wdGlvbnMudGVtcGxhdGUpID8gb3B0aW9ucy50ZW1wbGF0ZSA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob3B0aW9ucy50ZW1wbGF0ZSk7XHJcbiAgICAgICAgICBuZXdPcHRpb25zLnRlbXBsYXRlID0gdGVtcGxhdGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHpvb21PcHRpb25zID0gX2V4dGVuZHMoe30sIHpvb21PcHRpb25zLCBuZXdPcHRpb25zKTtcclxuICAgICAgICBpbWFnZXMuZm9yRWFjaChmdW5jdGlvbihpbWFnZSkge1xyXG4gICAgICAgICAgaW1hZ2UuZGlzcGF0Y2hFdmVudChjcmVhdGVDdXN0b21FdmVudChcIm1lZGl1bS16b29tOnVwZGF0ZVwiLCB7XHJcbiAgICAgICAgICAgIGRldGFpbDoge1xyXG4gICAgICAgICAgICAgIHpvb206IHpvb21cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB6b29tO1xyXG4gICAgICB9O1xyXG4gICAgICB2YXIgY2xvbmUgPSBmdW5jdGlvbiBjbG9uZSgpIHtcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XHJcbiAgICAgICAgcmV0dXJuIG1lZGl1bVpvb20oX2V4dGVuZHMoe30sIHpvb21PcHRpb25zLCBvcHRpb25zKSk7XHJcbiAgICAgIH07XHJcbiAgICAgIHZhciBhdHRhY2ggPSBmdW5jdGlvbiBhdHRhY2goKSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHNlbGVjdG9ycyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xyXG4gICAgICAgICAgc2VsZWN0b3JzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbmV3SW1hZ2VzID0gc2VsZWN0b3JzLnJlZHVjZShmdW5jdGlvbihpbWFnZXNBY2N1bXVsYXRvciwgY3VycmVudFNlbGVjdG9yKSB7XHJcbiAgICAgICAgICByZXR1cm4gW10uY29uY2F0KGltYWdlc0FjY3VtdWxhdG9yLCBnZXRJbWFnZXNGcm9tU2VsZWN0b3IoY3VycmVudFNlbGVjdG9yKSk7XHJcbiAgICAgICAgfSwgW10pO1xyXG4gICAgICAgIG5ld0ltYWdlcy5maWx0ZXIoZnVuY3Rpb24obmV3SW1hZ2UpIHtcclxuICAgICAgICAgIHJldHVybiBpbWFnZXMuaW5kZXhPZihuZXdJbWFnZSkgPT09IC0xO1xyXG4gICAgICAgIH0pLmZvckVhY2goZnVuY3Rpb24obmV3SW1hZ2UpIHtcclxuICAgICAgICAgIGltYWdlcy5wdXNoKG5ld0ltYWdlKTtcclxuICAgICAgICAgIG5ld0ltYWdlLmNsYXNzTGlzdC5hZGQoXCJtZWRpdW0tem9vbS1pbWFnZVwiKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBldmVudExpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKF9yZWYpIHtcclxuICAgICAgICAgIHZhciB0eXBlID0gX3JlZi50eXBlLCBsaXN0ZW5lciA9IF9yZWYubGlzdGVuZXIsIG9wdGlvbnMgPSBfcmVmLm9wdGlvbnM7XHJcbiAgICAgICAgICBuZXdJbWFnZXMuZm9yRWFjaChmdW5jdGlvbihpbWFnZSkge1xyXG4gICAgICAgICAgICBpbWFnZS5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB6b29tO1xyXG4gICAgICB9O1xyXG4gICAgICB2YXIgZGV0YWNoID0gZnVuY3Rpb24gZGV0YWNoKCkge1xyXG4gICAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgc2VsZWN0b3JzID0gQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcclxuICAgICAgICAgIHNlbGVjdG9yc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYWN0aXZlLnpvb21lZCkge1xyXG4gICAgICAgICAgY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGltYWdlc1RvRGV0YWNoID0gc2VsZWN0b3JzLmxlbmd0aCA+IDAgPyBzZWxlY3RvcnMucmVkdWNlKGZ1bmN0aW9uKGltYWdlc0FjY3VtdWxhdG9yLCBjdXJyZW50U2VsZWN0b3IpIHtcclxuICAgICAgICAgIHJldHVybiBbXS5jb25jYXQoaW1hZ2VzQWNjdW11bGF0b3IsIGdldEltYWdlc0Zyb21TZWxlY3RvcihjdXJyZW50U2VsZWN0b3IpKTtcclxuICAgICAgICB9LCBbXSkgOiBpbWFnZXM7XHJcbiAgICAgICAgaW1hZ2VzVG9EZXRhY2guZm9yRWFjaChmdW5jdGlvbihpbWFnZSkge1xyXG4gICAgICAgICAgaW1hZ2UuY2xhc3NMaXN0LnJlbW92ZShcIm1lZGl1bS16b29tLWltYWdlXCIpO1xyXG4gICAgICAgICAgaW1hZ2UuZGlzcGF0Y2hFdmVudChjcmVhdGVDdXN0b21FdmVudChcIm1lZGl1bS16b29tOmRldGFjaFwiLCB7XHJcbiAgICAgICAgICAgIGRldGFpbDoge1xyXG4gICAgICAgICAgICAgIHpvb206IHpvb21cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGltYWdlcyA9IGltYWdlcy5maWx0ZXIoZnVuY3Rpb24oaW1hZ2UpIHtcclxuICAgICAgICAgIHJldHVybiBpbWFnZXNUb0RldGFjaC5pbmRleE9mKGltYWdlKSA9PT0gLTE7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHpvb207XHJcbiAgICAgIH07XHJcbiAgICAgIHZhciBvbiA9IGZ1bmN0aW9uIG9uKHR5cGUsIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xyXG4gICAgICAgIGltYWdlcy5mb3JFYWNoKGZ1bmN0aW9uKGltYWdlKSB7XHJcbiAgICAgICAgICBpbWFnZS5hZGRFdmVudExpc3RlbmVyKFwibWVkaXVtLXpvb206XCIgKyB0eXBlLCBsaXN0ZW5lciwgb3B0aW9ucyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZXZlbnRMaXN0ZW5lcnMucHVzaCh7XHJcbiAgICAgICAgICB0eXBlOiBcIm1lZGl1bS16b29tOlwiICsgdHlwZSxcclxuICAgICAgICAgIGxpc3RlbmVyOiBsaXN0ZW5lcixcclxuICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnNcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gem9vbTtcclxuICAgICAgfTtcclxuICAgICAgdmFyIG9mZiA9IGZ1bmN0aW9uIG9mZih0eXBlLCBsaXN0ZW5lcikge1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcclxuICAgICAgICBpbWFnZXMuZm9yRWFjaChmdW5jdGlvbihpbWFnZSkge1xyXG4gICAgICAgICAgaW1hZ2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lZGl1bS16b29tOlwiICsgdHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGV2ZW50TGlzdGVuZXJzID0gZXZlbnRMaXN0ZW5lcnMuZmlsdGVyKGZ1bmN0aW9uKGV2ZW50TGlzdGVuZXIpIHtcclxuICAgICAgICAgIHJldHVybiAhKGV2ZW50TGlzdGVuZXIudHlwZSA9PT0gXCJtZWRpdW0tem9vbTpcIiArIHR5cGUgJiYgZXZlbnRMaXN0ZW5lci5saXN0ZW5lci50b1N0cmluZygpID09PSBsaXN0ZW5lci50b1N0cmluZygpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gem9vbTtcclxuICAgICAgfTtcclxuICAgICAgdmFyIG9wZW4gPSBmdW5jdGlvbiBvcGVuKCkge1xyXG4gICAgICAgIHZhciBfcmVmMiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sIHRhcmdldCA9IF9yZWYyLnRhcmdldDtcclxuICAgICAgICB2YXIgX2FuaW1hdGUgPSBmdW5jdGlvbiBfYW5pbWF0ZSgpIHtcclxuICAgICAgICAgIHZhciBjb250YWluZXIgPSB7XHJcbiAgICAgICAgICAgIHdpZHRoOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgsXHJcbiAgICAgICAgICAgIGhlaWdodDogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCxcclxuICAgICAgICAgICAgbGVmdDogMCxcclxuICAgICAgICAgICAgdG9wOiAwLFxyXG4gICAgICAgICAgICByaWdodDogMCxcclxuICAgICAgICAgICAgYm90dG9tOiAwXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgdmFyIHZpZXdwb3J0V2lkdGggPSB2b2lkIDA7XHJcbiAgICAgICAgICB2YXIgdmlld3BvcnRIZWlnaHQgPSB2b2lkIDA7XHJcbiAgICAgICAgICBpZiAoem9vbU9wdGlvbnMuY29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIGlmICh6b29tT3B0aW9ucy5jb250YWluZXIgaW5zdGFuY2VvZiBPYmplY3QpIHtcclxuICAgICAgICAgICAgICBjb250YWluZXIgPSBfZXh0ZW5kcyh7fSwgY29udGFpbmVyLCB6b29tT3B0aW9ucy5jb250YWluZXIpO1xyXG4gICAgICAgICAgICAgIHZpZXdwb3J0V2lkdGggPSBjb250YWluZXIud2lkdGggLSBjb250YWluZXIubGVmdCAtIGNvbnRhaW5lci5yaWdodCAtIHpvb21PcHRpb25zLm1hcmdpbiAqIDI7XHJcbiAgICAgICAgICAgICAgdmlld3BvcnRIZWlnaHQgPSBjb250YWluZXIuaGVpZ2h0IC0gY29udGFpbmVyLnRvcCAtIGNvbnRhaW5lci5ib3R0b20gLSB6b29tT3B0aW9ucy5tYXJnaW4gKiAyO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHZhciB6b29tQ29udGFpbmVyID0gaXNOb2RlKHpvb21PcHRpb25zLmNvbnRhaW5lcikgPyB6b29tT3B0aW9ucy5jb250YWluZXIgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHpvb21PcHRpb25zLmNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgICAgdmFyIF96b29tQ29udGFpbmVyJGdldEJvdSA9IHpvb21Db250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIF93aWR0aCA9IF96b29tQ29udGFpbmVyJGdldEJvdS53aWR0aCwgX2hlaWdodCA9IF96b29tQ29udGFpbmVyJGdldEJvdS5oZWlnaHQsIF9sZWZ0ID0gX3pvb21Db250YWluZXIkZ2V0Qm91LmxlZnQsIF90b3AgPSBfem9vbUNvbnRhaW5lciRnZXRCb3UudG9wO1xyXG4gICAgICAgICAgICAgIGNvbnRhaW5lciA9IF9leHRlbmRzKHt9LCBjb250YWluZXIsIHtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiBfd2lkdGgsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IF9oZWlnaHQsXHJcbiAgICAgICAgICAgICAgICBsZWZ0OiBfbGVmdCxcclxuICAgICAgICAgICAgICAgIHRvcDogX3RvcFxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB2aWV3cG9ydFdpZHRoID0gdmlld3BvcnRXaWR0aCB8fCBjb250YWluZXIud2lkdGggLSB6b29tT3B0aW9ucy5tYXJnaW4gKiAyO1xyXG4gICAgICAgICAgdmlld3BvcnRIZWlnaHQgPSB2aWV3cG9ydEhlaWdodCB8fCBjb250YWluZXIuaGVpZ2h0IC0gem9vbU9wdGlvbnMubWFyZ2luICogMjtcclxuICAgICAgICAgIHZhciB6b29tVGFyZ2V0ID0gYWN0aXZlLnpvb21lZEhkIHx8IGFjdGl2ZS5vcmlnaW5hbDtcclxuICAgICAgICAgIHZhciBuYXR1cmFsV2lkdGggPSBpc1N2Zyh6b29tVGFyZ2V0KSA/IHZpZXdwb3J0V2lkdGggOiB6b29tVGFyZ2V0Lm5hdHVyYWxXaWR0aCB8fCB2aWV3cG9ydFdpZHRoO1xyXG4gICAgICAgICAgdmFyIG5hdHVyYWxIZWlnaHQgPSBpc1N2Zyh6b29tVGFyZ2V0KSA/IHZpZXdwb3J0SGVpZ2h0IDogem9vbVRhcmdldC5uYXR1cmFsSGVpZ2h0IHx8IHZpZXdwb3J0SGVpZ2h0O1xyXG4gICAgICAgICAgdmFyIF96b29tVGFyZ2V0JGdldEJvdW5kaSA9IHpvb21UYXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIHRvcCA9IF96b29tVGFyZ2V0JGdldEJvdW5kaS50b3AsIGxlZnQgPSBfem9vbVRhcmdldCRnZXRCb3VuZGkubGVmdCwgd2lkdGggPSBfem9vbVRhcmdldCRnZXRCb3VuZGkud2lkdGgsIGhlaWdodCA9IF96b29tVGFyZ2V0JGdldEJvdW5kaS5oZWlnaHQ7XHJcbiAgICAgICAgICB2YXIgc2NhbGVYID0gTWF0aC5taW4obmF0dXJhbFdpZHRoLCB2aWV3cG9ydFdpZHRoKSAvIHdpZHRoO1xyXG4gICAgICAgICAgdmFyIHNjYWxlWSA9IE1hdGgubWluKG5hdHVyYWxIZWlnaHQsIHZpZXdwb3J0SGVpZ2h0KSAvIGhlaWdodDtcclxuICAgICAgICAgIHZhciBzY2FsZSA9IE1hdGgubWluKHNjYWxlWCwgc2NhbGVZKTtcclxuICAgICAgICAgIHZhciB0cmFuc2xhdGVYID0gKC1sZWZ0ICsgKHZpZXdwb3J0V2lkdGggLSB3aWR0aCkgLyAyICsgem9vbU9wdGlvbnMubWFyZ2luICsgY29udGFpbmVyLmxlZnQpIC8gc2NhbGU7XHJcbiAgICAgICAgICB2YXIgdHJhbnNsYXRlWSA9ICgtdG9wICsgKHZpZXdwb3J0SGVpZ2h0IC0gaGVpZ2h0KSAvIDIgKyB6b29tT3B0aW9ucy5tYXJnaW4gKyBjb250YWluZXIudG9wKSAvIHNjYWxlO1xyXG4gICAgICAgICAgdmFyIHRyYW5zZm9ybSA9IFwic2NhbGUoXCIgKyBzY2FsZSArIFwiKSB0cmFuc2xhdGUzZChcIiArIHRyYW5zbGF0ZVggKyBcInB4LCBcIiArIHRyYW5zbGF0ZVkgKyBcInB4LCAwKVwiO1xyXG4gICAgICAgICAgYWN0aXZlLnpvb21lZC5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XHJcbiAgICAgICAgICBpZiAoYWN0aXZlLnpvb21lZEhkKSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZC5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xyXG4gICAgICAgICAgaWYgKHRhcmdldCAmJiBpbWFnZXMuaW5kZXhPZih0YXJnZXQpID09PSAtMSkge1xyXG4gICAgICAgICAgICByZXNvbHZlKHpvb20pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB2YXIgX2hhbmRsZU9wZW5FbmQgPSBmdW5jdGlvbiBfaGFuZGxlT3BlbkVuZCgpIHtcclxuICAgICAgICAgICAgaXNBbmltYXRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgYWN0aXZlLnpvb21lZC5yZW1vdmVFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBfaGFuZGxlT3BlbkVuZCk7XHJcbiAgICAgICAgICAgIGFjdGl2ZS5vcmlnaW5hbC5kaXNwYXRjaEV2ZW50KGNyZWF0ZUN1c3RvbUV2ZW50KFwibWVkaXVtLXpvb206b3BlbmVkXCIsIHtcclxuICAgICAgICAgICAgICBkZXRhaWw6IHtcclxuICAgICAgICAgICAgICAgIHpvb206IHpvb21cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgcmVzb2x2ZSh6b29tKTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBpZiAoYWN0aXZlLnpvb21lZCkge1xyXG4gICAgICAgICAgICByZXNvbHZlKHpvb20pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAodGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZS5vcmlnaW5hbCA9IHRhcmdldDtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoaW1hZ2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdmFyIF9pbWFnZXMgPSBpbWFnZXM7XHJcbiAgICAgICAgICAgIGFjdGl2ZS5vcmlnaW5hbCA9IF9pbWFnZXNbMF07XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXNvbHZlKHpvb20pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBhY3RpdmUub3JpZ2luYWwuZGlzcGF0Y2hFdmVudChjcmVhdGVDdXN0b21FdmVudChcIm1lZGl1bS16b29tOm9wZW5cIiwge1xyXG4gICAgICAgICAgICBkZXRhaWw6IHtcclxuICAgICAgICAgICAgICB6b29tOiB6b29tXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pKTtcclxuICAgICAgICAgIHNjcm9sbFRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wIHx8IDA7XHJcbiAgICAgICAgICBpc0FuaW1hdGluZyA9IHRydWU7XHJcbiAgICAgICAgICBhY3RpdmUuem9vbWVkID0gY2xvbmVUYXJnZXQoYWN0aXZlLm9yaWdpbmFsKTtcclxuICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQob3ZlcmxheSk7XHJcbiAgICAgICAgICBpZiAoem9vbU9wdGlvbnMudGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgdmFyIHRlbXBsYXRlID0gaXNOb2RlKHpvb21PcHRpb25zLnRlbXBsYXRlKSA/IHpvb21PcHRpb25zLnRlbXBsYXRlIDogZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih6b29tT3B0aW9ucy50ZW1wbGF0ZSk7XHJcbiAgICAgICAgICAgIGFjdGl2ZS50ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIGFjdGl2ZS50ZW1wbGF0ZS5hcHBlbmRDaGlsZCh0ZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYWN0aXZlLnRlbXBsYXRlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYWN0aXZlLnpvb21lZCk7XHJcbiAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJtZWRpdW0tem9vbS0tb3BlbmVkXCIpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBhY3RpdmUub3JpZ2luYWwuY2xhc3NMaXN0LmFkZChcIm1lZGl1bS16b29tLWltYWdlLS1oaWRkZW5cIik7XHJcbiAgICAgICAgICBhY3RpdmUuem9vbWVkLmNsYXNzTGlzdC5hZGQoXCJtZWRpdW0tem9vbS1pbWFnZS0tb3BlbmVkXCIpO1xyXG4gICAgICAgICAgYWN0aXZlLnpvb21lZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2UpO1xyXG4gICAgICAgICAgYWN0aXZlLnpvb21lZC5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBfaGFuZGxlT3BlbkVuZCk7XHJcbiAgICAgICAgICBpZiAoYWN0aXZlLm9yaWdpbmFsLmdldEF0dHJpYnV0ZShcImRhdGEtem9vbS1zcmNcIikpIHtcclxuICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkID0gYWN0aXZlLnpvb21lZC5jbG9uZU5vZGUoKTtcclxuICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkLnJlbW92ZUF0dHJpYnV0ZShcInNyY3NldFwiKTtcclxuICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkLnJlbW92ZUF0dHJpYnV0ZShcInNpemVzXCIpO1xyXG4gICAgICAgICAgICBhY3RpdmUuem9vbWVkSGQuc3JjID0gYWN0aXZlLnpvb21lZC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXpvb20tc3JjXCIpO1xyXG4gICAgICAgICAgICBhY3RpdmUuem9vbWVkSGQub25lcnJvciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoZ2V0Wm9vbVRhcmdldFNpemUpO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlVuYWJsZSB0byByZWFjaCB0aGUgem9vbSBpbWFnZSB0YXJnZXQgXCIgKyBhY3RpdmUuem9vbWVkSGQuc3JjKTtcclxuICAgICAgICAgICAgICBhY3RpdmUuem9vbWVkSGQgPSBudWxsO1xyXG4gICAgICAgICAgICAgIF9hbmltYXRlKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBnZXRab29tVGFyZ2V0U2l6ZSA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGlmIChhY3RpdmUuem9vbWVkSGQuY29tcGxldGUpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoZ2V0Wm9vbVRhcmdldFNpemUpO1xyXG4gICAgICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkLmNsYXNzTGlzdC5hZGQoXCJtZWRpdW0tem9vbS1pbWFnZS0tb3BlbmVkXCIpO1xyXG4gICAgICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZSk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGFjdGl2ZS56b29tZWRIZCk7XHJcbiAgICAgICAgICAgICAgICBfYW5pbWF0ZSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgMTApO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChhY3RpdmUub3JpZ2luYWwuaGFzQXR0cmlidXRlKFwic3Jjc2V0XCIpKSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZCA9IGFjdGl2ZS56b29tZWQuY2xvbmVOb2RlKCk7XHJcbiAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZC5yZW1vdmVBdHRyaWJ1dGUoXCJzaXplc1wiKTtcclxuICAgICAgICAgICAgdmFyIGxvYWRFdmVudExpc3RlbmVyID0gYWN0aXZlLnpvb21lZEhkLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZC5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLCBsb2FkRXZlbnRMaXN0ZW5lcik7XHJcbiAgICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkLmNsYXNzTGlzdC5hZGQoXCJtZWRpdW0tem9vbS1pbWFnZS0tb3BlbmVkXCIpO1xyXG4gICAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2UpO1xyXG4gICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYWN0aXZlLnpvb21lZEhkKTtcclxuICAgICAgICAgICAgICBfYW5pbWF0ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIF9hbmltYXRlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcbiAgICAgIHZhciBjbG9zZSA9IGZ1bmN0aW9uIGNsb3NlKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7XHJcbiAgICAgICAgICBpZiAoaXNBbmltYXRpbmcgfHwgIWFjdGl2ZS5vcmlnaW5hbCkge1xyXG4gICAgICAgICAgICByZXNvbHZlKHpvb20pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB2YXIgX2hhbmRsZUNsb3NlRW5kID0gZnVuY3Rpb24gX2hhbmRsZUNsb3NlRW5kKCkge1xyXG4gICAgICAgICAgICBhY3RpdmUub3JpZ2luYWwuY2xhc3NMaXN0LnJlbW92ZShcIm1lZGl1bS16b29tLWltYWdlLS1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYWN0aXZlLnpvb21lZCk7XHJcbiAgICAgICAgICAgIGlmIChhY3RpdmUuem9vbWVkSGQpIHtcclxuICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGFjdGl2ZS56b29tZWRIZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChvdmVybGF5KTtcclxuICAgICAgICAgICAgYWN0aXZlLnpvb21lZC5jbGFzc0xpc3QucmVtb3ZlKFwibWVkaXVtLXpvb20taW1hZ2UtLW9wZW5lZFwiKTtcclxuICAgICAgICAgICAgaWYgKGFjdGl2ZS50ZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYWN0aXZlLnRlbXBsYXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpc0FuaW1hdGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBhY3RpdmUuem9vbWVkLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIF9oYW5kbGVDbG9zZUVuZCk7XHJcbiAgICAgICAgICAgIGFjdGl2ZS5vcmlnaW5hbC5kaXNwYXRjaEV2ZW50KGNyZWF0ZUN1c3RvbUV2ZW50KFwibWVkaXVtLXpvb206Y2xvc2VkXCIsIHtcclxuICAgICAgICAgICAgICBkZXRhaWw6IHtcclxuICAgICAgICAgICAgICAgIHpvb206IHpvb21cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgYWN0aXZlLm9yaWdpbmFsID0gbnVsbDtcclxuICAgICAgICAgICAgYWN0aXZlLnpvb21lZCA9IG51bGw7XHJcbiAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZCA9IG51bGw7XHJcbiAgICAgICAgICAgIGFjdGl2ZS50ZW1wbGF0ZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHJlc29sdmUoem9vbSk7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgaXNBbmltYXRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKFwibWVkaXVtLXpvb20tLW9wZW5lZFwiKTtcclxuICAgICAgICAgIGFjdGl2ZS56b29tZWQuc3R5bGUudHJhbnNmb3JtID0gXCJcIjtcclxuICAgICAgICAgIGlmIChhY3RpdmUuem9vbWVkSGQpIHtcclxuICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkLnN0eWxlLnRyYW5zZm9ybSA9IFwiXCI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoYWN0aXZlLnRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZS50ZW1wbGF0ZS5zdHlsZS50cmFuc2l0aW9uID0gXCJvcGFjaXR5IDE1MG1zXCI7XHJcbiAgICAgICAgICAgIGFjdGl2ZS50ZW1wbGF0ZS5zdHlsZS5vcGFjaXR5ID0gMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGFjdGl2ZS5vcmlnaW5hbC5kaXNwYXRjaEV2ZW50KGNyZWF0ZUN1c3RvbUV2ZW50KFwibWVkaXVtLXpvb206Y2xvc2VcIiwge1xyXG4gICAgICAgICAgICBkZXRhaWw6IHtcclxuICAgICAgICAgICAgICB6b29tOiB6b29tXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pKTtcclxuICAgICAgICAgIGFjdGl2ZS56b29tZWQuYWRkRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgX2hhbmRsZUNsb3NlRW5kKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuICAgICAgdmFyIHRvZ2dsZSA9IGZ1bmN0aW9uIHRvZ2dsZSgpIHtcclxuICAgICAgICB2YXIgX3JlZjMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LCB0YXJnZXQgPSBfcmVmMy50YXJnZXQ7XHJcbiAgICAgICAgaWYgKGFjdGl2ZS5vcmlnaW5hbCkge1xyXG4gICAgICAgICAgcmV0dXJuIGNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvcGVuKHtcclxuICAgICAgICAgIHRhcmdldDogdGFyZ2V0XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcbiAgICAgIHZhciBnZXRPcHRpb25zID0gZnVuY3Rpb24gZ2V0T3B0aW9ucygpIHtcclxuICAgICAgICByZXR1cm4gem9vbU9wdGlvbnM7XHJcbiAgICAgIH07XHJcbiAgICAgIHZhciBnZXRJbWFnZXMgPSBmdW5jdGlvbiBnZXRJbWFnZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIGltYWdlcztcclxuICAgICAgfTtcclxuICAgICAgdmFyIGdldFpvb21lZEltYWdlID0gZnVuY3Rpb24gZ2V0Wm9vbWVkSW1hZ2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIGFjdGl2ZS5vcmlnaW5hbDtcclxuICAgICAgfTtcclxuICAgICAgdmFyIGltYWdlcyA9IFtdO1xyXG4gICAgICB2YXIgZXZlbnRMaXN0ZW5lcnMgPSBbXTtcclxuICAgICAgdmFyIGlzQW5pbWF0aW5nID0gZmFsc2U7XHJcbiAgICAgIHZhciBzY3JvbGxUb3AgPSAwO1xyXG4gICAgICB2YXIgem9vbU9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICB2YXIgYWN0aXZlID0ge1xyXG4gICAgICAgIG9yaWdpbmFsOiBudWxsLFxyXG4gICAgICAgIHpvb21lZDogbnVsbCxcclxuICAgICAgICB6b29tZWRIZDogbnVsbCxcclxuICAgICAgICB0ZW1wbGF0ZTogbnVsbFxyXG4gICAgICB9O1xyXG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHNlbGVjdG9yKSA9PT0gXCJbb2JqZWN0IE9iamVjdF1cIikge1xyXG4gICAgICAgIHpvb21PcHRpb25zID0gc2VsZWN0b3I7XHJcbiAgICAgIH0gZWxzZSBpZiAoc2VsZWN0b3IgfHwgdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgYXR0YWNoKHNlbGVjdG9yKTtcclxuICAgICAgfVxyXG4gICAgICB6b29tT3B0aW9ucyA9IF9leHRlbmRzKHtcclxuICAgICAgICBtYXJnaW46IDAsXHJcbiAgICAgICAgYmFja2dyb3VuZDogXCIjZmZmXCIsXHJcbiAgICAgICAgc2Nyb2xsT2Zmc2V0OiA0MCxcclxuICAgICAgICBjb250YWluZXI6IG51bGwsXHJcbiAgICAgICAgdGVtcGxhdGU6IG51bGxcclxuICAgICAgfSwgem9vbU9wdGlvbnMpO1xyXG4gICAgICB2YXIgb3ZlcmxheSA9IGNyZWF0ZU92ZXJsYXkoem9vbU9wdGlvbnMuYmFja2dyb3VuZCk7XHJcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBfaGFuZGxlQ2xpY2spO1xyXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgX2hhbmRsZUtleVVwKTtcclxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBfaGFuZGxlU2Nyb2xsKTtcclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgY2xvc2UpO1xyXG4gICAgICB2YXIgem9vbSA9IHtcclxuICAgICAgICBvcGVuOiBvcGVuLFxyXG4gICAgICAgIGNsb3NlOiBjbG9zZSxcclxuICAgICAgICB0b2dnbGU6IHRvZ2dsZSxcclxuICAgICAgICB1cGRhdGU6IHVwZGF0ZSxcclxuICAgICAgICBjbG9uZTogY2xvbmUsXHJcbiAgICAgICAgYXR0YWNoOiBhdHRhY2gsXHJcbiAgICAgICAgZGV0YWNoOiBkZXRhY2gsXHJcbiAgICAgICAgb246IG9uLFxyXG4gICAgICAgIG9mZjogb2ZmLFxyXG4gICAgICAgIGdldE9wdGlvbnM6IGdldE9wdGlvbnMsXHJcbiAgICAgICAgZ2V0SW1hZ2VzOiBnZXRJbWFnZXMsXHJcbiAgICAgICAgZ2V0Wm9vbWVkSW1hZ2U6IGdldFpvb21lZEltYWdlXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiB6b29tO1xyXG4gICAgfTtcclxuICAgIGZ1bmN0aW9uIHN0eWxlSW5qZWN0KGNzcywgcmVmKSB7XHJcbiAgICAgIGlmIChyZWYgPT09IHZvaWQgMCkgcmVmID0ge307XHJcbiAgICAgIHZhciBpbnNlcnRBdCA9IHJlZi5pbnNlcnRBdDtcclxuICAgICAgaWYgKCFjc3MgfHwgdHlwZW9mIGRvY3VtZW50ID09PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBoZWFkID0gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07XHJcbiAgICAgIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcclxuICAgICAgc3R5bGUudHlwZSA9IFwidGV4dC9jc3NcIjtcclxuICAgICAgaWYgKGluc2VydEF0ID09PSBcInRvcFwiKSB7XHJcbiAgICAgICAgaWYgKGhlYWQuZmlyc3RDaGlsZCkge1xyXG4gICAgICAgICAgaGVhZC5pbnNlcnRCZWZvcmUoc3R5bGUsIGhlYWQuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBoZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xyXG4gICAgICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdmFyIGNzcyA9IFwiLm1lZGl1bS16b29tLW92ZXJsYXl7cG9zaXRpb246Zml4ZWQ7dG9wOjA7cmlnaHQ6MDtib3R0b206MDtsZWZ0OjA7b3BhY2l0eTowO3RyYW5zaXRpb246b3BhY2l0eSAuM3M7d2lsbC1jaGFuZ2U6b3BhY2l0eX0ubWVkaXVtLXpvb20tLW9wZW5lZCAubWVkaXVtLXpvb20tb3ZlcmxheXtjdXJzb3I6cG9pbnRlcjtjdXJzb3I6em9vbS1vdXQ7b3BhY2l0eToxfS5tZWRpdW0tem9vbS1pbWFnZXtjdXJzb3I6cG9pbnRlcjtjdXJzb3I6em9vbS1pbjt0cmFuc2l0aW9uOnRyYW5zZm9ybSAuM3MgY3ViaWMtYmV6aWVyKC4yLDAsLjIsMSl9Lm1lZGl1bS16b29tLWltYWdlLS1oaWRkZW57dmlzaWJpbGl0eTpoaWRkZW59Lm1lZGl1bS16b29tLWltYWdlLS1vcGVuZWR7cG9zaXRpb246cmVsYXRpdmU7Y3Vyc29yOnBvaW50ZXI7Y3Vyc29yOnpvb20tb3V0O3dpbGwtY2hhbmdlOnRyYW5zZm9ybX1cIjtcclxuICAgIHN0eWxlSW5qZWN0KGNzcyk7XHJcbiAgICByZXR1cm4gbWVkaXVtWm9vbTtcclxuICB9KTtcclxuKCgpID0+IHtcclxuICAgIGxldFxyXG4gICAgICAgIHN3aXBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vdGhlci1zZXJ2aWNlc19fc3dpcGVyJyksXHJcbiAgICAgICAgc3dpcGVyTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vdGhlci1zZXJ2aWNlc19fbGlzdCcpLFxyXG4gICAgICAgIHN3aXBlcldpZHRoID0gcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZShzd2lwZXIpLndpZHRoKSxcclxuICAgICAgICBzd2lwZXJMaXN0V2lkdGggPSBwYXJzZUludChnZXRDb21wdXRlZFN0eWxlKHN3aXBlckxpc3QpLndpZHRoKTtcclxuXHJcblxyXG4gICAgd2luZG93Lm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICBsZXQgaGVpZ2h0T2ZTd2lwZXIgPSBnZXRDb21wdXRlZFN0eWxlKHN3aXBlcikuaGVpZ2h0O1xyXG4gICAgICAgIHN3aXBlci5zdHlsZS5oZWlnaHQgPSBgJHtwYXJzZUludChoZWlnaHRPZlN3aXBlcikgKyA0MH1weGA7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHN3aXBlckxpc3Quc3R5bGUubWFyZ2luTGVmdCA9ICcwcHgnO1xyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBzd2lwZShldmVudCkge1xyXG5cclxuICAgICAgICBzd2lwZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHN3aXRjaE9mZlN3aXBlcik7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHN3aXRjaE9mZlN3aXBlcigpIHtcclxuICAgICAgICAgICAgc3dpcGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHN3aXBlTW91c2VNb3ZlT24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3dpcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBzd2lwZU1vdXNlTW92ZU9mZik7XHJcblxyXG4gICAgICAgIGxldFxyXG4gICAgICAgICAgICBmaXJzdEN1cnNvclBvc2l0aW9uID0gZXZlbnQucGFnZVgsXHJcbiAgICAgICAgICAgIGluaXRpYWxDdXJzb3JQb3NpdGlvbiA9IGV2ZW50LnBhZ2VYLFxyXG4gICAgICAgICAgICBzdW1tU3dpcGVEaXN0YW5jZSA9IDAsXHJcbiAgICAgICAgICAgIHdheVRvV2hpY2hTd2lwZUlzTWFkZSxcclxuICAgICAgICAgICAgc3dpcGVMaXN0TWFyZ2luTGVmdCxcclxuICAgICAgICAgICAgaXNGYXN0U3dpcGUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgc3dpcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHN3aXBlTW91c2VNb3ZlT24pO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzd2lwZU1vdXNlTW92ZU9uKGV2ZW50KSB7XHJcblxyXG4gICAgICAgICAgICBsZXRcclxuICAgICAgICAgICAgICAgIG5ld0N1cnNvclBvc2l0aW9uID0gZXZlbnQucGFnZVgsXHJcbiAgICAgICAgICAgICAgICBzd2lwZURpc3RhbmNlID0gTWF0aC5hYnMoaW5pdGlhbEN1cnNvclBvc2l0aW9uIC0gbmV3Q3Vyc29yUG9zaXRpb24pO1xyXG5cclxuICAgICAgICAgICAgc3dpcGVMaXN0TWFyZ2luTGVmdCA9IHBhcnNlSW50KHN3aXBlckxpc3Quc3R5bGUubWFyZ2luTGVmdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAobmV3Q3Vyc29yUG9zaXRpb24gPCBpbml0aWFsQ3Vyc29yUG9zaXRpb24pIHdheVRvV2hpY2hTd2lwZUlzTWFkZSA9ICdsZWZ0JztcclxuICAgICAgICAgICAgZWxzZSBpZiAobmV3Q3Vyc29yUG9zaXRpb24gPiBpbml0aWFsQ3Vyc29yUG9zaXRpb24pIHdheVRvV2hpY2hTd2lwZUlzTWFkZSA9ICdyaWdodCc7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG5ld0N1cnNvclBvc2l0aW9uID0gaW5pdGlhbEN1cnNvclBvc2l0aW9uKSB3YXlUb1doaWNoU3dpcGVJc01hZGUgPSB3YXlUb1doaWNoU3dpcGVJc01hZGU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBzd2l0Y2god2F5VG9XaGljaFN3aXBlSXNNYWRlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdsZWZ0JzpcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKC1zd2lwZUxpc3RNYXJnaW5MZWZ0ID49IChzd2lwZXJMaXN0V2lkdGggLSBzd2lwZXJXaWR0aCkpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICBzd2lwZXJMaXN0LnN0eWxlLm1hcmdpbkxlZnQgPSBgJHtzd2lwZUxpc3RNYXJnaW5MZWZ0IC0gc3dpcGVEaXN0YW5jZX1weGA7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzd2lwZUxpc3RNYXJnaW5MZWZ0ID49IDAgKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpcGVyTGlzdC5zdHlsZS5tYXJnaW5MZWZ0ID0gYCR7c3dpcGVMaXN0TWFyZ2luTGVmdCArIHN3aXBlRGlzdGFuY2V9cHhgO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzdW1tU3dpcGVEaXN0YW5jZSArPSBzd2lwZURpc3RhbmNlO1xyXG4gICAgICAgICAgICBpbml0aWFsQ3Vyc29yUG9zaXRpb24gPSBuZXdDdXJzb3JQb3NpdGlvbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHN3aXBlTW91c2VNb3ZlT2ZmKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHN3aXBlci5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBzd2lwZU1vdXNlTW92ZU9uKTtcclxuXHJcbiAgICAgICAgICAgIGlzRmFzdFN3aXBlID0gKHN1bW1Td2lwZURpc3RhbmNlID49IDEwMCkgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICghaXNGYXN0U3dpcGUpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHN1bW1Td2lwZURpc3RhbmNlID0gKHN1bW1Td2lwZURpc3RhbmNlID4gKHN3aXBlckxpc3RXaWR0aCAtIHN3aXBlcldpZHRoKSkgPyAoc3dpcGVyTGlzdFdpZHRoIC0gc3dpcGVyV2lkdGgpIDogc3VtbVN3aXBlRGlzdGFuY2U7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBsZXQgYWRkaXRpb25hbFN3aXBlRGlzdGFuY2UgPSAoc3VtbVN3aXBlRGlzdGFuY2UgLyAxLjUpOyAvLyA8LS0tLSBjaGFuZ2Ugc3dpcGUgc3BlZWQsIGZvciBleGFtcGxlOiAoc3VtbVN3aXBlRGlzdGFuY2UgLyAyLjUpXHJcblxyXG5cclxuICAgICAgICAgICAgbGV0IGxhc3RDdXJzb3JQb3NpdGlvbiA9IGV2ZW50LnBhZ2VYO1xyXG4gICAgICAgICAgICB3YXlUb1doaWNoU3dpcGVJc01hZGUgPSAobGFzdEN1cnNvclBvc2l0aW9uIDwgZmlyc3RDdXJzb3JQb3NpdGlvbikgPyAnbGVmdCcgOiAncmlnaHQnO1xyXG5cclxuICAgICAgICAgICAgc3dpcGVMaXN0TWFyZ2luTGVmdCA9IHBhcnNlSW50KHN3aXBlckxpc3Quc3R5bGUubWFyZ2luTGVmdCk7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2god2F5VG9XaGljaFN3aXBlSXNNYWRlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdsZWZ0JzpcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKC1zd2lwZUxpc3RNYXJnaW5MZWZ0ID49IChzd2lwZXJMaXN0V2lkdGggLSBzd2lwZXJXaWR0aCkpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBhZGRpdGlvbmFsU3dpcGVEaXN0YW5jZSA9IChhZGRpdGlvbmFsU3dpcGVEaXN0YW5jZSA+ICgoc3dpcGVyTGlzdFdpZHRoIC0gc3dpcGVyV2lkdGgpICsgc3dpcGVMaXN0TWFyZ2luTGVmdCkpID8gKChzd2lwZXJMaXN0V2lkdGggLSBzd2lwZXJXaWR0aCkgKyBzd2lwZUxpc3RNYXJnaW5MZWZ0KSA6IGFkZGl0aW9uYWxTd2lwZURpc3RhbmNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzd2lwZXJMaXN0LnN0eWxlLnRyYW5zaXRpb24gPSAnYWxsIDAuMzVzJztcclxuICAgICAgICAgICAgICAgICAgICBzd2lwZXJMaXN0LnN0eWxlLm1hcmdpbkxlZnQgPSBgJHtzd2lwZUxpc3RNYXJnaW5MZWZ0IC0gYWRkaXRpb25hbFN3aXBlRGlzdGFuY2V9cHhgO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3dpcGVMaXN0TWFyZ2luTGVmdCA+PSAwICkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBhZGRpdGlvbmFsU3dpcGVEaXN0YW5jZSA9IChhZGRpdGlvbmFsU3dpcGVEaXN0YW5jZSA+IC1zd2lwZUxpc3RNYXJnaW5MZWZ0KSA/IC1zd2lwZUxpc3RNYXJnaW5MZWZ0IDogYWRkaXRpb25hbFN3aXBlRGlzdGFuY2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHN3aXBlckxpc3Quc3R5bGUudHJhbnNpdGlvbiA9ICdhbGwgMC4zNXMnO1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXBlckxpc3Quc3R5bGUubWFyZ2luTGVmdCA9IGAke3N3aXBlTGlzdE1hcmdpbkxlZnQgKyBhZGRpdGlvbmFsU3dpcGVEaXN0YW5jZX1weGA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc3dpcGVyTGlzdC5zdHlsZS50cmFuc2l0aW9uID0gJ2FsbCAwcyc7XHJcbiAgICAgICAgICAgIH0sIDI1MCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBzd2lwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHN3aXBlTW91c2VNb3ZlT2ZmKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3dpcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHN3aXBlKTtcclxufSkoKTtcclxuKCgpID0+IHtcclxuICBjb25zdCBtb2RhbFRyaWdnZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnKltkYXRhLW1vZGFsLXRhcmdldF0nKTtcclxuICBjb25zdCBjbG9zZU1vZGFsQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJypbZGF0YS1tb2RhbC1jbG9zZV0nKTtcclxuICBsZXQgb3BlbmVkTW9kYWxJRDtcclxuXHJcbiAgY29uc3Qgb3Blbk1vZGFsV2luZG93ID0gKGV2dCkgPT4ge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZ0LmN1cnJlbnRUYXJnZXQ7XHJcbiAgICBjb25zdCBtb2RhbElEID0gdGFyZ2V0LmRhdGFzZXQubW9kYWxUYXJnZXQ7XHJcbiAgICBjb25zdCB0YXJnZXRNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1vZGFsSUQpO1xyXG5cclxuICAgIChvcGVuZWRNb2RhbElEICE9PSB1bmRlZmluZWQpID8gY2xvc2VNb2RhbFdpbmRvdyhvcGVuZWRNb2RhbElEKSA6IG51bGw7XHJcblxyXG4gICAgKG1vZGFsSUQgPT09ICdzZXJ2aWNlLWV4YW1wbGUnKSA/IGNyZWF0ZVNlcnZpY2VFeGFtcGxlTW9kYWwodGFyZ2V0LCB0YXJnZXRNb2RhbCkgOiBudWxsO1xyXG5cclxuICAgIG9wZW5lZE1vZGFsSUQgPSBtb2RhbElEO1xyXG5cclxuICAgIHRhcmdldE1vZGFsLmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5jbGFzc0xpc3QuYWRkKCdmaXhlZCcpO1xyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlTW9kYWxCeUJhY2tncm91bmQpO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBjbG9zZU1vZGFsQnlFc2MpO1xyXG5cclxuICAgIGNvbnN0XHJcbiAgICAgIGZvY3VzYWJsZUVsZW1lbnRzID0gdGFyZ2V0TW9kYWwucXVlcnlTZWxlY3RvckFsbCgnYVtocmVmXTpub3QoW2Rpc2FibGVkXSksIGJ1dHRvbjpub3QoW2Rpc2FibGVkXSksIHRleHRhcmVhOm5vdChbZGlzYWJsZWRdKSwgaW5wdXRbdHlwZT1cInRleHRcIl06bm90KFtkaXNhYmxlZF0pLCBpbnB1dFt0eXBlPVwicmFkaW9cIl06bm90KFtkaXNhYmxlZF0pLCBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl06bm90KFtkaXNhYmxlZF0pLCBzZWxlY3Q6bm90KFtkaXNhYmxlZF0pJyksXHJcbiAgICAgIGZpcnN0Rm9jdXNhYmxlRWxlbWVudCA9IGZvY3VzYWJsZUVsZW1lbnRzWzBdLFxyXG4gICAgICBsYXN0Rm9jdXNhYmxlRWxlbWVudCA9IGZvY3VzYWJsZUVsZW1lbnRzW2ZvY3VzYWJsZUVsZW1lbnRzLmxlbmd0aCAtIDFdO1xyXG5cclxuICAgIGZ1bmN0aW9uIGxvY2tGb2N1c0luTW9kYWwoZXZlbnQpIHtcclxuICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ1RhYicgfHwgZXZlbnQua2V5Q29kZSA9PT0gOSkge1xyXG4gICAgICAgIGlmIChldmVudC5zaGlmdEtleSkge1xyXG4gICAgICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGZpcnN0Rm9jdXNhYmxlRWxlbWVudCkge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBsYXN0Rm9jdXNhYmxlRWxlbWVudC5mb2N1cygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gbGFzdEZvY3VzYWJsZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgIFxyXG4gICAgICAgICAgICBmaXJzdEZvY3VzYWJsZUVsZW1lbnQuZm9jdXMoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0YXJnZXRNb2RhbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgbG9ja0ZvY3VzSW5Nb2RhbCk7XHJcblxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNsb3NlTW9kYWxCeUVzYyA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgICBjbG9zZU1vZGFsV2luZG93KG9wZW5lZE1vZGFsSUQpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNsb3NlTW9kYWxCeUJhY2tncm91bmQgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGFsX19iZycpKSB7XHJcbiAgICAgIGNsb3NlTW9kYWxXaW5kb3cob3BlbmVkTW9kYWxJRCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgY2xvc2VNb2RhbEJ5QnV0dG9uID0gKGV2dCkgPT4gY2xvc2VNb2RhbFdpbmRvdyhldnQuY3VycmVudFRhcmdldC5kYXRhc2V0Lm1vZGFsQ2xvc2UpO1xyXG5cclxuICBjb25zdCBjbG9zZU1vZGFsV2luZG93ID0gKG1vZGFsSUQpID0+IHtcclxuICAgIGNvbnN0IHRhcmdldE1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobW9kYWxJRCk7XHJcblxyXG4gICAgdGFyZ2V0TW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmNsYXNzTGlzdC5yZW1vdmUoJ2ZpeGVkJyk7XHJcblxyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VNb2RhbEJ5QmFja2dyb3VuZCk7XHJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGNsb3NlTW9kYWxCeUVzYyk7XHJcbiAgICAvLyB0YXJnZXRNb2RhbC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgbG9ja0ZvY3VzSW5Nb2RhbCk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaW5pdGlhbGl6ZU1vZGFsVHJpZ2dlcnMgPSAoKSA9PiB7XHJcbiAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiBtb2RhbFRyaWdnZXJzKSB7XHJcbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5Nb2RhbFdpbmRvdyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY2xvc2VNb2RhbEJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4gYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VNb2RhbEJ5QnV0dG9uKSk7XHJcblxyXG4gIHdpbmRvdy5tb2RhbHMgPSB7XHJcbiAgICBvcGVuTW9kYWxXaW5kb3c6IG9wZW5Nb2RhbFdpbmRvdyxcclxuICAgIGNsb3NlTW9kYWxXaW5kb3c6IGNsb3NlTW9kYWxXaW5kb3csXHJcbiAgfTtcclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlU2VydmljZUV4YW1wbGVNb2RhbCh0YXJnZXQsIHRhcmdldE1vZGFsKSB7XHJcbiAgICBjb25zdFxyXG4gICAgICBzZXJ2aWNlVGl0bGUgPSB0YXJnZXQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcud2hhdC15b3UtZ2V0X19pdGVtLXRpdGxlJykudGV4dENvbnRlbnQucmVwbGFjZSgvXFxzKy9nLCcgJykudHJpbSgpLFxyXG4gICAgICBtb2RhbFRpdGxlID0gdGFyZ2V0TW9kYWwucXVlcnlTZWxlY3RvcignLm1vZGFsX190aXRsZScpLFxyXG4gICAgICBwYXRoVG9JbWFnZSA9IHRhcmdldC5kYXRhc2V0Lm1vZGFsU2VydmljZUV4YW1wbGVJbWFnZSxcclxuICAgICAgbW9kYWxJbWFnZSA9IHRhcmdldE1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9faW1hZ2UnKTtcclxuICAgIFxyXG4gICAgbW9kYWxUaXRsZS50ZXh0Q29udGVudCA9IHNlcnZpY2VUaXRsZTtcclxuICAgIG1vZGFsSW1hZ2Uuc3JjID0gcGF0aFRvSW1hZ2U7XHJcbiAgfVxyXG5cclxuICBpbml0aWFsaXplTW9kYWxUcmlnZ2VycygpO1xyXG5cclxufSkoKTtcclxuKCgpID0+IHtcclxuICBjb25zdCBzY3JvbGxpbmdMaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJypbZGF0YS1zY3JvbGwtbGlua10nKTtcclxuXHJcbiAgY29uc3Qgc2Nyb2xsVG9FbGVtZW50ID0gKGV2dCkgPT4ge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZ0LnRhcmdldDtcclxuICAgIGNvbnN0IHNjcm9sbFRvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0LmRhdGFzZXQuc2Nyb2xsTGluayk7XHJcblxyXG4gICAgaWYgKHNjcm9sbFRvKSB7XHJcbiAgICAgIHNjcm9sbFRvLnNjcm9sbEludG9WaWV3KHtcclxuICAgICAgICBiZWhhdmlvcjogJ3Ntb290aCdcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgaWYoQm9vbGVhbihzY3JvbGxpbmdMaW5rcykpIHtcclxuICAgIHNjcm9sbGluZ0xpbmtzLmZvckVhY2gobGluayA9PiBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2Nyb2xsVG9FbGVtZW50KSk7XHJcbiAgfVxyXG59KSgpO1xyXG4oKCkgPT4ge1xyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uKCkge1xyXG4gIHZhciBsYXp5UGljdHVyZXMgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJwaWN0dXJlLmxhenlcIikpO1xyXG5cclxuICBpZiAoXCJJbnRlcnNlY3Rpb25PYnNlcnZlclwiIGluIHdpbmRvdykge1xyXG4gICAgbGV0IGxhenlQaWN0dXJlT2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oZW50cmllcywgb2JzZXJ2ZXIpIHtcclxuICAgICAgZW50cmllcy5mb3JFYWNoKGZ1bmN0aW9uKGVudHJ5KSB7XHJcbiAgICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7XHJcbiAgICAgICAgICBsZXQgbGF6eVBpY3R1cmUgPSBlbnRyeS50YXJnZXQ7XHJcbiAgICAgICAgICBsZXQgbGF6eVdlYnBJbWFnZSA9IGxhenlQaWN0dXJlLnF1ZXJ5U2VsZWN0b3IoJ1t0eXBlPVwiaW1hZ2Uvd2VicFwiXScpO1xyXG4gICAgICAgICAgbGV0IGxhenlJbWFnZSA9IGxhenlQaWN0dXJlLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBsYXp5V2VicEltYWdlLnNyY3NldCA9IGxhenlXZWJwSW1hZ2UuZGF0YXNldC5zcmM7XHJcbiAgICAgICAgICBsYXp5SW1hZ2Uuc3JjID0gbGF6eUltYWdlLmRhdGFzZXQuc3JjO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBsYXp5UGljdHVyZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtcGljdHVyZScsICdvcGFjaXR5LTEnKTtcclxuICAgICAgICAgIGxhenlQaWN0dXJlLmNsYXNzTGlzdC5yZW1vdmUoXCJsYXp5XCIpO1xyXG4gICAgICAgICAgbGF6eVBpY3R1cmVPYnNlcnZlci51bm9ic2VydmUobGF6eVBpY3R1cmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBsYXp5UGljdHVyZXMuZm9yRWFjaChmdW5jdGlvbihsYXp5UGljdHVyZSkge1xyXG4gICAgICBsYXp5UGljdHVyZU9ic2VydmVyLm9ic2VydmUobGF6eVBpY3R1cmUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59KTtcclxufSkoKTtcclxuXHJcbm1lZGl1bVpvb20oJ1tkYXRhLXpvb21hYmxlXScpOyJdfQ==
