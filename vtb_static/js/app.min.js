"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):window.mediumZoom=t()}(0,function(){var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},t=function(e){return"IMG"===e.tagName},o=function(e){return e&&1===e.nodeType},n=function(e){return".svg"===(e.currentSrc||e.src).substr(-4).toLowerCase()},i=function(e){try{return Array.isArray(e)?e.filter(t):function(e){return NodeList.prototype.isPrototypeOf(e)}(e)?[].slice.call(e).filter(t):o(e)?[e].filter(t):"string"==typeof e?[].slice.call(document.querySelectorAll(e)).filter(t):[]}catch(e){throw new TypeError("The provided selector is invalid.\nExpects a CSS selector, a Node element, a NodeList or an array.\nSee: https://github.com/francoischalifour/medium-zoom")}},r=function(t,o){var n=e({bubbles:!1,cancelable:!1,detail:void 0},o);if("function"==typeof window.CustomEvent)return new CustomEvent(t,n);var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),i};return function(e,t){void 0===t&&(t={});var o=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===o&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}"),function t(d){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=window.Promise||function(e){function t(){}e(t,t)},l=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];var n=t.reduce(function(e,t){return[].concat(e,i(t))},[]);return n.filter(function(e){return-1===f.indexOf(e)}).forEach(function(e){f.push(e),e.classList.add("medium-zoom-image")}),p.forEach(function(e){var t=e.type,o=e.listener,i=e.options;n.forEach(function(e){e.addEventListener(t,o,i)})}),b},m=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target,i=function(){var t={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},i=void 0,r=void 0;if(y.container)if(y.container instanceof Object)i=(t=e({},t,y.container)).width-t.left-t.right-2*y.margin,r=t.height-t.top-t.bottom-2*y.margin;else{var d=(o(y.container)?y.container:document.querySelector(y.container)).getBoundingClientRect(),a=d.width,c=d.height,l=d.left,m=d.top;t=e({},t,{width:a,height:c,left:l,top:m})}i=i||t.width-2*y.margin,r=r||t.height-2*y.margin;var s=h.zoomedHd||h.original,u=n(s)?i:s.naturalWidth||i,f=n(s)?r:s.naturalHeight||r,p=s.getBoundingClientRect(),v=p.top,g=p.left,z=p.width,b=p.height,E=Math.min(u,i)/z,w=Math.min(f,r)/b,L=Math.min(E,w),S="scale("+L+") translate3d("+((i-z)/2-g+y.margin+t.left)/L+"px, "+((r-b)/2-v+y.margin+t.top)/L+"px, 0)";h.zoomed.style.transform=S,h.zoomedHd&&(h.zoomedHd.style.transform=S)};return new c(function(e){if(t&&-1===f.indexOf(t))e(b);else if(h.zoomed)e(b);else{if(t)h.original=t;else{if(!(f.length>0))return void e(b);var n=f;h.original=n[0]}if(h.original.dispatchEvent(r("medium-zoom:open",{detail:{zoom:b}})),g=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,v=!0,h.zoomed=function(e){var t=e.getBoundingClientRect(),o=t.top,n=t.left,i=t.width,r=t.height,d=e.cloneNode(),a=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,c=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return d.removeAttribute("id"),d.style.position="absolute",d.style.top=o+a+"px",d.style.left=n+c+"px",d.style.width=i+"px",d.style.height=r+"px",d.style.transform="",d}(h.original),document.body.appendChild(z),y.template){var d=o(y.template)?y.template:document.querySelector(y.template);h.template=document.createElement("div"),h.template.appendChild(d.content.cloneNode(!0)),document.body.appendChild(h.template)}if(document.body.appendChild(h.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),h.original.classList.add("medium-zoom-image--hidden"),h.zoomed.classList.add("medium-zoom-image--opened"),h.zoomed.addEventListener("click",s),h.zoomed.addEventListener("transitionend",function t(){v=!1,h.zoomed.removeEventListener("transitionend",t),h.original.dispatchEvent(r("medium-zoom:opened",{detail:{zoom:b}})),e(b)}),h.original.getAttribute("data-zoom-src")){h.zoomedHd=h.zoomed.cloneNode(),h.zoomedHd.removeAttribute("srcset"),h.zoomedHd.removeAttribute("sizes"),h.zoomedHd.src=h.zoomed.getAttribute("data-zoom-src"),h.zoomedHd.onerror=function(){clearInterval(a),console.warn("Unable to reach the zoom image target "+h.zoomedHd.src),h.zoomedHd=null,i()};var a=setInterval(function(){h.zoomedHd.complete&&(clearInterval(a),h.zoomedHd.classList.add("medium-zoom-image--opened"),h.zoomedHd.addEventListener("click",s),document.body.appendChild(h.zoomedHd),i())},10)}else if(h.original.hasAttribute("srcset")){h.zoomedHd=h.zoomed.cloneNode(),h.zoomedHd.removeAttribute("sizes");var c=h.zoomedHd.addEventListener("load",function(){h.zoomedHd.removeEventListener("load",c),h.zoomedHd.classList.add("medium-zoom-image--opened"),h.zoomedHd.addEventListener("click",s),document.body.appendChild(h.zoomedHd),i()})}else i()}})},s=function(){return new c(function(e){!v&&h.original?(v=!0,document.body.classList.remove("medium-zoom--opened"),h.zoomed.style.transform="",h.zoomedHd&&(h.zoomedHd.style.transform=""),h.template&&(h.template.style.transition="opacity 150ms",h.template.style.opacity=0),h.original.dispatchEvent(r("medium-zoom:close",{detail:{zoom:b}})),h.zoomed.addEventListener("transitionend",function t(){h.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(h.zoomed),h.zoomedHd&&document.body.removeChild(h.zoomedHd),document.body.removeChild(z),h.zoomed.classList.remove("medium-zoom-image--opened"),h.template&&document.body.removeChild(h.template),v=!1,h.zoomed.removeEventListener("transitionend",t),h.original.dispatchEvent(r("medium-zoom:closed",{detail:{zoom:b}})),h.original=null,h.zoomed=null,h.zoomedHd=null,h.template=null,e(b)})):e(b)})},u=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target;return h.original?s():m({target:e})},f=[],p=[],v=!1,g=0,y=a,h={original:null,zoomed:null,zoomedHd:null,template:null};"[object Object]"===Object.prototype.toString.call(d)?y=d:(d||"string"==typeof d)&&l(d);var z=function(e){var t=document.createElement("div");return t.classList.add("medium-zoom-overlay"),t.style.background=e,t}((y=e({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},y)).background);document.addEventListener("click",function(e){var t=e.target;t!==z?-1!==f.indexOf(t)&&u({target:t}):s()}),document.addEventListener("keyup",function(e){27===(e.keyCode||e.which)&&s()}),document.addEventListener("scroll",function(){if(!v&&h.original){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(g-e)>y.scrollOffset&&setTimeout(s,150)}}),window.addEventListener("resize",s);var b={open:m,close:s,toggle:u,update:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t;if(t.background&&(z.style.background=t.background),t.container&&t.container instanceof Object&&(n.container=e({},y.container,t.container)),t.template){var i=o(t.template)?t.template:document.querySelector(t.template);n.template=i}return y=e({},y,n),f.forEach(function(e){e.dispatchEvent(r("medium-zoom:update",{detail:{zoom:b}}))}),b},clone:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t(e({},y,o))},attach:l,detach:function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];h.zoomed&&s();var n=t.length>0?t.reduce(function(e,t){return[].concat(e,i(t))},[]):f;return n.forEach(function(e){e.classList.remove("medium-zoom-image"),e.dispatchEvent(r("medium-zoom:detach",{detail:{zoom:b}}))}),f=f.filter(function(e){return-1===n.indexOf(e)}),b},on:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f.forEach(function(n){n.addEventListener("medium-zoom:"+e,t,o)}),p.push({type:"medium-zoom:"+e,listener:t,options:o}),b},off:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f.forEach(function(n){n.removeEventListener("medium-zoom:"+e,t,o)}),p=p.filter(function(o){return!(o.type==="medium-zoom:"+e&&o.listener.toString()===t.toString())}),b},getOptions:function(){return y},getImages:function(){return f},getZoomedImage:function(){return h.original}};return b}}),function(){var e=document.querySelector(".other-services__swiper"),t=document.querySelector(".other-services__list"),o=parseInt(getComputedStyle(e).width),n=parseInt(getComputedStyle(t).width);window.onload=function(){var t=getComputedStyle(e).height;e.style.height="".concat(parseInt(t)+40,"px")},t.style.marginLeft="0px",e.addEventListener("mousedown",function(i){e.addEventListener("mouseleave",function(){e.removeEventListener("mousemove",m)}),e.addEventListener("mouseup",function i(c){if(e.removeEventListener("mousemove",m),l>=100){var s=(l=l>n-o?n-o:l)/1.5,u=c.pageX;switch(r=u<a?"left":"right",d=parseInt(t.style.marginLeft),r){case"left":if(-d>=n-o)return;s=s>n-o+d?n-o+d:s,t.style.transition="all 0.35s",t.style.marginLeft="".concat(d-s,"px");break;case"right":if(d>=0)return;s=s>-d?-d:s,t.style.transition="all 0.35s",t.style.marginLeft="".concat(d+s,"px")}setTimeout(function(){t.style.transition="all 0s"},250),e.removeEventListener("mouseup",i)}});var r,d,a=i.pageX,c=i.pageX,l=0;function m(e){var i=e.pageX,a=Math.abs(c-i);switch(d=parseInt(t.style.marginLeft),i<c?r="left":i>c?r="right":(i=c)&&(r=r),r){case"left":if(-d>=n-o)return;t.style.marginLeft="".concat(d-a,"px");break;case"right":if(d>=0)return;t.style.marginLeft="".concat(d+a,"px")}l+=a,c=i}e.addEventListener("mousemove",m)})}(),function(){var e,t=document.querySelectorAll("*[data-modal-target]"),o=document.querySelectorAll("*[data-modal-close]"),n=function(t){var o=t.currentTarget,n=o.dataset.modalTarget,d=document.getElementById(n);void 0!==e&&a(e),"service-example"===n&&function(e,t){var o=e.parentElement.querySelector(".what-you-get__item-title").textContent.replace(/\s+/g," ").trim(),n=t.querySelector(".modal__title"),i=e.dataset.modalServiceExampleImage,r=t.querySelector(".modal__image");n.textContent=o,r.src=i}(o,d),e=n,d.classList.add("visible"),document.querySelector("body").classList.add("fixed"),window.addEventListener("click",r),window.addEventListener("keydown",i);var c=d.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])'),l=c[0],m=c[c.length-1];d.addEventListener("keydown",function(e){"Tab"!==e.key&&9!==e.keyCode||(e.shiftKey?document.activeElement===l&&(e.preventDefault(),m.focus()):document.activeElement===m&&(e.preventDefault(),l.focus()))})},i=function(t){"Escape"===t.key&&a(e)},r=function(t){t.target.classList.contains("modal__bg")&&a(e)},d=function(e){return a(e.currentTarget.dataset.modalClose)},a=function(e){document.getElementById(e).classList.remove("visible"),document.querySelector("body").classList.remove("fixed"),window.removeEventListener("click",r),window.removeEventListener("keydown",i)};o.forEach(function(e){return e.addEventListener("click",d)}),window.modals={openModalWindow:n,closeModalWindow:a},function(){var e=!0,o=!1,i=void 0;try{for(var r,d=t[Symbol.iterator]();!(e=(r=d.next()).done);e=!0)r.value.addEventListener("click",n)}catch(e){o=!0,i=e}finally{try{e||null==d.return||d.return()}finally{if(o)throw i}}}()}(),function(){var e=document.querySelectorAll("*[data-scroll-link]"),t=function(e){var t=e.target,o=document.getElementById(t.dataset.scrollLink);o&&o.scrollIntoView({behavior:"smooth"})};Boolean(e)&&e.forEach(function(e){return e.addEventListener("click",t)})}(),function(){document.addEventListener("DOMContentLoaded",function(){[].slice.call(document.querySelectorAll("picture.lazy")).forEach(function(e){var t=e,o=t.querySelector('[type="image/webp"]'),n=t.querySelector("img");o.srcset=o.dataset.src,n.src=n.dataset.src,t.setAttribute("data-picture","opacity-1"),t.classList.remove("lazy")})})}(),document.addEventListener("DOMContentLoaded",function(){var e=[].slice.call(document.querySelectorAll(".smooth-display-block"));if("IntersectionObserver"in window){var t=new IntersectionObserver(function(e,o){e.forEach(function(e){if(e.isIntersecting){var o=e.target;o.setAttribute("data-smooth-display-block","active"),t.unobserve(o)}})});e.forEach(function(e){t.observe(e)})}}),mediumZoom("[data-zoomable]");
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJnbG9iYWwiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIl90eXBlb2YiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJ3aW5kb3ciLCJtZWRpdW1ab29tIiwiX2V4dGVuZHMiLCJPYmplY3QiLCJhc3NpZ24iLCJ0YXJnZXQiLCJpIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwic291cmNlIiwicHJvdG90eXBlIiwiY2FsbCIsImtleSIsImlzU3VwcG9ydGVkIiwibm9kZSIsInRhZ05hbWUiLCJzZWxlY3RvciIsIm5vZGVUeXBlIiwiaXNTdmciLCJpbWFnZSIsImN1cnJlbnRTcmMiLCJpc1Byb3RvdHlwZU9mIiwiZ2V0SW1hZ2VzRnJvbVNlbGVjdG9yIiwiaXNOb2RlIiwiZmlsdGVyIiwiTm9kZUxpc3QiLCJpc05vZGVMaXN0IiwiaXNBcnJheSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlcnIiLCJjcmVhdGVDdXN0b21FdmVudCIsInR5cGUiLCJwYXJhbXMiLCJldmVudFBhcmFtcyIsImNsb25lVGFyZ2V0IiwiX3RlbXBsYXRlJGdldEJvdW5kaW5nIiwidG9wIiwibGVmdCIsIndpZHRoIiwiaGVpZ2h0IiwiY2xvbmUiLCJkb2N1bWVudCIsImNsb25lTm9kZSIsImN1c3RvbUV2ZW50IiwiaW5pdEN1c3RvbUV2ZW50IiwicGFnZVlPZmZzZXQiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxUb3AiLCJzY3JvbGxMZWZ0IiwiYWN0aXZlIiwiY3NzIiwicmVmIiwib3JpZ2luYWwiLCJ6b29tZWQiLCJpbnNlcnRBdCIsImhlYWQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInN0eWxlIiwiY3JlYXRlRWxlbWVudCIsImlzQW5pbWF0aW5nIiwiY2xhc3NMaXN0IiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsInRlbXBsYXRlIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJhcHBlbmRDaGlsZCIsImRpc3BhdGNoRXZlbnQiLCJzdHlsZUluamVjdCIsInBvc2l0aW9uIiwidW5kZWZpbmVkIiwiUHJvbWlzZSIsImZuIiwiYXR0YWNoIiwiX2xlbiIsInNlbGVjdG9ycyIsIkFycmF5IiwiX2tleSIsImV2ZW50Iiwid2hpY2giLCJpbWFnZXNBY2N1bXVsYXRvciIsImN1cnJlbnRTZWxlY3RvciIsImNsb3NlIiwiY29uY2F0IiwibmV3SW1hZ2VzIiwibmV3SW1hZ2UiLCJpbWFnZXMiLCJpbmRleE9mIiwidXBkYXRlIiwib3B0aW9ucyIsInB1c2giLCJuZXdPcHRpb25zIiwiZXZlbnRMaXN0ZW5lcnMiLCJiYWNrZ3JvdW5kIiwiX3JlZiIsIm92ZXJsYXkiLCJsaXN0ZW5lciIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiem9vbSIsIm9wZW4iLCJkZXRhY2giLCJfYW5pbWF0ZSIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwicmlnaHQiLCJib3R0b20iLCJ2aWV3cG9ydFdpZHRoIiwidmlld3BvcnRIZWlnaHQiLCJpbWFnZXNUb0RldGFjaCIsInJlbW92ZSIsImRldGFpbCIsInpvb21PcHRpb25zIiwiY29udGFpbmVyIiwibWFyZ2luIiwiX3pvb21Db250YWluZXIkZ2V0Qm91IiwicXVlcnlTZWxlY3RvciIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIl93aWR0aCIsIl9oZWlnaHQiLCJfbGVmdCIsIl90b3AiLCJ6b29tVGFyZ2V0Iiwiem9vbWVkSGQiLCJuYXR1cmFsV2lkdGgiLCJuYXR1cmFsSGVpZ2h0IiwiX3pvb21UYXJnZXQkZ2V0Qm91bmRpIiwic2NhbGVZIiwiTWF0aCIsIm1pbiIsInNjYWxlWCIsInRyYW5zZm9ybSIsInNjYWxlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2ZW50TGlzdGVuZXIiLCJyZXNvbHZlIiwiYm9keSIsInNsaWNlIiwicGFnZVhPZmZzZXQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJjcmVhdGVPdmVybGF5IiwiY29udGVudCIsIl9oYW5kbGVPcGVuRW5kIiwiX3JlZjIiLCJzcmMiLCJnZXRBdHRyaWJ1dGUiLCJ0cmFuc2xhdGVYIiwidHJhbnNsYXRlWSIsImNvbXBsZXRlIiwiZ2V0Wm9vbVRhcmdldFNpemUiLCJhZGQiLCJoYXNBdHRyaWJ1dGUiLCJsb2FkRXZlbnRMaXN0ZW5lciIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIl9oYW5kbGVDbG9zZUVuZCIsInJlbW92ZUNoaWxkIiwiY2xlYXJJbnRlcnZhbCIsImNvbnNvbGUiLCJ3YXJuIiwidG9TdHJpbmciLCJjYW5jZWxhYmxlIiwidG9nZ2xlIiwia2V5Q29kZSIsImNyZWF0ZUV2ZW50IiwiY3VycmVudFNjcm9sbCIsImFicyIsInNjcm9sbE9mZnNldCIsIl9oYW5kbGVDbGljayIsIl9rZXkyIiwicmVkdWNlIiwib24iLCJvZmYiLCJzd2lwZXJMaXN0Iiwic3dpcGVyV2lkdGgiLCJfcmVmMyIsImdldENvbXB1dGVkU3R5bGUiLCJzd2lwZXIiLCJzd2lwZXJMaXN0V2lkdGgiLCJwYXJzZUludCIsIm9ubG9hZCIsImhlaWdodE9mU3dpcGVyIiwibWFyZ2luTGVmdCIsImdldEltYWdlcyIsInN3aXBlTW91c2VNb3ZlT24iLCJzd2lwZU1vdXNlTW92ZU9mZiIsImdldE9wdGlvbnMiLCJnZXRab29tZWRJbWFnZSIsInN1bW1Td2lwZURpc3RhbmNlIiwibGFzdEN1cnNvclBvc2l0aW9uIiwicGFnZVgiLCJ3YXlUb1doaWNoU3dpcGVJc01hZGUiLCJmaXJzdEN1cnNvclBvc2l0aW9uIiwic3dpcGVMaXN0TWFyZ2luTGVmdCIsImFkZGl0aW9uYWxTd2lwZURpc3RhbmNlIiwidHJhbnNpdGlvbiIsImNyZWF0ZVRleHROb2RlIiwic2V0VGltZW91dCIsIm5ld0N1cnNvclBvc2l0aW9uIiwiaW5pdGlhbEN1cnNvclBvc2l0aW9uIiwic3dpcGVEaXN0YW5jZSIsIm1vZGFsVHJpZ2dlcnMiLCJvcGVuTW9kYWxXaW5kb3ciLCJldnQiLCJtb2RhbElEIiwiZGF0YXNldCIsIm1vZGFsVGFyZ2V0IiwidGFyZ2V0TW9kYWwiLCJnZXRFbGVtZW50QnlJZCIsIm9wZW5lZE1vZGFsSUQiLCJjbG9zZU1vZGFsV2luZG93Iiwic2VydmljZVRpdGxlIiwiY3VycmVudFRhcmdldCIsInRleHRDb250ZW50IiwicmVwbGFjZSIsInRyaW0iLCJtb2RhbFRpdGxlIiwicGF0aFRvSW1hZ2UiLCJjcmVhdGVTZXJ2aWNlRXhhbXBsZU1vZGFsIiwiY2xvc2VNb2RhbEJ5QmFja2dyb3VuZCIsImNsb3NlTW9kYWxCeUVzYyIsImZvY3VzYWJsZUVsZW1lbnRzIiwiZmlyc3RGb2N1c2FibGVFbGVtZW50IiwibGFzdEZvY3VzYWJsZUVsZW1lbnQiLCJzaGlmdEtleSIsInByZXZlbnREZWZhdWx0IiwiYWN0aXZlRWxlbWVudCIsImZvY3VzIiwiaXNGYXN0U3dpcGUiLCJidXR0b24iLCJjbG9zZU1vZGFsQnlCdXR0b24iLCJtb2RhbHMiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uIiwiX2RpZEl0ZXJhdG9yRXJyb3IiLCJfaXRlcmF0b3JFcnJvciIsIl9zdGVwIiwiX2l0ZXJhdG9yIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJuZXh0IiwiZG9uZSIsInZhbHVlIiwicmV0dXJuIiwic2Nyb2xsaW5nTGlua3MiLCJzY3JvbGxUb0VsZW1lbnQiLCJzY3JvbGxUbyIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJCb29sZWFuIiwibGluayIsImxhenlQaWN0dXJlIiwiZW50cnkiLCJsYXp5V2VicEltYWdlIiwibGF6eUltYWdlIiwiY29udGFpbnMiLCJzZXRBdHRyaWJ1dGUiLCJtYWluQmxvY2tPYnNlcnZlciIsIkludGVyc2VjdGlvbk9ic2VydmVyIiwiZW50cmllcyIsIm9ic2VydmVyIiwiaW5pdGlhbGl6ZU1vZGFsVHJpZ2dlcnMiLCJpc0ludGVyc2VjdGluZyIsIm1haW5CbG9jayIsInVub2JzZXJ2ZSIsIm1haW5CbG9ja3MiLCJvYnNlcnZlIl0sIm1hcHBpbmdzIjoiQUFBQSwrUEFHQSxTQUFVQSxFQUFRQyxHQUNLLFlBQW5CLG9CQUFPQyxRQUFQLFlBQUFDLFFBQU9ELFdBQTBDLG9CQUFYRSxPQUF5QkEs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LEVBQWtCLFNBQUF6QyxHQUNoQixJQUFBck0sRUFBVTBOLEVBQUFBLE9BQ1JxQixFQUFJM00sU0FBU3dMLGVBQWtCSixFQUFBQSxRQUFBQSxZQUU3QkMsR0FDRHNCLEVBQUFDLGVBQUEsQ0FDRkMsU0FBTSxZQUtOQyxRQUFBTCxJQUNGQSxFQUFBakosUUFBQSxTQUFBdUosR0FBQSxPQUFBQSxFQUFBdEosaUJBQUEsUUFBQWlKLEtBbEJILEdBcUJBckMsV0E0RkZySyxTQUFTeUQsaUJBQWlCLG1CQWhCMUIsV0F4RXdCLEdBQUF1QyxNQUFsQmtGLEtBQUFBLFNBQWtCL0wsaUJBQVMsaUJBRTdCcUwsUUFBaUJELFNBQUFBLEdBQ2xCLElBQUF5QyxFQUFBQyxFQUhIQyxFQUFBRixFQUFBckksY0FBQSx1QkE4RVF3SSxFQUFZSCxFQUFZckksY0FBYyxPQXZFNUN1SSxFQUFlL0wsT0FBVWlNLEVBQVNqRCxRQUFsQzVELElBQ0VpRSxFQUFBQSxJQUFnQjJDLEVBQUM1QyxRQUFqQmhFLElBRkp5RyxFQUFBSyxhQUFBLGVBQUEsYUE4RUlMLEVBQVk3TCxVQUFVa0QsT0FBTyxZQXhGL0JnRyxHQXNCQXJLLFNBQVMyRSxpQkFBYyxtQkFBa0JOLFdBRXpDOUcsSUFBQUEsRUFBT3FJLEdBQUFBLE1BQVAxSCxLQUEyQjhCLFNBQVNpTCxpQkFBQUEsMEJBTnRDLEdBQUEseUJBQUExTixPQUFBLENBa0ZJLElBQUkrUCxFQUFvQixJQUFJQyxxQkFBcUIsU0FBU0MsRUFBU0MsR0F2RWpFQyxFQUFBQSxRQUFBQSxTQUEwQlQsR0FBTSxHQUFBQSxFQUFBVSxlQUFBLENBQUEsSUFBQUMsRUFBQVgsRUFBQXJQLE9BNEU1QmdRLEVBQVVQLGFBQWEsNEJBQTZCLFVBNUV4QkMsRUFBQU8sVUFBQUQsUUFBQUUsRUFBQXRLLFFBQUEsU0FBQW9LLEdBQUFOLEVBQUFTLFFBQUFILFFBQUFwUSxXQUFBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbi8qISBtZWRpdW0tem9vbSAxLjAuNCB8IE1JVCBMaWNlbnNlIHwgaHR0cHM6Ly9naXRodWIuY29tL2ZyYW5jb2lzY2hhbGlmb3VyL21lZGl1bS16b29tICovXG4oZnVuY3Rpb24oZ2xvYmFsLCBmYWN0b3J5KSB7XG4gICAgdHlwZW9mIGV4cG9ydHMgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDogdHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOiB3aW5kb3cubWVkaXVtWm9vbSA9IGZhY3RvcnkoKTtcbiAgfSkodGhpcywgZnVuY3Rpb24oKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgdmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0YXJnZXQpIHtcbiAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfTtcbiAgICB2YXIgaXNTdXBwb3J0ZWQgPSBmdW5jdGlvbiBpc1N1cHBvcnRlZChub2RlKSB7XG4gICAgICByZXR1cm4gbm9kZS50YWdOYW1lID09PSBcIklNR1wiO1xuICAgIH07XG4gICAgdmFyIGlzTm9kZUxpc3QgPSBmdW5jdGlvbiBpc05vZGVMaXN0KHNlbGVjdG9yKSB7XG4gICAgICByZXR1cm4gTm9kZUxpc3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2Yoc2VsZWN0b3IpO1xuICAgIH07XG4gICAgdmFyIGlzTm9kZSA9IGZ1bmN0aW9uIGlzTm9kZShzZWxlY3Rvcikge1xuICAgICAgcmV0dXJuIHNlbGVjdG9yICYmIHNlbGVjdG9yLm5vZGVUeXBlID09PSAxO1xuICAgIH07XG4gICAgdmFyIGlzU3ZnID0gZnVuY3Rpb24gaXNTdmcoaW1hZ2UpIHtcbiAgICAgIHZhciBzb3VyY2UgPSBpbWFnZS5jdXJyZW50U3JjIHx8IGltYWdlLnNyYztcbiAgICAgIHJldHVybiBzb3VyY2Uuc3Vic3RyKC00KS50b0xvd2VyQ2FzZSgpID09PSBcIi5zdmdcIjtcbiAgICB9O1xuICAgIHZhciBnZXRJbWFnZXNGcm9tU2VsZWN0b3IgPSBmdW5jdGlvbiBnZXRJbWFnZXNGcm9tU2VsZWN0b3Ioc2VsZWN0b3IpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHNlbGVjdG9yKSkge1xuICAgICAgICAgIHJldHVybiBzZWxlY3Rvci5maWx0ZXIoaXNTdXBwb3J0ZWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc05vZGVMaXN0KHNlbGVjdG9yKSkge1xuICAgICAgICAgIHJldHVybiBbXS5zbGljZS5jYWxsKHNlbGVjdG9yKS5maWx0ZXIoaXNTdXBwb3J0ZWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc05vZGUoc2VsZWN0b3IpKSB7XG4gICAgICAgICAgcmV0dXJuIFsgc2VsZWN0b3IgXS5maWx0ZXIoaXNTdXBwb3J0ZWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICByZXR1cm4gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSkuZmlsdGVyKGlzU3VwcG9ydGVkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRoZSBwcm92aWRlZCBzZWxlY3RvciBpcyBpbnZhbGlkLlxcblwiICsgXCJFeHBlY3RzIGEgQ1NTIHNlbGVjdG9yLCBhIE5vZGUgZWxlbWVudCwgYSBOb2RlTGlzdCBvciBhbiBhcnJheS5cXG5cIiArIFwiU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZnJhbmNvaXNjaGFsaWZvdXIvbWVkaXVtLXpvb21cIik7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgY3JlYXRlT3ZlcmxheSA9IGZ1bmN0aW9uIGNyZWF0ZU92ZXJsYXkoYmFja2dyb3VuZCkge1xuICAgICAgdmFyIG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKFwibWVkaXVtLXpvb20tb3ZlcmxheVwiKTtcbiAgICAgIG92ZXJsYXkuc3R5bGUuYmFja2dyb3VuZCA9IGJhY2tncm91bmQ7XG4gICAgICByZXR1cm4gb3ZlcmxheTtcbiAgICB9O1xuICAgIHZhciBjbG9uZVRhcmdldCA9IGZ1bmN0aW9uIGNsb25lVGFyZ2V0KHRlbXBsYXRlKSB7XG4gICAgICB2YXIgX3RlbXBsYXRlJGdldEJvdW5kaW5nID0gdGVtcGxhdGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIHRvcCA9IF90ZW1wbGF0ZSRnZXRCb3VuZGluZy50b3AsIGxlZnQgPSBfdGVtcGxhdGUkZ2V0Qm91bmRpbmcubGVmdCwgd2lkdGggPSBfdGVtcGxhdGUkZ2V0Qm91bmRpbmcud2lkdGgsIGhlaWdodCA9IF90ZW1wbGF0ZSRnZXRCb3VuZGluZy5oZWlnaHQ7XG4gICAgICB2YXIgY2xvbmUgPSB0ZW1wbGF0ZS5jbG9uZU5vZGUoKTtcbiAgICAgIHZhciBzY3JvbGxUb3AgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCB8fCAwO1xuICAgICAgdmFyIHNjcm9sbExlZnQgPSB3aW5kb3cucGFnZVhPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0IHx8IDA7XG4gICAgICBjbG9uZS5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKTtcbiAgICAgIGNsb25lLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgY2xvbmUuc3R5bGUudG9wID0gdG9wICsgc2Nyb2xsVG9wICsgXCJweFwiO1xuICAgICAgY2xvbmUuc3R5bGUubGVmdCA9IGxlZnQgKyBzY3JvbGxMZWZ0ICsgXCJweFwiO1xuICAgICAgY2xvbmUuc3R5bGUud2lkdGggPSB3aWR0aCArIFwicHhcIjtcbiAgICAgIGNsb25lLnN0eWxlLmhlaWdodCA9IGhlaWdodCArIFwicHhcIjtcbiAgICAgIGNsb25lLnN0eWxlLnRyYW5zZm9ybSA9IFwiXCI7XG4gICAgICByZXR1cm4gY2xvbmU7XG4gICAgfTtcbiAgICB2YXIgY3JlYXRlQ3VzdG9tRXZlbnQgPSBmdW5jdGlvbiBjcmVhdGVDdXN0b21FdmVudCh0eXBlLCBwYXJhbXMpIHtcbiAgICAgIHZhciBldmVudFBhcmFtcyA9IF9leHRlbmRzKHtcbiAgICAgICAgYnViYmxlczogZmFsc2UsXG4gICAgICAgIGNhbmNlbGFibGU6IGZhbHNlLFxuICAgICAgICBkZXRhaWw6IHVuZGVmaW5lZFxuICAgICAgfSwgcGFyYW1zKTtcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93LkN1c3RvbUV2ZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDdXN0b21FdmVudCh0eXBlLCBldmVudFBhcmFtcyk7XG4gICAgICB9XG4gICAgICB2YXIgY3VzdG9tRXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudChcIkN1c3RvbUV2ZW50XCIpO1xuICAgICAgY3VzdG9tRXZlbnQuaW5pdEN1c3RvbUV2ZW50KHR5cGUsIGV2ZW50UGFyYW1zLmJ1YmJsZXMsIGV2ZW50UGFyYW1zLmNhbmNlbGFibGUsIGV2ZW50UGFyYW1zLmRldGFpbCk7XG4gICAgICByZXR1cm4gY3VzdG9tRXZlbnQ7XG4gICAgfTtcbiAgICB2YXIgbWVkaXVtWm9vbSA9IGZ1bmN0aW9uIG1lZGl1bVpvb20oc2VsZWN0b3IpIHtcbiAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICAgIHZhciBQcm9taXNlID0gd2luZG93LlByb21pc2UgfHwgZnVuY3Rpb24gUHJvbWlzZShmbikge1xuICAgICAgICBmdW5jdGlvbiBub29wKCkge31cbiAgICAgICAgZm4obm9vcCwgbm9vcCk7XG4gICAgICB9O1xuICAgICAgdmFyIF9oYW5kbGVDbGljayA9IGZ1bmN0aW9uIF9oYW5kbGVDbGljayhldmVudCkge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICBpZiAodGFyZ2V0ID09PSBvdmVybGF5KSB7XG4gICAgICAgICAgY2xvc2UoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGltYWdlcy5pbmRleE9mKHRhcmdldCkgPT09IC0xKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRvZ2dsZSh7XG4gICAgICAgICAgdGFyZ2V0OiB0YXJnZXRcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgdmFyIF9oYW5kbGVTY3JvbGwgPSBmdW5jdGlvbiBfaGFuZGxlU2Nyb2xsKCkge1xuICAgICAgICBpZiAoaXNBbmltYXRpbmcgfHwgIWFjdGl2ZS5vcmlnaW5hbCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY3VycmVudFNjcm9sbCA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wIHx8IDA7XG4gICAgICAgIGlmIChNYXRoLmFicyhzY3JvbGxUb3AgLSBjdXJyZW50U2Nyb2xsKSA+IHpvb21PcHRpb25zLnNjcm9sbE9mZnNldCkge1xuICAgICAgICAgIHNldFRpbWVvdXQoY2xvc2UsIDE1MCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB2YXIgX2hhbmRsZUtleVVwID0gZnVuY3Rpb24gX2hhbmRsZUtleVVwKGV2ZW50KSB7XG4gICAgICAgIGlmICgoZXZlbnQua2V5Q29kZSB8fCBldmVudC53aGljaCkgPT09IDI3KSB7XG4gICAgICAgICAgY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHZhciB1cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICAgICAgdmFyIG5ld09wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICBpZiAob3B0aW9ucy5iYWNrZ3JvdW5kKSB7XG4gICAgICAgICAgb3ZlcmxheS5zdHlsZS5iYWNrZ3JvdW5kID0gb3B0aW9ucy5iYWNrZ3JvdW5kO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmNvbnRhaW5lciAmJiBvcHRpb25zLmNvbnRhaW5lciBpbnN0YW5jZW9mIE9iamVjdCkge1xuICAgICAgICAgIG5ld09wdGlvbnMuY29udGFpbmVyID0gX2V4dGVuZHMoe30sIHpvb21PcHRpb25zLmNvbnRhaW5lciwgb3B0aW9ucy5jb250YWluZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnRlbXBsYXRlKSB7XG4gICAgICAgICAgdmFyIHRlbXBsYXRlID0gaXNOb2RlKG9wdGlvbnMudGVtcGxhdGUpID8gb3B0aW9ucy50ZW1wbGF0ZSA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob3B0aW9ucy50ZW1wbGF0ZSk7XG4gICAgICAgICAgbmV3T3B0aW9ucy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAgICAgICB9XG4gICAgICAgIHpvb21PcHRpb25zID0gX2V4dGVuZHMoe30sIHpvb21PcHRpb25zLCBuZXdPcHRpb25zKTtcbiAgICAgICAgaW1hZ2VzLmZvckVhY2goZnVuY3Rpb24oaW1hZ2UpIHtcbiAgICAgICAgICBpbWFnZS5kaXNwYXRjaEV2ZW50KGNyZWF0ZUN1c3RvbUV2ZW50KFwibWVkaXVtLXpvb206dXBkYXRlXCIsIHtcbiAgICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgICB6b29tOiB6b29tXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHpvb207XG4gICAgICB9O1xuICAgICAgdmFyIGNsb25lID0gZnVuY3Rpb24gY2xvbmUoKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICAgICAgcmV0dXJuIG1lZGl1bVpvb20oX2V4dGVuZHMoe30sIHpvb21PcHRpb25zLCBvcHRpb25zKSk7XG4gICAgICB9O1xuICAgICAgdmFyIGF0dGFjaCA9IGZ1bmN0aW9uIGF0dGFjaCgpIHtcbiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHNlbGVjdG9ycyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgIHNlbGVjdG9yc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmV3SW1hZ2VzID0gc2VsZWN0b3JzLnJlZHVjZShmdW5jdGlvbihpbWFnZXNBY2N1bXVsYXRvciwgY3VycmVudFNlbGVjdG9yKSB7XG4gICAgICAgICAgcmV0dXJuIFtdLmNvbmNhdChpbWFnZXNBY2N1bXVsYXRvciwgZ2V0SW1hZ2VzRnJvbVNlbGVjdG9yKGN1cnJlbnRTZWxlY3RvcikpO1xuICAgICAgICB9LCBbXSk7XG4gICAgICAgIG5ld0ltYWdlcy5maWx0ZXIoZnVuY3Rpb24obmV3SW1hZ2UpIHtcbiAgICAgICAgICByZXR1cm4gaW1hZ2VzLmluZGV4T2YobmV3SW1hZ2UpID09PSAtMTtcbiAgICAgICAgfSkuZm9yRWFjaChmdW5jdGlvbihuZXdJbWFnZSkge1xuICAgICAgICAgIGltYWdlcy5wdXNoKG5ld0ltYWdlKTtcbiAgICAgICAgICBuZXdJbWFnZS5jbGFzc0xpc3QuYWRkKFwibWVkaXVtLXpvb20taW1hZ2VcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBldmVudExpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKF9yZWYpIHtcbiAgICAgICAgICB2YXIgdHlwZSA9IF9yZWYudHlwZSwgbGlzdGVuZXIgPSBfcmVmLmxpc3RlbmVyLCBvcHRpb25zID0gX3JlZi5vcHRpb25zO1xuICAgICAgICAgIG5ld0ltYWdlcy5mb3JFYWNoKGZ1bmN0aW9uKGltYWdlKSB7XG4gICAgICAgICAgICBpbWFnZS5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB6b29tO1xuICAgICAgfTtcbiAgICAgIHZhciBkZXRhY2ggPSBmdW5jdGlvbiBkZXRhY2goKSB7XG4gICAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgc2VsZWN0b3JzID0gQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgICAgICBzZWxlY3RvcnNbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWN0aXZlLnpvb21lZCkge1xuICAgICAgICAgIGNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGltYWdlc1RvRGV0YWNoID0gc2VsZWN0b3JzLmxlbmd0aCA+IDAgPyBzZWxlY3RvcnMucmVkdWNlKGZ1bmN0aW9uKGltYWdlc0FjY3VtdWxhdG9yLCBjdXJyZW50U2VsZWN0b3IpIHtcbiAgICAgICAgICByZXR1cm4gW10uY29uY2F0KGltYWdlc0FjY3VtdWxhdG9yLCBnZXRJbWFnZXNGcm9tU2VsZWN0b3IoY3VycmVudFNlbGVjdG9yKSk7XG4gICAgICAgIH0sIFtdKSA6IGltYWdlcztcbiAgICAgICAgaW1hZ2VzVG9EZXRhY2guZm9yRWFjaChmdW5jdGlvbihpbWFnZSkge1xuICAgICAgICAgIGltYWdlLmNsYXNzTGlzdC5yZW1vdmUoXCJtZWRpdW0tem9vbS1pbWFnZVwiKTtcbiAgICAgICAgICBpbWFnZS5kaXNwYXRjaEV2ZW50KGNyZWF0ZUN1c3RvbUV2ZW50KFwibWVkaXVtLXpvb206ZGV0YWNoXCIsIHtcbiAgICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgICB6b29tOiB6b29tXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgaW1hZ2VzID0gaW1hZ2VzLmZpbHRlcihmdW5jdGlvbihpbWFnZSkge1xuICAgICAgICAgIHJldHVybiBpbWFnZXNUb0RldGFjaC5pbmRleE9mKGltYWdlKSA9PT0gLTE7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gem9vbTtcbiAgICAgIH07XG4gICAgICB2YXIgb24gPSBmdW5jdGlvbiBvbih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG4gICAgICAgIGltYWdlcy5mb3JFYWNoKGZ1bmN0aW9uKGltYWdlKSB7XG4gICAgICAgICAgaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcIm1lZGl1bS16b29tOlwiICsgdHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpO1xuICAgICAgICB9KTtcbiAgICAgICAgZXZlbnRMaXN0ZW5lcnMucHVzaCh7XG4gICAgICAgICAgdHlwZTogXCJtZWRpdW0tem9vbTpcIiArIHR5cGUsXG4gICAgICAgICAgbGlzdGVuZXI6IGxpc3RlbmVyLFxuICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnNcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB6b29tO1xuICAgICAgfTtcbiAgICAgIHZhciBvZmYgPSBmdW5jdGlvbiBvZmYodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuICAgICAgICBpbWFnZXMuZm9yRWFjaChmdW5jdGlvbihpbWFnZSkge1xuICAgICAgICAgIGltYWdlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZWRpdW0tem9vbTpcIiArIHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGV2ZW50TGlzdGVuZXJzID0gZXZlbnRMaXN0ZW5lcnMuZmlsdGVyKGZ1bmN0aW9uKGV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICByZXR1cm4gIShldmVudExpc3RlbmVyLnR5cGUgPT09IFwibWVkaXVtLXpvb206XCIgKyB0eXBlICYmIGV2ZW50TGlzdGVuZXIubGlzdGVuZXIudG9TdHJpbmcoKSA9PT0gbGlzdGVuZXIudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gem9vbTtcbiAgICAgIH07XG4gICAgICB2YXIgb3BlbiA9IGZ1bmN0aW9uIG9wZW4oKSB7XG4gICAgICAgIHZhciBfcmVmMiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sIHRhcmdldCA9IF9yZWYyLnRhcmdldDtcbiAgICAgICAgdmFyIF9hbmltYXRlID0gZnVuY3Rpb24gX2FuaW1hdGUoKSB7XG4gICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHtcbiAgICAgICAgICAgIHdpZHRoOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQsXG4gICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgICAgICBib3R0b206IDBcbiAgICAgICAgICB9O1xuICAgICAgICAgIHZhciB2aWV3cG9ydFdpZHRoID0gdm9pZCAwO1xuICAgICAgICAgIHZhciB2aWV3cG9ydEhlaWdodCA9IHZvaWQgMDtcbiAgICAgICAgICBpZiAoem9vbU9wdGlvbnMuY29udGFpbmVyKSB7XG4gICAgICAgICAgICBpZiAoem9vbU9wdGlvbnMuY29udGFpbmVyIGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgICAgICAgICAgIGNvbnRhaW5lciA9IF9leHRlbmRzKHt9LCBjb250YWluZXIsIHpvb21PcHRpb25zLmNvbnRhaW5lcik7XG4gICAgICAgICAgICAgIHZpZXdwb3J0V2lkdGggPSBjb250YWluZXIud2lkdGggLSBjb250YWluZXIubGVmdCAtIGNvbnRhaW5lci5yaWdodCAtIHpvb21PcHRpb25zLm1hcmdpbiAqIDI7XG4gICAgICAgICAgICAgIHZpZXdwb3J0SGVpZ2h0ID0gY29udGFpbmVyLmhlaWdodCAtIGNvbnRhaW5lci50b3AgLSBjb250YWluZXIuYm90dG9tIC0gem9vbU9wdGlvbnMubWFyZ2luICogMjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhciB6b29tQ29udGFpbmVyID0gaXNOb2RlKHpvb21PcHRpb25zLmNvbnRhaW5lcikgPyB6b29tT3B0aW9ucy5jb250YWluZXIgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHpvb21PcHRpb25zLmNvbnRhaW5lcik7XG4gICAgICAgICAgICAgIHZhciBfem9vbUNvbnRhaW5lciRnZXRCb3UgPSB6b29tQ29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBfd2lkdGggPSBfem9vbUNvbnRhaW5lciRnZXRCb3Uud2lkdGgsIF9oZWlnaHQgPSBfem9vbUNvbnRhaW5lciRnZXRCb3UuaGVpZ2h0LCBfbGVmdCA9IF96b29tQ29udGFpbmVyJGdldEJvdS5sZWZ0LCBfdG9wID0gX3pvb21Db250YWluZXIkZ2V0Qm91LnRvcDtcbiAgICAgICAgICAgICAgY29udGFpbmVyID0gX2V4dGVuZHMoe30sIGNvbnRhaW5lciwge1xuICAgICAgICAgICAgICAgIHdpZHRoOiBfd2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBfaGVpZ2h0LFxuICAgICAgICAgICAgICAgIGxlZnQ6IF9sZWZ0LFxuICAgICAgICAgICAgICAgIHRvcDogX3RvcFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdmlld3BvcnRXaWR0aCA9IHZpZXdwb3J0V2lkdGggfHwgY29udGFpbmVyLndpZHRoIC0gem9vbU9wdGlvbnMubWFyZ2luICogMjtcbiAgICAgICAgICB2aWV3cG9ydEhlaWdodCA9IHZpZXdwb3J0SGVpZ2h0IHx8IGNvbnRhaW5lci5oZWlnaHQgLSB6b29tT3B0aW9ucy5tYXJnaW4gKiAyO1xuICAgICAgICAgIHZhciB6b29tVGFyZ2V0ID0gYWN0aXZlLnpvb21lZEhkIHx8IGFjdGl2ZS5vcmlnaW5hbDtcbiAgICAgICAgICB2YXIgbmF0dXJhbFdpZHRoID0gaXNTdmcoem9vbVRhcmdldCkgPyB2aWV3cG9ydFdpZHRoIDogem9vbVRhcmdldC5uYXR1cmFsV2lkdGggfHwgdmlld3BvcnRXaWR0aDtcbiAgICAgICAgICB2YXIgbmF0dXJhbEhlaWdodCA9IGlzU3ZnKHpvb21UYXJnZXQpID8gdmlld3BvcnRIZWlnaHQgOiB6b29tVGFyZ2V0Lm5hdHVyYWxIZWlnaHQgfHwgdmlld3BvcnRIZWlnaHQ7XG4gICAgICAgICAgdmFyIF96b29tVGFyZ2V0JGdldEJvdW5kaSA9IHpvb21UYXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIHRvcCA9IF96b29tVGFyZ2V0JGdldEJvdW5kaS50b3AsIGxlZnQgPSBfem9vbVRhcmdldCRnZXRCb3VuZGkubGVmdCwgd2lkdGggPSBfem9vbVRhcmdldCRnZXRCb3VuZGkud2lkdGgsIGhlaWdodCA9IF96b29tVGFyZ2V0JGdldEJvdW5kaS5oZWlnaHQ7XG4gICAgICAgICAgdmFyIHNjYWxlWCA9IE1hdGgubWluKG5hdHVyYWxXaWR0aCwgdmlld3BvcnRXaWR0aCkgLyB3aWR0aDtcbiAgICAgICAgICB2YXIgc2NhbGVZID0gTWF0aC5taW4obmF0dXJhbEhlaWdodCwgdmlld3BvcnRIZWlnaHQpIC8gaGVpZ2h0O1xuICAgICAgICAgIHZhciBzY2FsZSA9IE1hdGgubWluKHNjYWxlWCwgc2NhbGVZKTtcbiAgICAgICAgICB2YXIgdHJhbnNsYXRlWCA9ICgtbGVmdCArICh2aWV3cG9ydFdpZHRoIC0gd2lkdGgpIC8gMiArIHpvb21PcHRpb25zLm1hcmdpbiArIGNvbnRhaW5lci5sZWZ0KSAvIHNjYWxlO1xuICAgICAgICAgIHZhciB0cmFuc2xhdGVZID0gKC10b3AgKyAodmlld3BvcnRIZWlnaHQgLSBoZWlnaHQpIC8gMiArIHpvb21PcHRpb25zLm1hcmdpbiArIGNvbnRhaW5lci50b3ApIC8gc2NhbGU7XG4gICAgICAgICAgdmFyIHRyYW5zZm9ybSA9IFwic2NhbGUoXCIgKyBzY2FsZSArIFwiKSB0cmFuc2xhdGUzZChcIiArIHRyYW5zbGF0ZVggKyBcInB4LCBcIiArIHRyYW5zbGF0ZVkgKyBcInB4LCAwKVwiO1xuICAgICAgICAgIGFjdGl2ZS56b29tZWQuc3R5bGUudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xuICAgICAgICAgIGlmIChhY3RpdmUuem9vbWVkSGQpIHtcbiAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZC5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xuICAgICAgICAgIGlmICh0YXJnZXQgJiYgaW1hZ2VzLmluZGV4T2YodGFyZ2V0KSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJlc29sdmUoem9vbSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBfaGFuZGxlT3BlbkVuZCA9IGZ1bmN0aW9uIF9oYW5kbGVPcGVuRW5kKCkge1xuICAgICAgICAgICAgaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGFjdGl2ZS56b29tZWQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgX2hhbmRsZU9wZW5FbmQpO1xuICAgICAgICAgICAgYWN0aXZlLm9yaWdpbmFsLmRpc3BhdGNoRXZlbnQoY3JlYXRlQ3VzdG9tRXZlbnQoXCJtZWRpdW0tem9vbTpvcGVuZWRcIiwge1xuICAgICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgICB6b29tOiB6b29tXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJlc29sdmUoem9vbSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBpZiAoYWN0aXZlLnpvb21lZCkge1xuICAgICAgICAgICAgcmVzb2x2ZSh6b29tKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgYWN0aXZlLm9yaWdpbmFsID0gdGFyZ2V0O1xuICAgICAgICAgIH0gZWxzZSBpZiAoaW1hZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBfaW1hZ2VzID0gaW1hZ2VzO1xuICAgICAgICAgICAgYWN0aXZlLm9yaWdpbmFsID0gX2ltYWdlc1swXTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzb2x2ZSh6b29tKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgYWN0aXZlLm9yaWdpbmFsLmRpc3BhdGNoRXZlbnQoY3JlYXRlQ3VzdG9tRXZlbnQoXCJtZWRpdW0tem9vbTpvcGVuXCIsIHtcbiAgICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgICB6b29tOiB6b29tXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSkpO1xuICAgICAgICAgIHNjcm9sbFRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wIHx8IDA7XG4gICAgICAgICAgaXNBbmltYXRpbmcgPSB0cnVlO1xuICAgICAgICAgIGFjdGl2ZS56b29tZWQgPSBjbG9uZVRhcmdldChhY3RpdmUub3JpZ2luYWwpO1xuICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQob3ZlcmxheSk7XG4gICAgICAgICAgaWYgKHpvb21PcHRpb25zLnRlbXBsYXRlKSB7XG4gICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSBpc05vZGUoem9vbU9wdGlvbnMudGVtcGxhdGUpID8gem9vbU9wdGlvbnMudGVtcGxhdGUgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHpvb21PcHRpb25zLnRlbXBsYXRlKTtcbiAgICAgICAgICAgIGFjdGl2ZS50ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBhY3RpdmUudGVtcGxhdGUuYXBwZW5kQ2hpbGQodGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhY3RpdmUudGVtcGxhdGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGFjdGl2ZS56b29tZWQpO1xuICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJtZWRpdW0tem9vbS0tb3BlbmVkXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGFjdGl2ZS5vcmlnaW5hbC5jbGFzc0xpc3QuYWRkKFwibWVkaXVtLXpvb20taW1hZ2UtLWhpZGRlblwiKTtcbiAgICAgICAgICBhY3RpdmUuem9vbWVkLmNsYXNzTGlzdC5hZGQoXCJtZWRpdW0tem9vbS1pbWFnZS0tb3BlbmVkXCIpO1xuICAgICAgICAgIGFjdGl2ZS56b29tZWQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlKTtcbiAgICAgICAgICBhY3RpdmUuem9vbWVkLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIF9oYW5kbGVPcGVuRW5kKTtcbiAgICAgICAgICBpZiAoYWN0aXZlLm9yaWdpbmFsLmdldEF0dHJpYnV0ZShcImRhdGEtem9vbS1zcmNcIikpIHtcbiAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZCA9IGFjdGl2ZS56b29tZWQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICBhY3RpdmUuem9vbWVkSGQucmVtb3ZlQXR0cmlidXRlKFwic3Jjc2V0XCIpO1xuICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkLnJlbW92ZUF0dHJpYnV0ZShcInNpemVzXCIpO1xuICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkLnNyYyA9IGFjdGl2ZS56b29tZWQuZ2V0QXR0cmlidXRlKFwiZGF0YS16b29tLXNyY1wiKTtcbiAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZC5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoZ2V0Wm9vbVRhcmdldFNpemUpO1xuICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJVbmFibGUgdG8gcmVhY2ggdGhlIHpvb20gaW1hZ2UgdGFyZ2V0IFwiICsgYWN0aXZlLnpvb21lZEhkLnNyYyk7XG4gICAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZCA9IG51bGw7XG4gICAgICAgICAgICAgIF9hbmltYXRlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGdldFpvb21UYXJnZXRTaXplID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGlmIChhY3RpdmUuem9vbWVkSGQuY29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGdldFpvb21UYXJnZXRTaXplKTtcbiAgICAgICAgICAgICAgICBhY3RpdmUuem9vbWVkSGQuY2xhc3NMaXN0LmFkZChcIm1lZGl1bS16b29tLWltYWdlLS1vcGVuZWRcIik7XG4gICAgICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZSk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhY3RpdmUuem9vbWVkSGQpO1xuICAgICAgICAgICAgICAgIF9hbmltYXRlKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDEwKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGFjdGl2ZS5vcmlnaW5hbC5oYXNBdHRyaWJ1dGUoXCJzcmNzZXRcIikpIHtcbiAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZCA9IGFjdGl2ZS56b29tZWQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICBhY3RpdmUuem9vbWVkSGQucmVtb3ZlQXR0cmlidXRlKFwic2l6ZXNcIik7XG4gICAgICAgICAgICB2YXIgbG9hZEV2ZW50TGlzdGVuZXIgPSBhY3RpdmUuem9vbWVkSGQuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZC5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLCBsb2FkRXZlbnRMaXN0ZW5lcik7XG4gICAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZC5jbGFzc0xpc3QuYWRkKFwibWVkaXVtLXpvb20taW1hZ2UtLW9wZW5lZFwiKTtcbiAgICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZSk7XG4gICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYWN0aXZlLnpvb21lZEhkKTtcbiAgICAgICAgICAgICAgX2FuaW1hdGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfYW5pbWF0ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgdmFyIGNsb3NlID0gZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7XG4gICAgICAgICAgaWYgKGlzQW5pbWF0aW5nIHx8ICFhY3RpdmUub3JpZ2luYWwpIHtcbiAgICAgICAgICAgIHJlc29sdmUoem9vbSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBfaGFuZGxlQ2xvc2VFbmQgPSBmdW5jdGlvbiBfaGFuZGxlQ2xvc2VFbmQoKSB7XG4gICAgICAgICAgICBhY3RpdmUub3JpZ2luYWwuY2xhc3NMaXN0LnJlbW92ZShcIm1lZGl1bS16b29tLWltYWdlLS1oaWRkZW5cIik7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGFjdGl2ZS56b29tZWQpO1xuICAgICAgICAgICAgaWYgKGFjdGl2ZS56b29tZWRIZCkge1xuICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGFjdGl2ZS56b29tZWRIZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG92ZXJsYXkpO1xuICAgICAgICAgICAgYWN0aXZlLnpvb21lZC5jbGFzc0xpc3QucmVtb3ZlKFwibWVkaXVtLXpvb20taW1hZ2UtLW9wZW5lZFwiKTtcbiAgICAgICAgICAgIGlmIChhY3RpdmUudGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhY3RpdmUudGVtcGxhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGFjdGl2ZS56b29tZWQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgX2hhbmRsZUNsb3NlRW5kKTtcbiAgICAgICAgICAgIGFjdGl2ZS5vcmlnaW5hbC5kaXNwYXRjaEV2ZW50KGNyZWF0ZUN1c3RvbUV2ZW50KFwibWVkaXVtLXpvb206Y2xvc2VkXCIsIHtcbiAgICAgICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICAgICAgem9vbTogem9vbVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBhY3RpdmUub3JpZ2luYWwgPSBudWxsO1xuICAgICAgICAgICAgYWN0aXZlLnpvb21lZCA9IG51bGw7XG4gICAgICAgICAgICBhY3RpdmUuem9vbWVkSGQgPSBudWxsO1xuICAgICAgICAgICAgYWN0aXZlLnRlbXBsYXRlID0gbnVsbDtcbiAgICAgICAgICAgIHJlc29sdmUoem9vbSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBpc0FuaW1hdGluZyA9IHRydWU7XG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKFwibWVkaXVtLXpvb20tLW9wZW5lZFwiKTtcbiAgICAgICAgICBhY3RpdmUuem9vbWVkLnN0eWxlLnRyYW5zZm9ybSA9IFwiXCI7XG4gICAgICAgICAgaWYgKGFjdGl2ZS56b29tZWRIZCkge1xuICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkLnN0eWxlLnRyYW5zZm9ybSA9IFwiXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChhY3RpdmUudGVtcGxhdGUpIHtcbiAgICAgICAgICAgIGFjdGl2ZS50ZW1wbGF0ZS5zdHlsZS50cmFuc2l0aW9uID0gXCJvcGFjaXR5IDE1MG1zXCI7XG4gICAgICAgICAgICBhY3RpdmUudGVtcGxhdGUuc3R5bGUub3BhY2l0eSA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGFjdGl2ZS5vcmlnaW5hbC5kaXNwYXRjaEV2ZW50KGNyZWF0ZUN1c3RvbUV2ZW50KFwibWVkaXVtLXpvb206Y2xvc2VcIiwge1xuICAgICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICAgIHpvb206IHpvb21cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSk7XG4gICAgICAgICAgYWN0aXZlLnpvb21lZC5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBfaGFuZGxlQ2xvc2VFbmQpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgICB2YXIgdG9nZ2xlID0gZnVuY3Rpb24gdG9nZ2xlKCkge1xuICAgICAgICB2YXIgX3JlZjMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LCB0YXJnZXQgPSBfcmVmMy50YXJnZXQ7XG4gICAgICAgIGlmIChhY3RpdmUub3JpZ2luYWwpIHtcbiAgICAgICAgICByZXR1cm4gY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3Blbih7XG4gICAgICAgICAgdGFyZ2V0OiB0YXJnZXRcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgdmFyIGdldE9wdGlvbnMgPSBmdW5jdGlvbiBnZXRPcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gem9vbU9wdGlvbnM7XG4gICAgICB9O1xuICAgICAgdmFyIGdldEltYWdlcyA9IGZ1bmN0aW9uIGdldEltYWdlcygpIHtcbiAgICAgICAgcmV0dXJuIGltYWdlcztcbiAgICAgIH07XG4gICAgICB2YXIgZ2V0Wm9vbWVkSW1hZ2UgPSBmdW5jdGlvbiBnZXRab29tZWRJbWFnZSgpIHtcbiAgICAgICAgcmV0dXJuIGFjdGl2ZS5vcmlnaW5hbDtcbiAgICAgIH07XG4gICAgICB2YXIgaW1hZ2VzID0gW107XG4gICAgICB2YXIgZXZlbnRMaXN0ZW5lcnMgPSBbXTtcbiAgICAgIHZhciBpc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgdmFyIHNjcm9sbFRvcCA9IDA7XG4gICAgICB2YXIgem9vbU9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgdmFyIGFjdGl2ZSA9IHtcbiAgICAgICAgb3JpZ2luYWw6IG51bGwsXG4gICAgICAgIHpvb21lZDogbnVsbCxcbiAgICAgICAgem9vbWVkSGQ6IG51bGwsXG4gICAgICAgIHRlbXBsYXRlOiBudWxsXG4gICAgICB9O1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzZWxlY3RvcikgPT09IFwiW29iamVjdCBPYmplY3RdXCIpIHtcbiAgICAgICAgem9vbU9wdGlvbnMgPSBzZWxlY3RvcjtcbiAgICAgIH0gZWxzZSBpZiAoc2VsZWN0b3IgfHwgdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGF0dGFjaChzZWxlY3Rvcik7XG4gICAgICB9XG4gICAgICB6b29tT3B0aW9ucyA9IF9leHRlbmRzKHtcbiAgICAgICAgbWFyZ2luOiAwLFxuICAgICAgICBiYWNrZ3JvdW5kOiBcIiNmZmZcIixcbiAgICAgICAgc2Nyb2xsT2Zmc2V0OiA0MCxcbiAgICAgICAgY29udGFpbmVyOiBudWxsLFxuICAgICAgICB0ZW1wbGF0ZTogbnVsbFxuICAgICAgfSwgem9vbU9wdGlvbnMpO1xuICAgICAgdmFyIG92ZXJsYXkgPSBjcmVhdGVPdmVybGF5KHpvb21PcHRpb25zLmJhY2tncm91bmQpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIF9oYW5kbGVDbGljayk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgX2hhbmRsZUtleVVwKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgX2hhbmRsZVNjcm9sbCk7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBjbG9zZSk7XG4gICAgICB2YXIgem9vbSA9IHtcbiAgICAgICAgb3Blbjogb3BlbixcbiAgICAgICAgY2xvc2U6IGNsb3NlLFxuICAgICAgICB0b2dnbGU6IHRvZ2dsZSxcbiAgICAgICAgdXBkYXRlOiB1cGRhdGUsXG4gICAgICAgIGNsb25lOiBjbG9uZSxcbiAgICAgICAgYXR0YWNoOiBhdHRhY2gsXG4gICAgICAgIGRldGFjaDogZGV0YWNoLFxuICAgICAgICBvbjogb24sXG4gICAgICAgIG9mZjogb2ZmLFxuICAgICAgICBnZXRPcHRpb25zOiBnZXRPcHRpb25zLFxuICAgICAgICBnZXRJbWFnZXM6IGdldEltYWdlcyxcbiAgICAgICAgZ2V0Wm9vbWVkSW1hZ2U6IGdldFpvb21lZEltYWdlXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHpvb207XG4gICAgfTtcbiAgICBmdW5jdGlvbiBzdHlsZUluamVjdChjc3MsIHJlZikge1xuICAgICAgaWYgKHJlZiA9PT0gdm9pZCAwKSByZWYgPSB7fTtcbiAgICAgIHZhciBpbnNlcnRBdCA9IHJlZi5pbnNlcnRBdDtcbiAgICAgIGlmICghY3NzIHx8IHR5cGVvZiBkb2N1bWVudCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgaGVhZCA9IGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdO1xuICAgICAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICAgICAgc3R5bGUudHlwZSA9IFwidGV4dC9jc3NcIjtcbiAgICAgIGlmIChpbnNlcnRBdCA9PT0gXCJ0b3BcIikge1xuICAgICAgICBpZiAoaGVhZC5maXJzdENoaWxkKSB7XG4gICAgICAgICAgaGVhZC5pbnNlcnRCZWZvcmUoc3R5bGUsIGhlYWQuZmlyc3RDaGlsZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgICAgfVxuICAgICAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICAgICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBjc3MgPSBcIi5tZWRpdW0tem9vbS1vdmVybGF5e3Bvc2l0aW9uOmZpeGVkO3RvcDowO3JpZ2h0OjA7Ym90dG9tOjA7bGVmdDowO29wYWNpdHk6MDt0cmFuc2l0aW9uOm9wYWNpdHkgLjNzO3dpbGwtY2hhbmdlOm9wYWNpdHl9Lm1lZGl1bS16b29tLS1vcGVuZWQgLm1lZGl1bS16b29tLW92ZXJsYXl7Y3Vyc29yOnBvaW50ZXI7Y3Vyc29yOnpvb20tb3V0O29wYWNpdHk6MX0ubWVkaXVtLXpvb20taW1hZ2V7Y3Vyc29yOnBvaW50ZXI7Y3Vyc29yOnpvb20taW47dHJhbnNpdGlvbjp0cmFuc2Zvcm0gLjNzIGN1YmljLWJlemllciguMiwwLC4yLDEpfS5tZWRpdW0tem9vbS1pbWFnZS0taGlkZGVue3Zpc2liaWxpdHk6aGlkZGVufS5tZWRpdW0tem9vbS1pbWFnZS0tb3BlbmVke3Bvc2l0aW9uOnJlbGF0aXZlO2N1cnNvcjpwb2ludGVyO2N1cnNvcjp6b29tLW91dDt3aWxsLWNoYW5nZTp0cmFuc2Zvcm19XCI7XG4gICAgc3R5bGVJbmplY3QoY3NzKTtcbiAgICByZXR1cm4gbWVkaXVtWm9vbTtcbiAgfSk7XG4oKCkgPT4ge1xuICAgIGxldFxuICAgICAgICBzd2lwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3RoZXItc2VydmljZXNfX3N3aXBlcicpLFxuICAgICAgICBzd2lwZXJMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm90aGVyLXNlcnZpY2VzX19saXN0JyksXG4gICAgICAgIHN3aXBlcldpZHRoID0gcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZShzd2lwZXIpLndpZHRoKSxcbiAgICAgICAgc3dpcGVyTGlzdFdpZHRoID0gcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZShzd2lwZXJMaXN0KS53aWR0aCk7XG5cblxuICAgIHdpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgIGxldCBoZWlnaHRPZlN3aXBlciA9IGdldENvbXB1dGVkU3R5bGUoc3dpcGVyKS5oZWlnaHQ7XG4gICAgICAgIHN3aXBlci5zdHlsZS5oZWlnaHQgPSBgJHtwYXJzZUludChoZWlnaHRPZlN3aXBlcikgKyA0MH1weGA7XG4gICAgfVxuXG5cbiAgICBzd2lwZXJMaXN0LnN0eWxlLm1hcmdpbkxlZnQgPSAnMHB4JztcblxuXG4gICAgZnVuY3Rpb24gc3dpcGUoZXZlbnQpIHtcblxuICAgICAgICBzd2lwZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHN3aXRjaE9mZlN3aXBlcik7XG5cbiAgICAgICAgZnVuY3Rpb24gc3dpdGNoT2ZmU3dpcGVyKCkge1xuICAgICAgICAgICAgc3dpcGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHN3aXBlTW91c2VNb3ZlT24pO1xuICAgICAgICB9XG5cbiAgICAgICAgc3dpcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBzd2lwZU1vdXNlTW92ZU9mZik7XG5cbiAgICAgICAgbGV0XG4gICAgICAgICAgICBmaXJzdEN1cnNvclBvc2l0aW9uID0gZXZlbnQucGFnZVgsXG4gICAgICAgICAgICBpbml0aWFsQ3Vyc29yUG9zaXRpb24gPSBldmVudC5wYWdlWCxcbiAgICAgICAgICAgIHN1bW1Td2lwZURpc3RhbmNlID0gMCxcbiAgICAgICAgICAgIHdheVRvV2hpY2hTd2lwZUlzTWFkZSxcbiAgICAgICAgICAgIHN3aXBlTGlzdE1hcmdpbkxlZnQsXG4gICAgICAgICAgICBpc0Zhc3RTd2lwZSA9IGZhbHNlO1xuXG4gICAgICAgIHN3aXBlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBzd2lwZU1vdXNlTW92ZU9uKTtcblxuICAgICAgICBmdW5jdGlvbiBzd2lwZU1vdXNlTW92ZU9uKGV2ZW50KSB7XG5cbiAgICAgICAgICAgIGxldFxuICAgICAgICAgICAgICAgIG5ld0N1cnNvclBvc2l0aW9uID0gZXZlbnQucGFnZVgsXG4gICAgICAgICAgICAgICAgc3dpcGVEaXN0YW5jZSA9IE1hdGguYWJzKGluaXRpYWxDdXJzb3JQb3NpdGlvbiAtIG5ld0N1cnNvclBvc2l0aW9uKTtcblxuICAgICAgICAgICAgc3dpcGVMaXN0TWFyZ2luTGVmdCA9IHBhcnNlSW50KHN3aXBlckxpc3Quc3R5bGUubWFyZ2luTGVmdCk7XG5cbiAgICAgICAgICAgIGlmIChuZXdDdXJzb3JQb3NpdGlvbiA8IGluaXRpYWxDdXJzb3JQb3NpdGlvbikgd2F5VG9XaGljaFN3aXBlSXNNYWRlID0gJ2xlZnQnO1xuICAgICAgICAgICAgZWxzZSBpZiAobmV3Q3Vyc29yUG9zaXRpb24gPiBpbml0aWFsQ3Vyc29yUG9zaXRpb24pIHdheVRvV2hpY2hTd2lwZUlzTWFkZSA9ICdyaWdodCc7XG4gICAgICAgICAgICBlbHNlIGlmIChuZXdDdXJzb3JQb3NpdGlvbiA9IGluaXRpYWxDdXJzb3JQb3NpdGlvbikgd2F5VG9XaGljaFN3aXBlSXNNYWRlID0gd2F5VG9XaGljaFN3aXBlSXNNYWRlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBzd2l0Y2god2F5VG9XaGljaFN3aXBlSXNNYWRlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbGVmdCc6XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKC1zd2lwZUxpc3RNYXJnaW5MZWZ0ID49IChzd2lwZXJMaXN0V2lkdGggLSBzd2lwZXJXaWR0aCkpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgc3dpcGVyTGlzdC5zdHlsZS5tYXJnaW5MZWZ0ID0gYCR7c3dpcGVMaXN0TWFyZ2luTGVmdCAtIHN3aXBlRGlzdGFuY2V9cHhgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChzd2lwZUxpc3RNYXJnaW5MZWZ0ID49IDAgKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIHN3aXBlckxpc3Quc3R5bGUubWFyZ2luTGVmdCA9IGAke3N3aXBlTGlzdE1hcmdpbkxlZnQgKyBzd2lwZURpc3RhbmNlfXB4YDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3VtbVN3aXBlRGlzdGFuY2UgKz0gc3dpcGVEaXN0YW5jZTtcbiAgICAgICAgICAgIGluaXRpYWxDdXJzb3JQb3NpdGlvbiA9IG5ld0N1cnNvclBvc2l0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc3dpcGVNb3VzZU1vdmVPZmYoZXZlbnQpIHtcbiAgICAgICAgICAgIHN3aXBlci5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBzd2lwZU1vdXNlTW92ZU9uKTtcblxuICAgICAgICAgICAgaXNGYXN0U3dpcGUgPSAoc3VtbVN3aXBlRGlzdGFuY2UgPj0gMTAwKSA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgICAgIGlmICghaXNGYXN0U3dpcGUpIHJldHVybjtcblxuICAgICAgICAgICAgc3VtbVN3aXBlRGlzdGFuY2UgPSAoc3VtbVN3aXBlRGlzdGFuY2UgPiAoc3dpcGVyTGlzdFdpZHRoIC0gc3dpcGVyV2lkdGgpKSA/IChzd2lwZXJMaXN0V2lkdGggLSBzd2lwZXJXaWR0aCkgOiBzdW1tU3dpcGVEaXN0YW5jZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IGFkZGl0aW9uYWxTd2lwZURpc3RhbmNlID0gKHN1bW1Td2lwZURpc3RhbmNlIC8gMS41KTsgLy8gPC0tLS0gY2hhbmdlIHN3aXBlIHNwZWVkLCBmb3IgZXhhbXBsZTogKHN1bW1Td2lwZURpc3RhbmNlIC8gMi41KVxuXG5cbiAgICAgICAgICAgIGxldCBsYXN0Q3Vyc29yUG9zaXRpb24gPSBldmVudC5wYWdlWDtcbiAgICAgICAgICAgIHdheVRvV2hpY2hTd2lwZUlzTWFkZSA9IChsYXN0Q3Vyc29yUG9zaXRpb24gPCBmaXJzdEN1cnNvclBvc2l0aW9uKSA/ICdsZWZ0JyA6ICdyaWdodCc7XG5cbiAgICAgICAgICAgIHN3aXBlTGlzdE1hcmdpbkxlZnQgPSBwYXJzZUludChzd2lwZXJMaXN0LnN0eWxlLm1hcmdpbkxlZnQpO1xuXG4gICAgICAgICAgICBzd2l0Y2god2F5VG9XaGljaFN3aXBlSXNNYWRlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbGVmdCc6XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKC1zd2lwZUxpc3RNYXJnaW5MZWZ0ID49IChzd2lwZXJMaXN0V2lkdGggLSBzd2lwZXJXaWR0aCkpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxTd2lwZURpc3RhbmNlID0gKGFkZGl0aW9uYWxTd2lwZURpc3RhbmNlID4gKChzd2lwZXJMaXN0V2lkdGggLSBzd2lwZXJXaWR0aCkgKyBzd2lwZUxpc3RNYXJnaW5MZWZ0KSkgPyAoKHN3aXBlckxpc3RXaWR0aCAtIHN3aXBlcldpZHRoKSArIHN3aXBlTGlzdE1hcmdpbkxlZnQpIDogYWRkaXRpb25hbFN3aXBlRGlzdGFuY2U7XG5cbiAgICAgICAgICAgICAgICAgICAgc3dpcGVyTGlzdC5zdHlsZS50cmFuc2l0aW9uID0gJ2FsbCAwLjM1cyc7XG4gICAgICAgICAgICAgICAgICAgIHN3aXBlckxpc3Quc3R5bGUubWFyZ2luTGVmdCA9IGAke3N3aXBlTGlzdE1hcmdpbkxlZnQgLSBhZGRpdGlvbmFsU3dpcGVEaXN0YW5jZX1weGA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN3aXBlTGlzdE1hcmdpbkxlZnQgPj0gMCApIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICBhZGRpdGlvbmFsU3dpcGVEaXN0YW5jZSA9IChhZGRpdGlvbmFsU3dpcGVEaXN0YW5jZSA+IC1zd2lwZUxpc3RNYXJnaW5MZWZ0KSA/IC1zd2lwZUxpc3RNYXJnaW5MZWZ0IDogYWRkaXRpb25hbFN3aXBlRGlzdGFuY2U7XG5cbiAgICAgICAgICAgICAgICAgICAgc3dpcGVyTGlzdC5zdHlsZS50cmFuc2l0aW9uID0gJ2FsbCAwLjM1cyc7XG4gICAgICAgICAgICAgICAgICAgIHN3aXBlckxpc3Quc3R5bGUubWFyZ2luTGVmdCA9IGAke3N3aXBlTGlzdE1hcmdpbkxlZnQgKyBhZGRpdGlvbmFsU3dpcGVEaXN0YW5jZX1weGA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHN3aXBlckxpc3Quc3R5bGUudHJhbnNpdGlvbiA9ICdhbGwgMHMnO1xuICAgICAgICAgICAgfSwgMjUwKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc3dpcGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBzd2lwZU1vdXNlTW92ZU9mZik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzd2lwZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgc3dpcGUpO1xufSkoKTtcbigoKSA9PiB7XG4gIGNvbnN0IG1vZGFsVHJpZ2dlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcqW2RhdGEtbW9kYWwtdGFyZ2V0XScpO1xuICBjb25zdCBjbG9zZU1vZGFsQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJypbZGF0YS1tb2RhbC1jbG9zZV0nKTtcbiAgbGV0IG9wZW5lZE1vZGFsSUQ7XG5cbiAgY29uc3Qgb3Blbk1vZGFsV2luZG93ID0gKGV2dCkgPT4ge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2dC5jdXJyZW50VGFyZ2V0O1xuICAgIGNvbnN0IG1vZGFsSUQgPSB0YXJnZXQuZGF0YXNldC5tb2RhbFRhcmdldDtcbiAgICBjb25zdCB0YXJnZXRNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1vZGFsSUQpO1xuXG4gICAgKG9wZW5lZE1vZGFsSUQgIT09IHVuZGVmaW5lZCkgPyBjbG9zZU1vZGFsV2luZG93KG9wZW5lZE1vZGFsSUQpIDogbnVsbDtcblxuICAgIChtb2RhbElEID09PSAnc2VydmljZS1leGFtcGxlJykgPyBjcmVhdGVTZXJ2aWNlRXhhbXBsZU1vZGFsKHRhcmdldCwgdGFyZ2V0TW9kYWwpIDogbnVsbDtcblxuICAgIG9wZW5lZE1vZGFsSUQgPSBtb2RhbElEO1xuXG4gICAgdGFyZ2V0TW9kYWwuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5jbGFzc0xpc3QuYWRkKCdmaXhlZCcpO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VNb2RhbEJ5QmFja2dyb3VuZCk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBjbG9zZU1vZGFsQnlFc2MpO1xuXG4gICAgY29uc3RcbiAgICAgIGZvY3VzYWJsZUVsZW1lbnRzID0gdGFyZ2V0TW9kYWwucXVlcnlTZWxlY3RvckFsbCgnYVtocmVmXTpub3QoW2Rpc2FibGVkXSksIGJ1dHRvbjpub3QoW2Rpc2FibGVkXSksIHRleHRhcmVhOm5vdChbZGlzYWJsZWRdKSwgaW5wdXRbdHlwZT1cInRleHRcIl06bm90KFtkaXNhYmxlZF0pLCBpbnB1dFt0eXBlPVwicmFkaW9cIl06bm90KFtkaXNhYmxlZF0pLCBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl06bm90KFtkaXNhYmxlZF0pLCBzZWxlY3Q6bm90KFtkaXNhYmxlZF0pJyksXG4gICAgICBmaXJzdEZvY3VzYWJsZUVsZW1lbnQgPSBmb2N1c2FibGVFbGVtZW50c1swXSxcbiAgICAgIGxhc3RGb2N1c2FibGVFbGVtZW50ID0gZm9jdXNhYmxlRWxlbWVudHNbZm9jdXNhYmxlRWxlbWVudHMubGVuZ3RoIC0gMV07XG5cbiAgICBmdW5jdGlvbiBsb2NrRm9jdXNJbk1vZGFsKGV2ZW50KSB7XG4gICAgICBpZiAoZXZlbnQua2V5ID09PSAnVGFiJyB8fCBldmVudC5rZXlDb2RlID09PSA5KSB7XG4gICAgICAgIGlmIChldmVudC5zaGlmdEtleSkge1xuICAgICAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBmaXJzdEZvY3VzYWJsZUVsZW1lbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBsYXN0Rm9jdXNhYmxlRWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gbGFzdEZvY3VzYWJsZUVsZW1lbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7ICBcbiAgICAgICAgICAgIGZpcnN0Rm9jdXNhYmxlRWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRhcmdldE1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBsb2NrRm9jdXNJbk1vZGFsKTtcblxuICB9O1xuXG4gIGNvbnN0IGNsb3NlTW9kYWxCeUVzYyA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgIGNsb3NlTW9kYWxXaW5kb3cob3BlbmVkTW9kYWxJRCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGNsb3NlTW9kYWxCeUJhY2tncm91bmQgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RhbF9fYmcnKSkge1xuICAgICAgY2xvc2VNb2RhbFdpbmRvdyhvcGVuZWRNb2RhbElEKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY2xvc2VNb2RhbEJ5QnV0dG9uID0gKGV2dCkgPT4gY2xvc2VNb2RhbFdpbmRvdyhldnQuY3VycmVudFRhcmdldC5kYXRhc2V0Lm1vZGFsQ2xvc2UpO1xuXG4gIGNvbnN0IGNsb3NlTW9kYWxXaW5kb3cgPSAobW9kYWxJRCkgPT4ge1xuICAgIGNvbnN0IHRhcmdldE1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobW9kYWxJRCk7XG5cbiAgICB0YXJnZXRNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmNsYXNzTGlzdC5yZW1vdmUoJ2ZpeGVkJyk7XG5cbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZU1vZGFsQnlCYWNrZ3JvdW5kKTtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGNsb3NlTW9kYWxCeUVzYyk7XG4gICAgLy8gdGFyZ2V0TW9kYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGxvY2tGb2N1c0luTW9kYWwpO1xuICB9O1xuXG4gIGNvbnN0IGluaXRpYWxpemVNb2RhbFRyaWdnZXJzID0gKCkgPT4ge1xuICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIG1vZGFsVHJpZ2dlcnMpIHtcbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5Nb2RhbFdpbmRvdyk7XG4gICAgfVxuICB9O1xuXG4gIGNsb3NlTW9kYWxCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlTW9kYWxCeUJ1dHRvbikpO1xuXG4gIHdpbmRvdy5tb2RhbHMgPSB7XG4gICAgb3Blbk1vZGFsV2luZG93OiBvcGVuTW9kYWxXaW5kb3csXG4gICAgY2xvc2VNb2RhbFdpbmRvdzogY2xvc2VNb2RhbFdpbmRvdyxcbiAgfTtcblxuICBmdW5jdGlvbiBjcmVhdGVTZXJ2aWNlRXhhbXBsZU1vZGFsKHRhcmdldCwgdGFyZ2V0TW9kYWwpIHtcbiAgICBjb25zdFxuICAgICAgc2VydmljZVRpdGxlID0gdGFyZ2V0LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignLndoYXQteW91LWdldF9faXRlbS10aXRsZScpLnRleHRDb250ZW50LnJlcGxhY2UoL1xccysvZywnICcpLnRyaW0oKSxcbiAgICAgIG1vZGFsVGl0bGUgPSB0YXJnZXRNb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX3RpdGxlJyksXG4gICAgICBwYXRoVG9JbWFnZSA9IHRhcmdldC5kYXRhc2V0Lm1vZGFsU2VydmljZUV4YW1wbGVJbWFnZSxcbiAgICAgIG1vZGFsSW1hZ2UgPSB0YXJnZXRNb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2ltYWdlJyk7XG4gICAgXG4gICAgbW9kYWxUaXRsZS50ZXh0Q29udGVudCA9IHNlcnZpY2VUaXRsZTtcbiAgICBtb2RhbEltYWdlLnNyYyA9IHBhdGhUb0ltYWdlO1xuICB9XG5cbiAgaW5pdGlhbGl6ZU1vZGFsVHJpZ2dlcnMoKTtcblxufSkoKTtcbigoKSA9PiB7XG4gIGNvbnN0IHNjcm9sbGluZ0xpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnKltkYXRhLXNjcm9sbC1saW5rXScpO1xuXG4gIGNvbnN0IHNjcm9sbFRvRWxlbWVudCA9IChldnQpID0+IHtcbiAgICBjb25zdCB0YXJnZXQgPSBldnQudGFyZ2V0O1xuICAgIGNvbnN0IHNjcm9sbFRvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0LmRhdGFzZXQuc2Nyb2xsTGluayk7XG5cbiAgICBpZiAoc2Nyb2xsVG8pIHtcbiAgICAgIHNjcm9sbFRvLnNjcm9sbEludG9WaWV3KHtcbiAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgaWYoQm9vbGVhbihzY3JvbGxpbmdMaW5rcykpIHtcbiAgICBzY3JvbGxpbmdMaW5rcy5mb3JFYWNoKGxpbmsgPT4gbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNjcm9sbFRvRWxlbWVudCkpO1xuICB9XG59KSgpO1xuKCgpID0+IHtcblxuICBmdW5jdGlvbiBsYXp5bG9hZE9uTG9hZFBhZ2UoKSB7XG4gICAgY29uc3QgbGF6eVBpY3R1cmVzID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwicGljdHVyZS5sYXp5XCIpKTtcblxuICAgIGxhenlQaWN0dXJlcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xuICAgICAgbGV0IGxhenlQaWN0dXJlID0gZW50cnk7XG4gICAgICBsZXQgbGF6eVdlYnBJbWFnZSA9IGxhenlQaWN0dXJlLnF1ZXJ5U2VsZWN0b3IoJ1t0eXBlPVwiaW1hZ2Uvd2VicFwiXScpO1xuICAgICAgbGV0IGxhenlJbWFnZSA9IGxhenlQaWN0dXJlLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpO1xuXG4gICAgICBsYXp5V2VicEltYWdlLnNyY3NldCA9IGxhenlXZWJwSW1hZ2UuZGF0YXNldC5zcmM7XG4gICAgICBsYXp5SW1hZ2Uuc3JjID0gbGF6eUltYWdlLmRhdGFzZXQuc3JjO1xuXG4gICAgICBsYXp5UGljdHVyZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtcGljdHVyZScsICdvcGFjaXR5LTEnKTtcbiAgICAgIGxhenlQaWN0dXJlLmNsYXNzTGlzdC5yZW1vdmUoXCJsYXp5XCIpO1xuICAgIH0pO1xuICB9XG5cbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGxhenlsb2FkT25Mb2FkUGFnZSk7XG5cbn0pKCk7XG4oKCkgPT4ge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uKCkge1xuICAgIHZhciBtYWluQmxvY2tzID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNtb290aC1kaXNwbGF5LWJsb2NrXCIpKTtcbiAgXG4gICAgaWYgKFwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXJcIiBpbiB3aW5kb3cpIHtcbiAgICAgIGxldCBtYWluQmxvY2tPYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihmdW5jdGlvbihlbnRyaWVzLCBvYnNlcnZlcikge1xuICAgICAgICBlbnRyaWVzLmZvckVhY2goZnVuY3Rpb24oZW50cnkpIHtcbiAgICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICAgIGxldCBtYWluQmxvY2sgPSBlbnRyeS50YXJnZXQ7XG5cbiAgICAgICAgICAgIG1haW5CbG9jay5zZXRBdHRyaWJ1dGUoXCJkYXRhLXNtb290aC1kaXNwbGF5LWJsb2NrXCIsIFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgbWFpbkJsb2NrT2JzZXJ2ZXIudW5vYnNlcnZlKG1haW5CbG9jayk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICBcbiAgICAgIG1haW5CbG9ja3MuZm9yRWFjaChmdW5jdGlvbihtYWluQmxvY2spIHtcbiAgICAgICAgbWFpbkJsb2NrT2JzZXJ2ZXIub2JzZXJ2ZShtYWluQmxvY2spO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgfSkoKTtcblxubWVkaXVtWm9vbSgnW2RhdGEtem9vbWFibGVdJyk7Il19
