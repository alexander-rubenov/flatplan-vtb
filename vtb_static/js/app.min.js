"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):window.mediumZoom=t()}(0,function(){var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},t=function(e){return"IMG"===e.tagName},o=function(e){return e&&1===e.nodeType},n=function(e){return".svg"===(e.currentSrc||e.src).substr(-4).toLowerCase()},i=function(e){try{return Array.isArray(e)?e.filter(t):function(e){return NodeList.prototype.isPrototypeOf(e)}(e)?[].slice.call(e).filter(t):o(e)?[e].filter(t):"string"==typeof e?[].slice.call(document.querySelectorAll(e)).filter(t):[]}catch(e){throw new TypeError("The provided selector is invalid.\nExpects a CSS selector, a Node element, a NodeList or an array.\nSee: https://github.com/francoischalifour/medium-zoom")}},r=function(t,o){var n=e({bubbles:!1,cancelable:!1,detail:void 0},o);if("function"==typeof window.CustomEvent)return new CustomEvent(t,n);var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),i};return function(e,t){void 0===t&&(t={});var o=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===o&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}"),function t(d){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=window.Promise||function(e){function t(){}e(t,t)},l=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];var n=t.reduce(function(e,t){return[].concat(e,i(t))},[]);return n.filter(function(e){return-1===f.indexOf(e)}).forEach(function(e){f.push(e),e.classList.add("medium-zoom-image")}),p.forEach(function(e){var t=e.type,o=e.listener,i=e.options;n.forEach(function(e){e.addEventListener(t,o,i)})}),z},m=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target,i=function(){var t={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},i=void 0,r=void 0;if(y.container)if(y.container instanceof Object)i=(t=e({},t,y.container)).width-t.left-t.right-2*y.margin,r=t.height-t.top-t.bottom-2*y.margin;else{var d=(o(y.container)?y.container:document.querySelector(y.container)).getBoundingClientRect(),a=d.width,c=d.height,l=d.left,m=d.top;t=e({},t,{width:a,height:c,left:l,top:m})}i=i||t.width-2*y.margin,r=r||t.height-2*y.margin;var s=h.zoomedHd||h.original,u=n(s)?i:s.naturalWidth||i,f=n(s)?r:s.naturalHeight||r,p=s.getBoundingClientRect(),v=p.top,g=p.left,b=p.width,z=p.height,E=Math.min(u,i)/b,w=Math.min(f,r)/z,L=Math.min(E,w),S="scale("+L+") translate3d("+((i-b)/2-g+y.margin+t.left)/L+"px, "+((r-z)/2-v+y.margin+t.top)/L+"px, 0)";h.zoomed.style.transform=S,h.zoomedHd&&(h.zoomedHd.style.transform=S)};return new c(function(e){if(t&&-1===f.indexOf(t))e(z);else if(h.zoomed)e(z);else{if(t)h.original=t;else{if(!(f.length>0))return void e(z);var n=f;h.original=n[0]}if(h.original.dispatchEvent(r("medium-zoom:open",{detail:{zoom:z}})),g=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,v=!0,h.zoomed=function(e){var t=e.getBoundingClientRect(),o=t.top,n=t.left,i=t.width,r=t.height,d=e.cloneNode(),a=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,c=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return d.removeAttribute("id"),d.style.position="absolute",d.style.top=o+a+"px",d.style.left=n+c+"px",d.style.width=i+"px",d.style.height=r+"px",d.style.transform="",d}(h.original),document.body.appendChild(b),y.template){var d=o(y.template)?y.template:document.querySelector(y.template);h.template=document.createElement("div"),h.template.appendChild(d.content.cloneNode(!0)),document.body.appendChild(h.template)}if(document.body.appendChild(h.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),h.original.classList.add("medium-zoom-image--hidden"),h.zoomed.classList.add("medium-zoom-image--opened"),h.zoomed.addEventListener("click",s),h.zoomed.addEventListener("transitionend",function t(){v=!1,h.zoomed.removeEventListener("transitionend",t),h.original.dispatchEvent(r("medium-zoom:opened",{detail:{zoom:z}})),e(z)}),h.original.getAttribute("data-zoom-src")){h.zoomedHd=h.zoomed.cloneNode(),h.zoomedHd.removeAttribute("srcset"),h.zoomedHd.removeAttribute("sizes"),h.zoomedHd.src=h.zoomed.getAttribute("data-zoom-src"),h.zoomedHd.onerror=function(){clearInterval(a),console.warn("Unable to reach the zoom image target "+h.zoomedHd.src),h.zoomedHd=null,i()};var a=setInterval(function(){h.zoomedHd.complete&&(clearInterval(a),h.zoomedHd.classList.add("medium-zoom-image--opened"),h.zoomedHd.addEventListener("click",s),document.body.appendChild(h.zoomedHd),i())},10)}else if(h.original.hasAttribute("srcset")){h.zoomedHd=h.zoomed.cloneNode(),h.zoomedHd.removeAttribute("sizes");var c=h.zoomedHd.addEventListener("load",function(){h.zoomedHd.removeEventListener("load",c),h.zoomedHd.classList.add("medium-zoom-image--opened"),h.zoomedHd.addEventListener("click",s),document.body.appendChild(h.zoomedHd),i()})}else i()}})},s=function(){return new c(function(e){!v&&h.original?(v=!0,document.body.classList.remove("medium-zoom--opened"),h.zoomed.style.transform="",h.zoomedHd&&(h.zoomedHd.style.transform=""),h.template&&(h.template.style.transition="opacity 150ms",h.template.style.opacity=0),h.original.dispatchEvent(r("medium-zoom:close",{detail:{zoom:z}})),h.zoomed.addEventListener("transitionend",function t(){h.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(h.zoomed),h.zoomedHd&&document.body.removeChild(h.zoomedHd),document.body.removeChild(b),h.zoomed.classList.remove("medium-zoom-image--opened"),h.template&&document.body.removeChild(h.template),v=!1,h.zoomed.removeEventListener("transitionend",t),h.original.dispatchEvent(r("medium-zoom:closed",{detail:{zoom:z}})),h.original=null,h.zoomed=null,h.zoomedHd=null,h.template=null,e(z)})):e(z)})},u=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target;return h.original?s():m({target:e})},f=[],p=[],v=!1,g=0,y=a,h={original:null,zoomed:null,zoomedHd:null,template:null};"[object Object]"===Object.prototype.toString.call(d)?y=d:(d||"string"==typeof d)&&l(d);var b=function(e){var t=document.createElement("div");return t.classList.add("medium-zoom-overlay"),t.style.background=e,t}((y=e({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},y)).background);document.addEventListener("click",function(e){var t=e.target;t!==b?-1!==f.indexOf(t)&&u({target:t}):s()}),document.addEventListener("keyup",function(e){27===(e.keyCode||e.which)&&s()}),document.addEventListener("scroll",function(){if(!v&&h.original){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(g-e)>y.scrollOffset&&setTimeout(s,150)}}),window.addEventListener("resize",s);var z={open:m,close:s,toggle:u,update:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t;if(t.background&&(b.style.background=t.background),t.container&&t.container instanceof Object&&(n.container=e({},y.container,t.container)),t.template){var i=o(t.template)?t.template:document.querySelector(t.template);n.template=i}return y=e({},y,n),f.forEach(function(e){e.dispatchEvent(r("medium-zoom:update",{detail:{zoom:z}}))}),z},clone:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t(e({},y,o))},attach:l,detach:function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];h.zoomed&&s();var n=t.length>0?t.reduce(function(e,t){return[].concat(e,i(t))},[]):f;return n.forEach(function(e){e.classList.remove("medium-zoom-image"),e.dispatchEvent(r("medium-zoom:detach",{detail:{zoom:z}}))}),f=f.filter(function(e){return-1===n.indexOf(e)}),z},on:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f.forEach(function(n){n.addEventListener("medium-zoom:"+e,t,o)}),p.push({type:"medium-zoom:"+e,listener:t,options:o}),z},off:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f.forEach(function(n){n.removeEventListener("medium-zoom:"+e,t,o)}),p=p.filter(function(o){return!(o.type==="medium-zoom:"+e&&o.listener.toString()===t.toString())}),z},getOptions:function(){return y},getImages:function(){return f},getZoomedImage:function(){return h.original}};return z}}),function(){var e=document.querySelector(".other-services__swiper"),t=document.querySelector(".other-services__list"),o=parseInt(getComputedStyle(e).width),n=parseInt(getComputedStyle(t).width);window.onload=function(){var t=getComputedStyle(e).height;e.style.height="".concat(parseInt(t)+40,"px")},t.style.marginLeft="0px",e.addEventListener("mousedown",function(i){e.addEventListener("mouseleave",function(){e.removeEventListener("mousemove",m)}),e.addEventListener("mouseup",function i(c){if(e.removeEventListener("mousemove",m),l>=100){var s=(l=l>n-o?n-o:l)/1.5,u=c.pageX;switch(r=u<a?"left":"right",d=parseInt(t.style.marginLeft),r){case"left":if(-d>=n-o)return;s=s>n-o+d?n-o+d:s,t.style.transition="all 0.35s",t.style.marginLeft="".concat(d-s,"px");break;case"right":if(d>=0)return;s=s>-d?-d:s,t.style.transition="all 0.35s",t.style.marginLeft="".concat(d+s,"px")}setTimeout(function(){t.style.transition="all 0s"},250),e.removeEventListener("mouseup",i)}});var r,d,a=i.pageX,c=i.pageX,l=0;function m(e){var i=e.pageX,a=Math.abs(c-i);switch(d=parseInt(t.style.marginLeft),i<c?r="left":i>c?r="right":(i=c)&&(r=r),r){case"left":if(-d>=n-o)return;t.style.marginLeft="".concat(d-a,"px");break;case"right":if(d>=0)return;t.style.marginLeft="".concat(d+a,"px")}l+=a,c=i}e.addEventListener("mousemove",m)})}(),function(){var e,t=document.querySelectorAll("*[data-modal-target]"),o=document.querySelectorAll("*[data-modal-close]"),n=function(t){var o=t.currentTarget,n=o.dataset.modalTarget,d=document.getElementById(n);void 0!==e&&a(e),"service-example"===n&&function(e,t){var o=e.parentElement.querySelector(".what-you-get__item-title").textContent.replace(/\s+/g," ").trim(),n=t.querySelector(".modal__title"),i=e.dataset.modalServiceExampleImage,r=t.querySelector(".modal__image");n.textContent=o,r.src=i}(o,d),e=n,d.classList.add("visible"),document.querySelector("body").classList.add("fixed"),window.addEventListener("click",r),window.addEventListener("keydown",i);var c=d.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])'),l=c[0],m=c[c.length-1];d.addEventListener("keydown",function(e){"Tab"!==e.key&&9!==e.keyCode||(e.shiftKey?document.activeElement===l&&(e.preventDefault(),m.focus()):document.activeElement===m&&(e.preventDefault(),l.focus()))})},i=function(t){"Escape"===t.key&&a(e)},r=function(t){t.target.classList.contains("modal__bg")&&a(e)},d=function(e){return a(e.currentTarget.dataset.modalClose)},a=function(e){document.getElementById(e).classList.remove("visible"),document.querySelector("body").classList.remove("fixed"),window.removeEventListener("click",r),window.removeEventListener("keydown",i)};o.forEach(function(e){return e.addEventListener("click",d)}),window.modals={openModalWindow:n,closeModalWindow:a},function(){var e=!0,o=!1,i=void 0;try{for(var r,d=t[Symbol.iterator]();!(e=(r=d.next()).done);e=!0)r.value.addEventListener("click",n)}catch(e){o=!0,i=e}finally{try{e||null==d.return||d.return()}finally{if(o)throw i}}}()}(),function(){var e=document.querySelectorAll("*[data-scroll-link]"),t=function(e){var t=e.target,o=document.getElementById(t.dataset.scrollLink);o&&o.scrollIntoView({behavior:"smooth"})};Boolean(e)&&e.forEach(function(e){return e.addEventListener("click",t)})}(),document.addEventListener("DOMContentLoaded",function(){var e=[].slice.call(document.querySelectorAll("picture.lazy"));if("IntersectionObserver"in window){var t=new IntersectionObserver(function(e,o){e.forEach(function(e){if(e.isIntersecting){var o=e.target,n=o.querySelector('[type="image/webp"]'),i=o.querySelector("img");n.srcset=n.dataset.src,i.src=i.dataset.src,o.setAttribute("data-picture","opacity-1"),o.classList.remove("lazy"),t.unobserve(o)}})});e.forEach(function(e){t.observe(e)})}}),document.addEventListener("DOMContentLoaded",function(){var e=[].slice.call(document.querySelectorAll(".smooth-display-block"));if("IntersectionObserver"in window){var t=new IntersectionObserver(function(e,o){e.forEach(function(e){if(e.isIntersecting){var o=e.target;o.setAttribute("data-smooth-display-block","active"),t.unobserve(o)}})});e.forEach(function(e){t.observe(e)})}}),mediumZoom("[data-zoomable]");
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJnbG9iYWwiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIl90eXBlb2YiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJ3aW5kb3ciLCJtZWRpdW1ab29tIiwiX2V4dGVuZHMiLCJPYmplY3QiLCJhc3NpZ24iLCJ0YXJnZXQiLCJpIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwic291cmNlIiwicHJvdG90eXBlIiwiY2FsbCIsImtleSIsImlzU3VwcG9ydGVkIiwibm9kZSIsInRhZ05hbWUiLCJzZWxlY3RvciIsIm5vZGVUeXBlIiwiaXNTdmciLCJpbWFnZSIsImN1cnJlbnRTcmMiLCJpc1Byb3RvdHlwZU9mIiwiZ2V0SW1hZ2VzRnJvbVNlbGVjdG9yIiwiaXNOb2RlIiwiZmlsdGVyIiwiTm9kZUxpc3QiLCJpc05vZGVMaXN0IiwiaXNBcnJheSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlcnIiLCJjcmVhdGVDdXN0b21FdmVudCIsInR5cGUiLCJwYXJhbXMiLCJldmVudFBhcmFtcyIsImNsb25lVGFyZ2V0IiwiX3RlbXBsYXRlJGdldEJvdW5kaW5nIiwidG9wIiwibGVmdCIsIndpZHRoIiwiaGVpZ2h0IiwiY2xvbmUiLCJkb2N1bWVudCIsImNsb25lTm9kZSIsImN1c3RvbUV2ZW50IiwiaW5pdEN1c3RvbUV2ZW50IiwicGFnZVlPZmZzZXQiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxUb3AiLCJzY3JvbGxMZWZ0IiwiYWN0aXZlIiwiY3NzIiwicmVmIiwib3JpZ2luYWwiLCJ6b29tZWQiLCJpbnNlcnRBdCIsImhlYWQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInN0eWxlIiwiY3JlYXRlRWxlbWVudCIsImlzQW5pbWF0aW5nIiwiY2xhc3NMaXN0IiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsInRlbXBsYXRlIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJhcHBlbmRDaGlsZCIsImRpc3BhdGNoRXZlbnQiLCJzdHlsZUluamVjdCIsInBvc2l0aW9uIiwidW5kZWZpbmVkIiwiUHJvbWlzZSIsImZuIiwiYXR0YWNoIiwiX2xlbiIsInNlbGVjdG9ycyIsIkFycmF5IiwiX2tleSIsImV2ZW50Iiwid2hpY2giLCJpbWFnZXNBY2N1bXVsYXRvciIsImN1cnJlbnRTZWxlY3RvciIsImNsb3NlIiwiY29uY2F0IiwibmV3SW1hZ2VzIiwibmV3SW1hZ2UiLCJpbWFnZXMiLCJpbmRleE9mIiwidXBkYXRlIiwib3B0aW9ucyIsInB1c2giLCJuZXdPcHRpb25zIiwiZXZlbnRMaXN0ZW5lcnMiLCJiYWNrZ3JvdW5kIiwiX3JlZiIsIm92ZXJsYXkiLCJsaXN0ZW5lciIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiem9vbSIsIm9wZW4iLCJkZXRhY2giLCJfYW5pbWF0ZSIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwicmlnaHQiLCJib3R0b20iLCJ2aWV3cG9ydFdpZHRoIiwidmlld3BvcnRIZWlnaHQiLCJpbWFnZXNUb0RldGFjaCIsInJlbW92ZSIsImRldGFpbCIsInpvb21PcHRpb25zIiwiY29udGFpbmVyIiwibWFyZ2luIiwiX3pvb21Db250YWluZXIkZ2V0Qm91IiwicXVlcnlTZWxlY3RvciIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIl93aWR0aCIsIl9oZWlnaHQiLCJfbGVmdCIsIl90b3AiLCJ6b29tVGFyZ2V0Iiwiem9vbWVkSGQiLCJuYXR1cmFsV2lkdGgiLCJuYXR1cmFsSGVpZ2h0IiwiX3pvb21UYXJnZXQkZ2V0Qm91bmRpIiwic2NhbGVZIiwiTWF0aCIsIm1pbiIsInNjYWxlWCIsInRyYW5zZm9ybSIsInNjYWxlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2ZW50TGlzdGVuZXIiLCJyZXNvbHZlIiwiYm9keSIsInNsaWNlIiwicGFnZVhPZmZzZXQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJjcmVhdGVPdmVybGF5IiwiY29udGVudCIsIl9oYW5kbGVPcGVuRW5kIiwiX3JlZjIiLCJzcmMiLCJnZXRBdHRyaWJ1dGUiLCJ0cmFuc2xhdGVYIiwidHJhbnNsYXRlWSIsImNvbXBsZXRlIiwiZ2V0Wm9vbVRhcmdldFNpemUiLCJhZGQiLCJoYXNBdHRyaWJ1dGUiLCJsb2FkRXZlbnRMaXN0ZW5lciIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIl9oYW5kbGVDbG9zZUVuZCIsInJlbW92ZUNoaWxkIiwiY2xlYXJJbnRlcnZhbCIsImNvbnNvbGUiLCJ3YXJuIiwidG9TdHJpbmciLCJjYW5jZWxhYmxlIiwidG9nZ2xlIiwia2V5Q29kZSIsImNyZWF0ZUV2ZW50IiwiY3VycmVudFNjcm9sbCIsImFicyIsInNjcm9sbE9mZnNldCIsIl9oYW5kbGVDbGljayIsIl9rZXkyIiwicmVkdWNlIiwib24iLCJvZmYiLCJzd2lwZXJMaXN0Iiwic3dpcGVyV2lkdGgiLCJfcmVmMyIsImdldENvbXB1dGVkU3R5bGUiLCJzd2lwZXIiLCJzd2lwZXJMaXN0V2lkdGgiLCJwYXJzZUludCIsIm9ubG9hZCIsImhlaWdodE9mU3dpcGVyIiwibWFyZ2luTGVmdCIsImdldEltYWdlcyIsInN3aXBlTW91c2VNb3ZlT24iLCJzd2lwZU1vdXNlTW92ZU9mZiIsImdldE9wdGlvbnMiLCJnZXRab29tZWRJbWFnZSIsInN1bW1Td2lwZURpc3RhbmNlIiwibGFzdEN1cnNvclBvc2l0aW9uIiwicGFnZVgiLCJ3YXlUb1doaWNoU3dpcGVJc01hZGUiLCJmaXJzdEN1cnNvclBvc2l0aW9uIiwic3dpcGVMaXN0TWFyZ2luTGVmdCIsImFkZGl0aW9uYWxTd2lwZURpc3RhbmNlIiwidHJhbnNpdGlvbiIsImNyZWF0ZVRleHROb2RlIiwic2V0VGltZW91dCIsIm5ld0N1cnNvclBvc2l0aW9uIiwiaW5pdGlhbEN1cnNvclBvc2l0aW9uIiwic3dpcGVEaXN0YW5jZSIsIm1vZGFsVHJpZ2dlcnMiLCJvcGVuTW9kYWxXaW5kb3ciLCJldnQiLCJtb2RhbElEIiwiZGF0YXNldCIsIm1vZGFsVGFyZ2V0IiwidGFyZ2V0TW9kYWwiLCJnZXRFbGVtZW50QnlJZCIsIm9wZW5lZE1vZGFsSUQiLCJjbG9zZU1vZGFsV2luZG93Iiwic2VydmljZVRpdGxlIiwiY3VycmVudFRhcmdldCIsInRleHRDb250ZW50IiwicmVwbGFjZSIsInRyaW0iLCJtb2RhbFRpdGxlIiwicGF0aFRvSW1hZ2UiLCJjcmVhdGVTZXJ2aWNlRXhhbXBsZU1vZGFsIiwiY2xvc2VNb2RhbEJ5QmFja2dyb3VuZCIsImNsb3NlTW9kYWxCeUVzYyIsImZvY3VzYWJsZUVsZW1lbnRzIiwiZmlyc3RGb2N1c2FibGVFbGVtZW50IiwibGFzdEZvY3VzYWJsZUVsZW1lbnQiLCJzaGlmdEtleSIsInByZXZlbnREZWZhdWx0IiwiYWN0aXZlRWxlbWVudCIsImZvY3VzIiwiaXNGYXN0U3dpcGUiLCJidXR0b24iLCJjbG9zZU1vZGFsQnlCdXR0b24iLCJtb2RhbHMiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uIiwiX2RpZEl0ZXJhdG9yRXJyb3IiLCJfaXRlcmF0b3JFcnJvciIsIl9zdGVwIiwiX2l0ZXJhdG9yIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJuZXh0IiwiZG9uZSIsInZhbHVlIiwicmV0dXJuIiwic2Nyb2xsaW5nTGlua3MiLCJzY3JvbGxUb0VsZW1lbnQiLCJzY3JvbGxUbyIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJCb29sZWFuIiwibGluayIsImxhenlQaWN0dXJlcyIsImVudHJpZXMiLCJvYnNlcnZlciIsImVudHJ5IiwiaXNJbnRlcnNlY3RpbmciLCJsYXp5UGljdHVyZSIsImxhenlXZWJwSW1hZ2UiLCJzcmNzZXQiLCJsYXp5SW1hZ2UiLCJsYXp5UGljdHVyZU9ic2VydmVyIiwidW5vYnNlcnZlIiwibWFpbkJsb2NrcyIsIm1haW5CbG9ja09ic2VydmVyIiwibWFpbkJsb2NrIiwic2V0QXR0cmlidXRlIiwib2JzZXJ2ZSJdLCJtYXBwaW5ncyI6IkFBQUEsK1BBR0EsU0FBVUEsRUFBUUMsR0FDSyxZQUFuQixvQkFBT0MsUUFBUCxZQUFBQyxRQUFPRCxXQUEwQyxvQkFBWEUsT0FBeUJBLE9BQU9GLFFBQVVELElBQThCLG1CQUFYSSxRQUF5QkEsT0FBT0MsSUFBTUQsT0FBT0osR0FBV00sT0FBT0MsV0FBYVAsSUFEbkwsQ0FBQSxFQUFVRCxXQUFWLElBQUFTLEVBRVdDLE9BQVdDLFFBQUEsU0FBQUMsR0FDbEIsSUFBQSxJQUFBQyxFQUFBLEVBQUFBLEVBQUFDLFVBQUFDLE9BQUFGLElBQUEsQ0FHSSxJQUFJRyxFQUFTRixVQUFVRCxHQUZ2QkosSUFBQUEsSUFBV0MsS0FBT0MsRUFDVkQsT0FBT08sVUFBR0gsZUFBcEJJLEtBQTJDRixFQUFBRyxLQUNyQ0gsRUFBU0YsR0FBQUEsRUFBYkssSUFHSVAsT0FBQUEsR0FFSFEsRUFBQSxTQUFBQyxHQUNGLE1BQUEsUUFBQUEsRUFBQUMsU0FHQ0YsRUFBVyxTQUFZQSxHQUN6QixPQUFPQyxHQUFQLElBQU9FLEVBQVBDLFVBUUVDLEVBQVEsU0FBZUMsR0FMekIsTUFBd0NILFVBRHpCRyxFQUFBQyxZQUFvQkosRUFBQUEsS0FDbkJOLFFBQUFBLEdBQVVXLGVBU3hCQyxFQUF3QixTQUErQk4sR0FQdkRPLElBQ0YsT0FBT1AsTUFBQUEsUUFBWUEsR0FEckJBLEVBQUFRLE9BQUFYLEdBUkUsU0FBQUcsR0FURixPQUFBUyxTQUFBZixVQUFBVyxjQUFBTCxHQW9CU1UsQ0FBWVIsR0FDTkMsR0FBQUEsTUFBTUMsS0FBQUEsR0FBY0QsT0FBakNOLEdBREZVLEVBQUFQLEdBYWEsQ0FBRUEsR0FBV1EsT0FBT1gsR0FSM0IsaUJBQUFHLEVBQ1FXLEdBQUFBLE1BQVFYLEtBQUFBLFNBQVdZLGlCQUFBWixJQUFBUSxPQUFBWCxHQUU1QixHQVdELE1BQU9nQixHQVZQLE1BQUlILElBQUFBLFVBQVdWLCtKQWNuQmMsRUFBQSxTQUFBQyxFQUFBQyxHQXFCRSxJQUFJQyxFQUFjL0IsRUFBUyxDQWZ6QmdDLFNBQVcsRUFDVEMsWUFBQUEsRUFBMERDLFlBQU1ELEdBQTJCRSxHQUEvRixHQUFnS0MsbUJBQXRCSCxPQUFBQSxZQUE2QkksT0FBTSxJQUFHSixZQUFBQSxFQUFBQSxHQUNoTCxJQUFJSyxFQUFnQkMsU0FBQ0MsWUFBckIsZUFFQSxPQURBQyxFQUFhQyxnQkFBVUMsRUFBUFosRUFBK0JhLFFBQUFBLEVBQWdCQyxXQUFhTixFQUFjTSxRQUN0RkMsR0FzVUFDLE9BMUJ3RSxTQUF0RUMsRUFBQUMsUUFLT0MsSUFBUEgsSUFBQUUsRUFBQSxJQUNBRixJQUFBQSxFQUFPSSxFQUFQQyxTQUNBTCxHQUFBQSxHQUFBLG9CQUFBUixTQUFBUSxDQUdELElBdkJETSxFQUFBZCxTQUFBYyxNQUFBZCxTQUFBZSxxQkFBQSxRQUFBLEdBK0dBQyxFQUFRaEIsU0FBU2lCLGNBQWMsU0F2Ri9CQyxFQUFBQSxLQUFXLFdBQ0dDLFFBQWRuQixHQUNBUSxFQUFPSSxXQXlGUEUsRUFBS00sYUFBYUosRUFBT0YsRUFBS08sWUFyRjlCUCxFQUFJTixZQUFPYyxHQUVUZCxFQUFNZSxXQUNQUCxFQUFBTyxXQUFBQyxRQUFBZixFQUNERCxFQUFNaUIsWUFBVUMsU0FBQUEsZUFBY3JDLEtBQXVDc0MsQ0FDM0QsK2JBaFVGQyxTQUFXcEUsRUFBdkJlLEdBQ0F3QixJQUFNaUIsRUFBTmxELFVBQXdCd0MsT0FBTixRQUFsQnVCLElBQUEvRCxVQUFBLEdBQUFBLFVBQUEsR0FBQSxHQUNNa0QsRUFBTnpELE9BQXVCdUUsU0FBR3ZCLFNBQTFCd0IsR0FDQWhDLFNBQVlGLEtBQ1pFLEVBQU1pQixFQUFNbEIsSUEyQ1RrQyxFQUFBLFdBUEgsSUFBQSxJQUFBQyxFQUFBbkUsVUFBQUMsT0FBQW1FLEVBQUFDLE1BQUFGLEdBQUFHLEVBQUEsRUFBQUEsRUFBQUgsRUFBQUcsSUEyQ0lGLEVBQVVFLEdBQVF0RSxVQUFVc0UsR0FqQzlCLElBQUtDLEVBQUFILEVBQXVCSSxPQUF4QixTQUF1Q0MsRUFBQUMsR0FDekNDLE1BQUssR0FBQUMsT0FBQUgsRUFBQTFELEVBQUEyRCxLQUNOLElBVUEsT0FiSEcsRUFBQTVELE9BQUEsU0FBQTZELEdBd0NJLE9BQXFDLElBQTlCQyxFQUFPQyxRQUFRRixLQW5DdEJHLFFBQVMsU0FBU0EsR0FDaEJDLEVBQU9DLEtBQUduRixHQUNWb0YsRUFBQUEsVUFBYUYsSUFBakIsdUJBQ0FHLEVBQVlDLFFBQVksU0FBQUMsR0FDdEJDLElBQUFBLEVBQUFELEVBQWNELEtBQWRHLEVBQW1DSCxFQUFBQSxTQUFuQ0osRUFBQUssRUFBQUwsUUFDREwsRUFBQWEsUUFBQSxTQUFBOUUsR0FzQ0dBLEVBQU0rRSxpQkFBaUJuRSxFQUFNaUUsRUFBVVAsT0FuQzFDVSxHQXFGQ0MsRUFBTyxXQTdDUEMsSUFBMkJoRyxHQUFsQkUsVUFBUzhGLE9BQVMsUUFBQS9CLElBQUEvRCxVQUFBLEdBQUFBLFVBQUEsR0FBQSxJQUFBRixPQUN4QmlHLEVBQVkvRixXQUNmb0UsSUFBQUEsRUFBQSxDQUNEckMsTUFBQUcsU0FBQUssZ0JBQUF5RCxZQStDR2hFLE9BQVFFLFNBQVNLLGdCQUFnQjBELGFBOUNqQ3ZELEtBQU9JLEVBQ1Q2QixJQUFLLEVBQ051QixNQUFBLEVBZ0RHQyxPQUFRLEdBOUNWQyxPQUFpQjNCLEVBREU0QixPQUFyQixFQUdBQyxHQUFBQSxFQUFlWixVQUNiOUUsR0FBTXlDLEVBQVVrRCxxQkFBTzNHLE9BRXJCNEcsR0FESTVDLEVBQUFBLEVBQWNyQyxHQUFBQSxFQUFrQmtGLEVBQUFDLFlBQzVCM0UsTUFBQTJFLEVBQUE1RSxLQUFBNEUsRUFBQVIsTUFBQSxFQUFBTyxFQUFBRSxPQUNOZixFQUFNQSxFQUFBQSxPQUFBQSxFQUFBQSxJQUFBQSxFQUFBQSxPQUFBQSxFQUFBQSxFQUFBQSxXQURBLENBRFYsSUFGRmdCLEdBRUU1RixFQUFBeUYsRUFBQUMsV0FBQUQsRUFBQUMsVUFBQXhFLFNBQUEyRSxjQUFBSixFQUFBQyxZQUZGSSx3QkFBQUMsRUFBQUgsRUFBQTdFLE1BQUFpRixFQUFBSixFQUFBNUUsT0FBQWlGLEVBQUFMLEVBQUE5RSxLQUFBb0YsRUFBQU4sRUFBQS9FLElBUU02RSxFQUFVekYsRUFBTyxHQUFTTCxFQUFPLENBQzlCMEYsTUFBQUEsRUFEVHRFLE9BQUFnRixFQUdPcEIsS0FBUHFCLEVBckJGcEYsSUFBQXFGLElBeUJFbkMsRUFBZXFCLEdBQWdCTSxFQUFBM0UsTUFBQSxFQUFBMEUsRUFBQUUsT0FDN0IvRixFQUFNK0UsR0FBaUJlLEVBQXVCakIsT0FBOUMsRUFBd0RQLEVBQXhEeUIsT0FERixJQUFBUSxFQUFBekUsRUFBQTBFLFVBQUExRSxFQUFBRyxTQUdBd0MsRUFBb0IxRSxFQUFBd0csR0FBQWYsRUFBQWUsRUFBQUUsY0FBQWpCLEVBQ1prQixFQUFBM0csRUFEWXdHLEdBQUFkLEVBQUFjLEVBQUFHLGVBQUFqQixFQUVsQlosRUFGa0IwQixFQUFBTCx3QkFBQWpGLEVBQUEwRixFQUFBMUYsSUFBQUMsRUFBQXlGLEVBQUF6RixLQUFBQyxFQUFBd0YsRUFBQXhGLE1BQUFDLEVBQUF1RixFQUFBdkYsT0FHbEJrRCxFQUFTQSxLQUFBQSxJQUFBQSxFQUFBQSxHQUFBQSxFQUhYc0MsRUFBQUMsS0FBQUMsSUFBQUosRUFBQWpCLEdBQUFyRSxFQUtPNEQsRUFBUDZCLEtBQUFDLElBQUFDLEVBQUFILEdBRVFJLEVBQUEsU0FBbUJuQyxFQUFVLG1CQVp2Q1csRUFBQXJFLEdBQUEsRUFBQUQsRUFBQTJFLEVBQUFFLE9BQUFELEVBQUE1RSxNQUFBK0YsRUFZdUMsU0FpRFR4QixFQUFpQnJFLEdBQVUsRUFBbENILEVBQXNDNEUsRUFBWUUsT0FBU0QsRUFBVTdFLEtBQU9nRyxFQWpENUQsU0FDakMzQyxFQUFPcEMsT0FBRzlDLE1BQVVDLFVBQVYySCxFQUNQbEMsRUFBUTBCLFdBQ2J4RyxFQUFNa0gsU0FBQUEsTUFBb0JGLFVBQUFBLElBRzFCLE9BQU8sSUFBRUcsRUFBQUEsU0FBQUMsR0FEWCxHQUFBbEksSUFBQSxJQUFBaUYsRUFBQUMsUUFBQWxGLEdBR0FrSSxFQUFBcEMsUUFVSU0sR0FBQUEsRUFMY3BELE9BTWRxRCxFQUFRUCxPQURSTSxDQUlGLEdBQUlHLEVBc0RGM0QsRUFBT0csU0FBVy9DLE1BckRoQjJHLENBQUFBLEtBQUFBLEVBQVlDLE9BQVcsR0FDekIsWUFHRUwsRUFBQUEsR0FIRixJQUFJSSxFQUFZQyxFQUNkQSxFQUFBQSxTQUFZL0csRUFBYStHLEdBUXZCMUUsR0FtRE5VLEVBQU9HLFNBQVNlLGNBQWNyQyxFQUFrQixtQkFBb0IsQ0F0RGhFaUYsT0FBSUksQ0FBSmhCLEtBQW1FbUIsTUFBbkV2RSxFQUF5TC9DLE9BQUdtSCxhQUFxQjFFLFNBQWpOSyxnQkFBQUMsV0FBQU4sU0FBQStGLEtBQUF6RixXQUFBLEVBNERKWSxHQUFjLEVBM0RWc0QsRUFBQUEsT0EzTE13QixTQUFvQjdHLEdBQy9CLElBQUFPLEVBQUE0QixFQUFBc0Qsd0JBQUFqRixFQUFBRCxFQUFBQyxJQUFBQyxFQUFBRixFQUFBRSxLQUFBQyxFQUFBSCxFQUFBRyxNQUFBQyxFQUFBSixFQUFBSSxPQWNDQyxFQUFRdUIsRUFBU3JCLFlBYm5CSyxFQUFBL0MsT0FBQTZDLGFBQUFKLFNBQUFLLGdCQUFBQyxXQUFBTixTQUFBK0YsS0FBQXpGLFdBQUEsRUFDQUMsRUFBWWhELE9BQUEwSSxhQUFBakcsU0FBQUssZ0JBQUFFLFlBQUFQLFNBQUErRixLQUFBeEYsWUFBQSxFQU9kK0MsT0FORXZELEVBQU1tRyxnQkFBYyxNQUNyQm5HLEVBQUFpQixNQUFBWSxTQUFBLFdBakJIN0IsRUFBQWlCLE1BQUFyQixJQUFBQSxFQUFBVyxFQUFBLEtBaUNFUCxFQUFNaUIsTUFBTXBCLEtBQU9BLEVBQU9XLEVBQWEsS0FkckM0RixFQUFBQSxNQUFBQSxNQUFnQnRHLEVBQVNzRyxLQUMzQnBHLEVBQUl1RCxNQUFVdEQsT0FBU2lCLEVBQUFBLEtBQ3ZCcUMsRUFBUW5DLE1BQUFBLFVBQWMsR0FDZEgsRUFpTFl2RCxDQUFhK0csRUFBQUEsVUFDdkIzRSxTQUFLa0csS0FBRWxCLFlBRDJCdkIsR0FFbEN4RCxFQUFRZ0YsU0FGMEIsQ0FHbENsRixJQUFBQSxFQUhrQ2QsRUFBQXlGLEVBQUFqRCxVQUFBaUQsRUFBQWpELFNBQUF0QixTQUFBMkUsY0FBQUosRUFBQWpELFVBSWxDM0IsRUFBS3FGLFNBQUFBLFNBQUFBLGNBQUFBLE9BSjZCeEUsRUFBcENjLFNBQUFHLFlBQUFILEVBQUE4RSxRQUFBbkcsV0FBQSxJQU1ERCxTQUFBK0YsS0FBQXRFLFlBQUFqQixFQUFBYyxVQU9ILEdBdURBdEIsU0FBUytGLEtBQUt0RSxZQUFZakIsRUFBT0ksUUE1RGpDc0QsT0FBQUEsc0JBQTZCLFdBQzdCQyxTQUFBQSxLQUFpQkEsVUFBQUEsSUFBYyx5QkFFL0IzRCxFQUFJMkUsU0FBWWhFLFVBQVM4RCxJQUFBQSw2QkFDekJ6RSxFQUFJNEUsT0FBQUEsVUFBc0JILElBQUFBLDZCQThEMUJ6RSxFQUFPSSxPQUFPNkMsaUJBQWlCLFFBQVNoQixHQTdEeENqQyxFQUFJNkUsT0FBQUEsaUJBQXdCSixnQkFsQ0wsU0FBQW9CLElBQ3JCQyxHQUFReEksRUFBd0VGLEVBQVMwSSxPQUFNMUksb0JBQW5HLGdCQUFBeUksR0FxREk3RixFQUFPRyxTQUFTZSxjQUFjckMsRUFBa0IscUJBQXNCLENBcER0RXdFLE9BQVcsQ0FDVFcsS0FBU2QsTUFHWDlELEVBSGM4RCxLQStCZ0QvRCxFQUFNMEYsU0FBQUEsYUFBdEUsaUJBQUEsQ0FBaUd6RixFQUFPeUYsU0FBQUEsRUFBQUEsT0FBc0J6RixZQUFNQyxFQUFLcUYsU0FBR0csZ0JBQXNCeEYsVUFBT0MsRUFBTW9GLFNBQUdHLGdCQUFzQnZGLFNBbUV0TVUsRUFBTzBFLFNBQVNxQixJQUFNL0YsRUFBT0ksT0FBTzRGLGFBQWEsaUJBbEUvQ2YsRUFBTVAsU0FBUU0sUUFBSUwsV0FDbEJHLGNBQWNFLEdBQ2RHLFFBQVFKLEtBQUtDLHlDQUFqQmhGLEVBQUEwRSxTQUFBcUIsS0FDSUUsRUFBQUEsU0FBYyxLQUNkQyxLQUVKbEcsSUFBT0ksRUFBYThFLFlBQVlBLFdBb0V4QmxGLEVBQU8wRSxTQUFTeUIsV0FuRXBCbkcsY0FBaUJvRyxHQUNicEcsRUFBQzBFLFNBQWVRLFVBQXRCbUIsSUFBa0NuQiw2QkFDbkNsRixFQUFBMEUsU0FBQXpCLGlCQUFBLFFBQUFoQixHQTFDSHpDLFNBQUErRixLQUFBdEUsWUFBQWpCLEVBQUEwRSxVQWdIUXJCLE1BbkVGakcsU0FDSyxHQUFDOEYsRUFBUi9DLFNBQUFtRyxhQUFBLFVBQUEsQ0FDQXRHLEVBQUEwRSxTQUFBMUUsRUFBQUksT0FBQVgsWUFDRE8sRUFBQTBFLFNBQUFnQixnQkFBQSxTQXNFQyxJQUFJYSxFQUFvQnZHLEVBQU8wRSxTQUFTekIsaUJBQWlCLE9BQVEsV0FyRS9ENEMsRUFBQUEsU0FBaUJULG9CQUFTUyxPQUFpQlUsR0FDN0M3RixFQUFXZ0UsU0FBWC9ELFVBQUEwRixJQUFBLDZCQUNBckcsRUFBT0ksU0FBT2dGLGlCQUFvQixRQUFBbkQsR0FDbENqQyxTQUFPRyxLQUFTZSxZQUFjckMsRUFBQUEsVUFDNUJpRixXQURGVCxRQU9GcEIsRUFBVSxXQUNScUQsT0FBQUEsSUFBUXBDLEVBQVIsU0FBQW9DLElBQ0E1RSxHQUFBVixFQUFBRyxVQXlCRE8sR0FBQSxFQTJFRGxCLFNBQVMrRixLQUFLNUUsVUFBVWtELE9BQU8sdUJBMUUvQnJFLEVBQVMrRixPQUFLdEUsTUFBQUEsVUFBbUJiLEdBQzNCSixFQUFDd0csV0FDTGhILEVBQVMrRixTQUFLNUUsTUFBVTBGLFVBQUksSUFFeEJyRyxFQUFDRyxXQUNQSCxFQUFPSSxTQUFPTyxNQUFVMEYsV0FBSSxnQkFDNUJyRyxFQUFPSSxTQUFPNkMsTUFBQUEsUUFBaUIsR0E2RS9CakQsRUFBT0csU0FBU2UsY0FBY3JDLEVBQWtCLG9CQUFxQixDQTNFakVtQixPQUFPRyxDQUNUSCxLQUFPMEUsTUFHUDFFLEVBQU8wRSxPQUFBQSxpQkFBc0J0RSxnQkFuQ1hoRCxTQUFsQnFKLElBREZ6RyxFQUVXcUMsU0FBTzlFLFVBQVlzRyxPQUFBLDZCQUM1QnJFLFNBQVcrRixLQUFHbEQsWUFBZHJDLEVBQUFJLFFBQ01KLEVBQUNHLFVBRkZYLFNBR0ErRixLQUFBbUIsWUFBQTFHLEVBQUEwRSxVQUVMbEYsU0FBQStGLEtBQUFtQixZQUFBNUQsR0FDRDlDLEVBQUFJLE9BQUFPLFVBQUFrRCxPQUFBLDZCQXlFSzdELEVBQU9jLFVBeEVQdEIsU0FBTitGLEtBQWdCckUsWUFBY3JDLEVBQUFBLFVBRTFCcUUsR0FBTUEsRUFEQWxELEVBQUFJLE9BQUFnRixvQkFBQSxnQkFBQXFCLEdBRFZ6RyxFQUFBRyxTQUFBZSxjQUFBckMsRUFBQSxxQkFBQSxDQUtBaUIsT0FBWS9DLENBQ1oyRCxLQUFjd0MsTUE0RVpsRCxFQUFPRyxTQUFXLEtBekVoQjRELEVBQUFBLE9BQVlqRCxLQUNkZCxFQUFJYyxTQUFXeEMsS0FDZjBCLEVBQU9jLFNBQVd0QixLQUNsQlEsRUFBT2MsTUF0QlJ3RSxFQUFBcEMsTUF1Q0d5RCxFQUFBQSxXQUNBQyxJQUFBeEosR0FBUXlKLFVBQUt0SixPQUFBLFFBQUE4RCxJQUFBL0QsVUFBQSxHQUEyQzBDLFVBQUEsR0FBeEQsSUFBQTVDLE9BQ0E0QyxPQUFBQSxFQUFPMEUsU0E4RUp6QyxJQWpGTGtCLEVBQUEsQ0FvRkYvRixPQUFRQSxLQXBFTjRDLEVBQU8wRSxHQUNQMUUsRUFBZ0IwRixHQUNoQmhGLEdBQUk2RixFQUNGdkcsRUFBTzBFLEVBQ1AxRSxFQUFPMEUsRUFDUDFFLEVBQU8wRSxDQUNQbEYsU0FBQUEsS0FpRk5ZLE9BQVEsS0FoRkZpRCxTQUFBQSxLQUNEdkMsU0FORCxNQVFRLG9CQUFSdUMsT0FBQUEsVUFBUXlELFNBQUFwSixLQUFBSyxHQUNUZ0csRUFBQWhHLEdBbkZIQSxHQUFBLGlCQUFBQSxJQTlDRnlELEVBQUF6RCxHQTBJSSxJQUFBK0UsRUF6U2MsU0FBdUJGLEdBWHZDLElBQUl0RSxFQUFPUCxTQUFXMEMsY0FBQSxPQWV4QixPQWRJcUMsRUFBQW5DLFVBQU8wRixJQUFhOUgsdUJBQ3JCdUUsRUFBQXRDLE1BQUFvQyxXQUFBQSxFQWFJRSxFQXFTQzJELEVBTlIxQyxFQUFZOUcsRUFBU2dGLENBQ25CZ0MsT0FBTyxFQUNMckIsV0FBSWxDLE9BQ0Y0RSxhQUFPLEdBQ1B0QixVQUFBLEtBQ0RsRCxTQUFBLE1BbUZGaUQsSUFsRmdDMEMsWUFDN0J6RyxTQUFBQSxpQkFBZ0JXLFFBeFJ0QixTQUFBa0IsR0FaRixJQUFBekUsRUFBQXlFLEVBQUF6RSxPQW1DUUEsSUFBVzBGLEdBcEJVLElBRXpCaUUsRUFBWXpFLFFBRmFsRixJQTJCekI0SixFQUFPLENBdEJMNUosT0FBT0wsSUFOVDhCLE1BdVJJVyxTQUFBQSxpQkFBY2tILFFBeFFDcEYsU0FBb0JBLEdBQ3JCLE1BQWxCTyxFQUFBb0YsU0FBa0JwRixFQUFBQyxRQTJCaEJHLE1BZ1VKekMsU0FBU3lELGlCQUFpQixTQTNVTixXQXZCaEJ2RCxJQUFBQSxHQUFjRixFQUFTMEgsU0FBdkJ4SCxDQVROLElBQUF5SCxFQUFBcEssT0FBQTZDLGFBQUFKLFNBQUFLLGdCQUFBQyxXQUFBTixTQUFBK0YsS0FBQXpGLFdBQUEsRUFxQ1FpRixLQUFLcUMsSUFBSXRILEVBQVlxSCxHQUFpQnBELEVBQVlzRCxjQXhCdERySyxXQUFhaUYsRUFBU2pGLFFBMlFsQkQsT0FBQWtHLGlCQUFBLFNBQXFCaEIsR0FDbkJ6QyxJQUFBQSxFQUFBQSxDQUNEMkQsS0FBQUEsRUFxRkxsQixNQUFPQSxFQXBGSHpDLE9BQUFBLEVBQ0FRLE9BOU9PLFdBM0JUc0gsSUFBQUEsRUFBWWhLLFVBQVlnSyxPQUFBQSxRQUFvQmpHLElBQVBRLFVBQU8sR0FBQXZFLFVBQUEsR0FBQSxHQUMxQ0YsRUFBZUEsRUFLbkIsR0F3QklvRixFQUFRSSxhQTVCUnhGLEVBQU1vRCxNQUFLc0MsV0FBU04sRUFBQUksWUFFdEJKLEVBQUF3QixXQUFBeEIsRUFBQXdCLHFCQUFBOUcsU0FDRHdGLEVBQUFzQixVQUFBL0csRUFBQSxHQUFBOEcsRUFBQUMsVUFBQXhCLEVBQUF3QixZQUNHM0IsRUFBT0MsU0FBUWxGLENBQ2pCLElBQUEwRCxFQUFBeEMsRUFBQWtFLEVBQUExQixVQUFBMEIsRUFBQTFCLFNBQUF0QixTQUFBMkUsY0FBQTNCLEVBQUExQixVQUNENEIsRUFBQTVCLFNBQUFBLEVBUUEsT0FQRGtHLEVBQU8vSixFQUFBLEdBQUE4RyxFQUFBckIsR0FDTHRGLEVBQU00RixRQUFFNUYsU0FBQUEsR0FEVmMsRUFBQWdELGNBQUFyQyxFQUFBLHFCQUFBLENBVEZpRixPQUFBLENBNENRWixLQUFNQSxRQTVCWEEsR0ErVUQzRCxNQTlVSTRILFdBa0NKLElBQUkzRSxFQUFVbEYsVUFBVUMsT0FBUyxRQUFzQjhELElBQWpCL0QsVUFBVSxHQUFtQkEsVUFBVSxHQUFLLEdBakNsRixPQUFTOEosRUFBSXRILEVBQVlxSCxHQUFBQSxFQUFpQnBELEtBd1B0Q3ZDLE9BQUl4QixFQUNGUixPQXZPTXNCLFdBQ1YsSUFBSUEsSUFBQUEsRUFBV3hDLFVBQU9rRSxPQUFRMUIsRUFBWTBCLE1BQVExQixHQUFXdEIsRUFBUSxFQUFDMkUsRUFBQUEsRUFBYzNCLElBQ3BGRSxFQUFXNUIsR0FBWHhELFVBQUFpSyxHQXlDRXZILEVBQU9JLFFBdkNYMkQsSUFFRTdGLElBQUFBLEVBQW9CVyxFQUFBQSxPQUFrQixFQUFBNkMsRUFBQThGLE9BQXNCLFNBQUF6RixFQUFBQyxHQUMxRDhCLE1BQU0sR0FBRTVCLE9BQUFILEVBQUExRCxFQUFBMkQsS0FDTmtCLElBQUliLEVBVVJiLE9BWFVvQyxFQUFBWixRQUFBLFNBQUE5RSxHQURWQSxFQUFBeUMsVUFBQWtELE9BQUEscUJBREYzRixFQUFBZ0QsY0FBQXJDLEVBQUEscUJBQUEsQ0FPQWlGLE9BQUEsQ0FyQkZaLEtBQUFBLFFBeUJFYixFQUFPckYsRUFBV0MsT0FBQUEsU0FBYThHLEdBRmpDLE9BQUEsSUFBQUgsRUFBQXRCLFFBQUFwRSxLQUlVZ0YsR0FzTkh1RSxHQXBOSC9GLFNBQWtCcEUsRUFBQUEsR0FDbkIsSUFBQWtGLEVBQUFsRixVQUFBQyxPQUFBLFFBQUE4RCxJQUFBL0QsVUFBQSxHQUFBQSxVQUFBLEdBQUEsR0FRQzhFLE9BbUNGQyxFQUFPVyxRQUFRLFNBQVM5RSxHQTFDcEJpRSxFQUFBQSxpQkFBc0JxRixlQUFnQnpGLEVBQUFBLEVBQVRTLEtBQWpCRyxFQUFoQkYsS0FBQSxDQUdBTixLQUFVNUQsZUFBZ0I2RCxFQUN4QlcsU0FBT1YsRUFDTlcsUUFBUVIsSUFFVEosR0FrU0ZzRixJQWhTQS9FLFNBQXVCN0QsRUFBQWlFLEdBQ3JCLElBQUlqRSxFQUFPK0QsVUFBWHRGLE9BQUEsUUFBQThELElBQUEvRCxVQUFBLEdBQUFBLFVBQUEsR0FBQSxHQUtGLE9BTEUrRSxFQUFzQlUsUUFBV0YsU0FBS0UsR0FBdEM3RSxFQUFnRHNFLG9CQUFoRCxlQUFBMUQsRUFBQWlFLEVBQUFQLEtBRUV0RSxFQUFNK0UsRUFBdUJGLE9BQTdCLFNBQUFzQyxHQURGLFFBQUFBLEVBQUF2RyxPQUFBLGVBQUFBLEdBQUF1RyxFQUFBdEMsU0FBQStELGFBQUEvRCxFQUFBK0QsY0FJSzVELEdBb01IeEMsV0F2Q0lpRyxXQUNBM0csT0FBQUEsR0F1Q0pBLFVBckNZLFdBZ0ZoQixPQUFPcUMsR0ExQ0hyQyxlQXBDRyxXQUNGLE9BUmtDQSxFQUFuQ0csV0E2Q0krQyxPQUFBQSxLQTBCVCxXQTRGSCxJQTNGTThELEVBQVN4SCxTQUFTd0gsY0FBUywyQkFDN0JXLEVBQVlySyxTQUFVQyxjQUFjRCx5QkFBcENzSyxFQUE2RkMsU0FBN0ZDLGlCQUFBQyxHQUFBMUksT0E4RkEySSxFQUFrQkMsU0FBU0gsaUJBQWlCSCxHQUFZdEksT0EzRnZEdEMsT0FBQW1MLE9BQUEsV0ErRkQsSUFBSUMsRUFBaUJMLGlCQUFpQkMsR0FBUXpJLE9BOUY5Q3lJLEVBQU81RSxNQUFLN0QsT0FBWixHQUFBNEMsT0FBWStGLFNBQUFFLEdBQUEsR0FBWixPQW1HSlIsRUFBV25ILE1BQU00SCxXQUFhLE1BYjlCTCxFQUdJSCxpQkFBc0IsWUFuRnZCLFNBRkQvRixHQUdJd0csRUFBQUEsaUJBQXFCQSxhQUF6QixXQW9HTU4sRUFBTzNDLG9CQUFvQixZQUFha0QsS0FqRzlDUCxFQUFBOUUsaUJBQUEsVUF3Q0V5RSxTQVRTYSxFQUFBMUcsR0FBWCxHQVVFMkcsRUFBWUEsb0JBVkgsWUFBQUYsR0FZT0csR0FBQUEsSUFabEIsQ0FnQk90SCxJQUFBQSxHQWhYVHVILEVBQUFBLEVBQUFWLEVBQUFKLEVBQUFJLEVBQUFKLEVBQUFjLEdBZ1grQixJQXlHbkJDLEVBQXFCOUcsRUFBTStHLE1Bbkc3QixPQUhKQyxFQUE0QkYsRUFBYUcsRUFBQSxPQUFBLFFBRTVDQyxFQUFBZCxTQUFBTixFQUFBbkgsTUFBQTRILFlBQ1U1SSxHQUNDQSxJQUFBQSxPQTBHRSxJQUFLdUosR0FBd0JmLEVBQWtCSixFQUFjLE9BdkdoRS9HLEVBQVltSSxFQUFBaEIsRUFBQUosRUFBQW1CLEVBQUFmLEVBQUFKLEVBQUFtQixFQUFBQyxFQUVkckIsRUFBQW5ILE1BQUF5SSxXQUFBLFlBQ0FoSSxFQUFMVCxNQUFBNEgsV0FBS25ILEdBQUFBLE9BQUw4SCxFQUFBQyxFQUFLL0gsTUFDTixNQUVJQSxJQUFBQSxRQTJHTyxHQUFJOEgsR0FBdUIsRUFBSSxPQXhHckNoSSxFQUFOaUksR0FBQUQsR0FBQUEsRUFBQUMsRUFFTS9ILEVBQVl6QixNQUFTMEosV0FBZWpKLFlBQzNDMEgsRUFBQW5ILE1BQUE0SCxXQUFBLEdBQUFsRyxPQUFBNkcsRUFBQUMsRUFBQSxNQUVPRyxXQUFBLFdBQ0VsSixFQUFaTyxNQUFBeUksV0FBQSxVQUNPak0sS0E2R0MrSyxFQUFPM0Msb0JBQW9CLFVBQVdtRCxNQW5MeENsRyxJQUlBMEIsRUFDQS9ELEVBSkEyQyxFQUFKZCxFQUFBK0csTUFDSWxJLEVBQUptQixFQUFBK0csTUFDSTlJLEVBQUosRUFFQSxTQUFBd0ksRUFBQXpHLEdBTUkzRSxJQUNGNkcsRUFBQWxDLEVBQUErRyxNQUNTN0ssRUFBWWdILEtBQU9oSCxJQUFBQSxFQUF1QnFMLEdBT25EcEYsT0FMRCtFLEVBQUFkLFNBQUFOLEVBQUFuSCxNQUFBNEgsWUFDVWdCLEVBQVlDLEVBQUFSLEVBQUEsT0FBQU8sRUFBQUMsRUFBQVIsRUFBQSxTQUVUTyxFQUZTQyxLQUFBUixFQUFBQSxHQUlWQSxHQUNELElBQUEsT0FFRWxELElBQUFBLEdBQTBCL0MsRUFBeENnRixFQUFBLE9BQ1MzRSxFQUFpQnpDLE1BQTFCNEgsV0FBU25GLEdBQUFBLE9BQVQ4RixFQUFBTyxFQUFTckcsTUFDQUEsTUFFRkEsSUFBQUEsUUFDSSxHQUFBOEYsR0FBQSxFQUFBLE9BQUFwQixFQUFBbkgsTUFBQTRILFdBQUEsR0FBQWxHLE9BQUE2RyxFQUFBTyxFQUFBLE1BS0paLEdBTElZLEVBTUhELEVBTkdELEVBcEJUMUUsRUFBUXpCLGlCQUhHLFlBQUFxRixLQXhCWixHQTRNUCxXQXpHSXZMLElBRUlnTCxFQUZFd0IsRUFBVS9KLFNBQU1iLGlCQUFBLHdCQUNkd0osRUFBaUJMLFNBQUFBLGlCQUF5QnhJLHVCQTZHOUNrSyxFQUFrQixTQUFDQyxHQXhHdkI5QixJQUFBQSxFQUFpQlMsRUFBQUEsY0EwR1hzQixFQUFVdE0sRUFBT3VNLFFBQVFDLFlBdkcvQkMsRUFBc0JySyxTQUFBc0ssZUFBQUosUUEwR0hySSxJQUFsQjBJLEdBQStCQyxFQUFpQkQsR0FyR2xDM0Usb0JBQVAyQyxHQWdMVixTQUFtQzNLLEVBQVF5TSxHQWhGM0MsSUFDRUksRUFBbUJDLEVBQUFBLGNBQW5CL0YsY0FBQSw2QkFBQWdHLFlBQUFDLFFBQUEsT0FBQSxLQUFBQyxPQUNBQyxFQUFnQmxOLEVBQU91TSxjQUF2QixpQkFDQVksRUFBaUJuTixFQUFHb0MsUUFBU3NLLHlCQUU1QkMsRUFBYUYsRUFBZDFGLGNBQWdDNkYsaUJBSWhDRCxFQUFBQSxZQUFBRSxFQUVBSixFQUFXOUQsSUFBQ3BGLEVBM0d1QjZKLENBQTNCcE4sRUFBQXlNLEdBeUdSRSxFQUFnQkwsRUFwR1pHLEVBQ0lmLFVBQUFBLElBQXNCakgsV0FEMUJyQyxTQUVJNkosY0FBQUEsUUFBd0J4SCxVQUY1QndFLElBQUEsU0FBQXRKLE9BSUk4TCxpQkFBQUEsUUFKSjRCLEdBQUExTixPQUtJZ00saUJBTEosVUFBQTJCLEdBUUEzQyxJQXFHRjRDLEVBQW9CZCxFQUFZbEwsaUJBQWlCLHNOQW5HL0NpTSxFQUEwQi9JLEVBQU8sR0FFN0JnSixFQUNxQkYsRUFEckJBLEVBQUFwTixPQUFBLEdBeUJIc00sRUFBQTVHLGlCQUFBLFVBckJHOEYsU0FBc0JkLEdBRWxCbUIsUUFBQUEsRUFBQUEsS0FBSixJQUF3QkMsRUFBQUEsVUFpR3hCeEgsRUFBTWlKLFNBN0ZDakMsU0FBQUEsZ0JBQVArQixJQUNJL0ksRUFBS2tKLGlCQUVERixFQUFLOUIsU0FnR1h2SixTQUFTd0wsZ0JBQWtCSCxJQTVGekJoSixFQUFLa0osaUJBRURILEVBQXVCSyxhQVcvQkMsRUFBZXhDLFNBQUFBLEdBQ1Z3QyxXQUFMekIsRUFBS3lCLEtBRUx4QyxFQUFpQnFCLElBTWpCbEIsRUFBeUJGLFNBQUFBLEdBRXpCSSxFQUFBQSxPQUFBQSxVQUFzQmQsU0FBU04sY0F3RnJDcUMsRUFBaUJELElBakZIZixFQUFBQSxTQUFBQSxHQUFBQSxPQUEyQkEsRUFBQUEsRUFBdUJrQixjQUFLbEMsUUFBa0JKLGFBR3pFRCxFQUFpQlMsU0FBQUEsR0FDakI1SSxTQUFBc0ssZUFBQUosR0FFQy9JLFVBQUxrRCxPQUFBLFdBRUlyRSxTQUFBMkUsY0FBSTRFLFFBQW1CcEksVUFBUWtELE9BQUEsU0FJL0I4RCxPQUFBQSxvQkFBaUJzQixRQUFhd0IsR0FDOUI5QyxPQUFBQSxvQkFBaUJTLFVBQWpCc0MsSUFXaEIzQyxFQUFPOUUsUUFBaUIsU0FBQWtJLEdBQUEsT0FBeEJBLEVBQUFsSSxpQkFBQSxRQUFBbUksS0FrRkZyTyxPQUFPc08sT0FBUyxDQWhGakI3QixnQkFBTUEsRUFDTFEsaUJBQXNCeEssR0FWU3lKLFdBQWEsSUFBQXFDLEdBQUEsRUFBQUMsR0FBQSxFQUFBQyxPQUFBbkssRUFBQSxJQUNqQyxJQUFBLElBQUFvSyxFQUFBQyxFQUZEbkMsRUFFQ29DLE9BQUFDLGNBQUFOLEdBQUFHLEVBQUFDLEVBQUFHLFFBQUFDLE1BQUFSLEdBQUEsRUFGREcsRUFBQU0sTUFJTzNHLGlCQUFBQSxRQUFvQm9FLEdBSE8sTUFBQTVLLEdBQUEyTSxHQUFBLEVBQUFDLEVBQUE1TSxFQUFBLFFBQUEsSUFBQTBNLEdBQUEsTUFBQUksRUFBQU0sUUFBQU4sRUFBQU0sU0FBQSxRQUFBLEdBQUFULEVBQUEsTUFBQUMsSUE2QjFDek8sR0FwQkosR0FzQkksV0E4RUYsSUFBTWtQLEVBQWlCek0sU0FBU2IsaUJBQWlCLHVCQXhFN0N1TixFQUFrQixTQUFBekMsR0FDaEIsSUFBQXJNLEVBQVUwTixFQUFBQSxPQUNScUIsRUFBSTNNLFNBQVN3TCxlQUFrQkosRUFBQUEsUUFBQUEsWUFFN0JDLEdBQ0RzQixFQUFBQyxlQUFBLENBQ0ZDLFNBQU0sWUFLTkMsUUFBQUwsSUFDRkEsRUFBQWpKLFFBQUEsU0FBQXVKLEdBQUEsT0FBQUEsRUFBQXRKLGlCQUFBLFFBQUFpSixLQWxCSCxHQXVCRDFNLFNBeENEeUQsaUJBQUEsbUJBQUEsV0FrSEEsSUFBSXVKLEVBQWUsR0FBR2hILE1BQU05SCxLQUFLOEIsU0FBU2IsaUJBQWlCLGlCQXZFekQsR0FBQSx5QkFBMEI1QixPQUFBLENBQ3hCaU4sSUFBQUEsRUFBaUJELElBQUFBLHFCQUFqQixTQUFBMEMsRUFBQUMsR0FDREQsRUFBQXpKLFFBQUEsU0FBQTJKLEdBSEgsR0FBQUEsRUFBQUMsZUFBQSxDQThFUSxJQUFJQyxFQUFjRixFQUFNdlAsT0F4RTFCcU4sRUFBc0JvQyxFQUF0QnBDLGNBQUFBLHVCQUNJck4sRUFBT3VELEVBQW1Cd0QsY0FBYyxPQUUvQzJJLEVBQUFDLE9BQUFELEVBQUFuRCxRQUFBNUQsSUFISGlILEVBQUFqSCxJQUFBaUgsRUFBQXJELFFBQUE1RCxJQU1NcUYsRUFBQUEsYUFBcUIsZUFBckJBLGFBQXFCeUIsRUFBUzdDLFVBQXFCRSxPQUFBQSxRQUF6RCtDLEVBQUFDLFVBQUFMLFFBTUVyTixFQUFTMkUsUUFBQUEsU0FBVDBJLEdBRUE5UCxFQUFPcUksUUFBb0J5SCxRQUtTck4sU0FBQXlELGlCQUFBLG1CQUFBLFdBQUEsSUFBQWtLLEVBQUEsR0FBQTNILE1BQUE5SCxLQUFBOEIsU0FBQWIsaUJBQUEsMEJBQUEsR0FBQSx5QkFBQTVCLE9BQUEsQ0FDcEMsSUFBQXFRLEVBQXFCN0QsSUFBQUEscUJBQXJCLFNBQUFrRCxFQUFBQyxHQUFvQ0QsRUFBekJ0QixRQUF5QixTQUFBd0IsR0FDbEN4QixHQUFNd0IsRUFBQzFKLGVBQWlCLENBQ3pCLElBQUFvSyxFQUFBVixFQUFBdlAsT0FIbUNpUSxFQUFBQyxhQUFBLDRCQUFBLFVBQUFGLEVBQUFGLFVBQUFHLFFBQUFGLEVBQUFuSyxRQUFBLFNBQUFxSyxHQUFBRCxFQUFBRyxRQUFBRixRQUlyQ3JRLFdBSkQiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuXHJcbi8qISBtZWRpdW0tem9vbSAxLjAuNCB8IE1JVCBMaWNlbnNlIHwgaHR0cHM6Ly9naXRodWIuY29tL2ZyYW5jb2lzY2hhbGlmb3VyL21lZGl1bS16b29tICovXHJcbihmdW5jdGlvbihnbG9iYWwsIGZhY3RvcnkpIHtcclxuICAgIHR5cGVvZiBleHBvcnRzID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUgIT09IFwidW5kZWZpbmVkXCIgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6IHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDogd2luZG93Lm1lZGl1bVpvb20gPSBmYWN0b3J5KCk7XHJcbiAgfSkodGhpcywgZnVuY3Rpb24oKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odGFyZ2V0KSB7XHJcbiAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XHJcbiAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xyXG4gICAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGFyZ2V0O1xyXG4gICAgfTtcclxuICAgIHZhciBpc1N1cHBvcnRlZCA9IGZ1bmN0aW9uIGlzU3VwcG9ydGVkKG5vZGUpIHtcclxuICAgICAgcmV0dXJuIG5vZGUudGFnTmFtZSA9PT0gXCJJTUdcIjtcclxuICAgIH07XHJcbiAgICB2YXIgaXNOb2RlTGlzdCA9IGZ1bmN0aW9uIGlzTm9kZUxpc3Qoc2VsZWN0b3IpIHtcclxuICAgICAgcmV0dXJuIE5vZGVMaXN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHNlbGVjdG9yKTtcclxuICAgIH07XHJcbiAgICB2YXIgaXNOb2RlID0gZnVuY3Rpb24gaXNOb2RlKHNlbGVjdG9yKSB7XHJcbiAgICAgIHJldHVybiBzZWxlY3RvciAmJiBzZWxlY3Rvci5ub2RlVHlwZSA9PT0gMTtcclxuICAgIH07XHJcbiAgICB2YXIgaXNTdmcgPSBmdW5jdGlvbiBpc1N2ZyhpbWFnZSkge1xyXG4gICAgICB2YXIgc291cmNlID0gaW1hZ2UuY3VycmVudFNyYyB8fCBpbWFnZS5zcmM7XHJcbiAgICAgIHJldHVybiBzb3VyY2Uuc3Vic3RyKC00KS50b0xvd2VyQ2FzZSgpID09PSBcIi5zdmdcIjtcclxuICAgIH07XHJcbiAgICB2YXIgZ2V0SW1hZ2VzRnJvbVNlbGVjdG9yID0gZnVuY3Rpb24gZ2V0SW1hZ2VzRnJvbVNlbGVjdG9yKHNlbGVjdG9yKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc2VsZWN0b3IpKSB7XHJcbiAgICAgICAgICByZXR1cm4gc2VsZWN0b3IuZmlsdGVyKGlzU3VwcG9ydGVkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzTm9kZUxpc3Qoc2VsZWN0b3IpKSB7XHJcbiAgICAgICAgICByZXR1cm4gW10uc2xpY2UuY2FsbChzZWxlY3RvcikuZmlsdGVyKGlzU3VwcG9ydGVkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzTm9kZShzZWxlY3RvcikpIHtcclxuICAgICAgICAgIHJldHVybiBbIHNlbGVjdG9yIF0uZmlsdGVyKGlzU3VwcG9ydGVkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgcmV0dXJuIFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpLmZpbHRlcihpc1N1cHBvcnRlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRoZSBwcm92aWRlZCBzZWxlY3RvciBpcyBpbnZhbGlkLlxcblwiICsgXCJFeHBlY3RzIGEgQ1NTIHNlbGVjdG9yLCBhIE5vZGUgZWxlbWVudCwgYSBOb2RlTGlzdCBvciBhbiBhcnJheS5cXG5cIiArIFwiU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZnJhbmNvaXNjaGFsaWZvdXIvbWVkaXVtLXpvb21cIik7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICB2YXIgY3JlYXRlT3ZlcmxheSA9IGZ1bmN0aW9uIGNyZWF0ZU92ZXJsYXkoYmFja2dyb3VuZCkge1xyXG4gICAgICB2YXIgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZChcIm1lZGl1bS16b29tLW92ZXJsYXlcIik7XHJcbiAgICAgIG92ZXJsYXkuc3R5bGUuYmFja2dyb3VuZCA9IGJhY2tncm91bmQ7XHJcbiAgICAgIHJldHVybiBvdmVybGF5O1xyXG4gICAgfTtcclxuICAgIHZhciBjbG9uZVRhcmdldCA9IGZ1bmN0aW9uIGNsb25lVGFyZ2V0KHRlbXBsYXRlKSB7XHJcbiAgICAgIHZhciBfdGVtcGxhdGUkZ2V0Qm91bmRpbmcgPSB0ZW1wbGF0ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgdG9wID0gX3RlbXBsYXRlJGdldEJvdW5kaW5nLnRvcCwgbGVmdCA9IF90ZW1wbGF0ZSRnZXRCb3VuZGluZy5sZWZ0LCB3aWR0aCA9IF90ZW1wbGF0ZSRnZXRCb3VuZGluZy53aWR0aCwgaGVpZ2h0ID0gX3RlbXBsYXRlJGdldEJvdW5kaW5nLmhlaWdodDtcclxuICAgICAgdmFyIGNsb25lID0gdGVtcGxhdGUuY2xvbmVOb2RlKCk7XHJcbiAgICAgIHZhciBzY3JvbGxUb3AgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCB8fCAwO1xyXG4gICAgICB2YXIgc2Nyb2xsTGVmdCA9IHdpbmRvdy5wYWdlWE9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQgfHwgMDtcclxuICAgICAgY2xvbmUucmVtb3ZlQXR0cmlidXRlKFwiaWRcIik7XHJcbiAgICAgIGNsb25lLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xyXG4gICAgICBjbG9uZS5zdHlsZS50b3AgPSB0b3AgKyBzY3JvbGxUb3AgKyBcInB4XCI7XHJcbiAgICAgIGNsb25lLnN0eWxlLmxlZnQgPSBsZWZ0ICsgc2Nyb2xsTGVmdCArIFwicHhcIjtcclxuICAgICAgY2xvbmUuc3R5bGUud2lkdGggPSB3aWR0aCArIFwicHhcIjtcclxuICAgICAgY2xvbmUuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgICBjbG9uZS5zdHlsZS50cmFuc2Zvcm0gPSBcIlwiO1xyXG4gICAgICByZXR1cm4gY2xvbmU7XHJcbiAgICB9O1xyXG4gICAgdmFyIGNyZWF0ZUN1c3RvbUV2ZW50ID0gZnVuY3Rpb24gY3JlYXRlQ3VzdG9tRXZlbnQodHlwZSwgcGFyYW1zKSB7XHJcbiAgICAgIHZhciBldmVudFBhcmFtcyA9IF9leHRlbmRzKHtcclxuICAgICAgICBidWJibGVzOiBmYWxzZSxcclxuICAgICAgICBjYW5jZWxhYmxlOiBmYWxzZSxcclxuICAgICAgICBkZXRhaWw6IHVuZGVmaW5lZFxyXG4gICAgICB9LCBwYXJhbXMpO1xyXG4gICAgICBpZiAodHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDdXN0b21FdmVudCh0eXBlLCBldmVudFBhcmFtcyk7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIGN1c3RvbUV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJDdXN0b21FdmVudFwiKTtcclxuICAgICAgY3VzdG9tRXZlbnQuaW5pdEN1c3RvbUV2ZW50KHR5cGUsIGV2ZW50UGFyYW1zLmJ1YmJsZXMsIGV2ZW50UGFyYW1zLmNhbmNlbGFibGUsIGV2ZW50UGFyYW1zLmRldGFpbCk7XHJcbiAgICAgIHJldHVybiBjdXN0b21FdmVudDtcclxuICAgIH07XHJcbiAgICB2YXIgbWVkaXVtWm9vbSA9IGZ1bmN0aW9uIG1lZGl1bVpvb20oc2VsZWN0b3IpIHtcclxuICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xyXG4gICAgICB2YXIgUHJvbWlzZSA9IHdpbmRvdy5Qcm9taXNlIHx8IGZ1bmN0aW9uIFByb21pc2UoZm4pIHtcclxuICAgICAgICBmdW5jdGlvbiBub29wKCkge31cclxuICAgICAgICBmbihub29wLCBub29wKTtcclxuICAgICAgfTtcclxuICAgICAgdmFyIF9oYW5kbGVDbGljayA9IGZ1bmN0aW9uIF9oYW5kbGVDbGljayhldmVudCkge1xyXG4gICAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQ7XHJcbiAgICAgICAgaWYgKHRhcmdldCA9PT0gb3ZlcmxheSkge1xyXG4gICAgICAgICAgY2xvc2UoKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGltYWdlcy5pbmRleE9mKHRhcmdldCkgPT09IC0xKSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRvZ2dsZSh7XHJcbiAgICAgICAgICB0YXJnZXQ6IHRhcmdldFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG4gICAgICB2YXIgX2hhbmRsZVNjcm9sbCA9IGZ1bmN0aW9uIF9oYW5kbGVTY3JvbGwoKSB7XHJcbiAgICAgICAgaWYgKGlzQW5pbWF0aW5nIHx8ICFhY3RpdmUub3JpZ2luYWwpIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGN1cnJlbnRTY3JvbGwgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCB8fCAwO1xyXG4gICAgICAgIGlmIChNYXRoLmFicyhzY3JvbGxUb3AgLSBjdXJyZW50U2Nyb2xsKSA+IHpvb21PcHRpb25zLnNjcm9sbE9mZnNldCkge1xyXG4gICAgICAgICAgc2V0VGltZW91dChjbG9zZSwgMTUwKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIHZhciBfaGFuZGxlS2V5VXAgPSBmdW5jdGlvbiBfaGFuZGxlS2V5VXAoZXZlbnQpIHtcclxuICAgICAgICBpZiAoKGV2ZW50LmtleUNvZGUgfHwgZXZlbnQud2hpY2gpID09PSAyNykge1xyXG4gICAgICAgICAgY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIHZhciB1cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoKSB7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xyXG4gICAgICAgIHZhciBuZXdPcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgICBpZiAob3B0aW9ucy5iYWNrZ3JvdW5kKSB7XHJcbiAgICAgICAgICBvdmVybGF5LnN0eWxlLmJhY2tncm91bmQgPSBvcHRpb25zLmJhY2tncm91bmQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvcHRpb25zLmNvbnRhaW5lciAmJiBvcHRpb25zLmNvbnRhaW5lciBpbnN0YW5jZW9mIE9iamVjdCkge1xyXG4gICAgICAgICAgbmV3T3B0aW9ucy5jb250YWluZXIgPSBfZXh0ZW5kcyh7fSwgem9vbU9wdGlvbnMuY29udGFpbmVyLCBvcHRpb25zLmNvbnRhaW5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvcHRpb25zLnRlbXBsYXRlKSB7XHJcbiAgICAgICAgICB2YXIgdGVtcGxhdGUgPSBpc05vZGUob3B0aW9ucy50ZW1wbGF0ZSkgPyBvcHRpb25zLnRlbXBsYXRlIDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvcHRpb25zLnRlbXBsYXRlKTtcclxuICAgICAgICAgIG5ld09wdGlvbnMudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgem9vbU9wdGlvbnMgPSBfZXh0ZW5kcyh7fSwgem9vbU9wdGlvbnMsIG5ld09wdGlvbnMpO1xyXG4gICAgICAgIGltYWdlcy5mb3JFYWNoKGZ1bmN0aW9uKGltYWdlKSB7XHJcbiAgICAgICAgICBpbWFnZS5kaXNwYXRjaEV2ZW50KGNyZWF0ZUN1c3RvbUV2ZW50KFwibWVkaXVtLXpvb206dXBkYXRlXCIsIHtcclxuICAgICAgICAgICAgZGV0YWlsOiB7XHJcbiAgICAgICAgICAgICAgem9vbTogem9vbVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHpvb207XHJcbiAgICAgIH07XHJcbiAgICAgIHZhciBjbG9uZSA9IGZ1bmN0aW9uIGNsb25lKCkge1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcclxuICAgICAgICByZXR1cm4gbWVkaXVtWm9vbShfZXh0ZW5kcyh7fSwgem9vbU9wdGlvbnMsIG9wdGlvbnMpKTtcclxuICAgICAgfTtcclxuICAgICAgdmFyIGF0dGFjaCA9IGZ1bmN0aW9uIGF0dGFjaCgpIHtcclxuICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgc2VsZWN0b3JzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XHJcbiAgICAgICAgICBzZWxlY3RvcnNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBuZXdJbWFnZXMgPSBzZWxlY3RvcnMucmVkdWNlKGZ1bmN0aW9uKGltYWdlc0FjY3VtdWxhdG9yLCBjdXJyZW50U2VsZWN0b3IpIHtcclxuICAgICAgICAgIHJldHVybiBbXS5jb25jYXQoaW1hZ2VzQWNjdW11bGF0b3IsIGdldEltYWdlc0Zyb21TZWxlY3RvcihjdXJyZW50U2VsZWN0b3IpKTtcclxuICAgICAgICB9LCBbXSk7XHJcbiAgICAgICAgbmV3SW1hZ2VzLmZpbHRlcihmdW5jdGlvbihuZXdJbWFnZSkge1xyXG4gICAgICAgICAgcmV0dXJuIGltYWdlcy5pbmRleE9mKG5ld0ltYWdlKSA9PT0gLTE7XHJcbiAgICAgICAgfSkuZm9yRWFjaChmdW5jdGlvbihuZXdJbWFnZSkge1xyXG4gICAgICAgICAgaW1hZ2VzLnB1c2gobmV3SW1hZ2UpO1xyXG4gICAgICAgICAgbmV3SW1hZ2UuY2xhc3NMaXN0LmFkZChcIm1lZGl1bS16b29tLWltYWdlXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGV2ZW50TGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24oX3JlZikge1xyXG4gICAgICAgICAgdmFyIHR5cGUgPSBfcmVmLnR5cGUsIGxpc3RlbmVyID0gX3JlZi5saXN0ZW5lciwgb3B0aW9ucyA9IF9yZWYub3B0aW9ucztcclxuICAgICAgICAgIG5ld0ltYWdlcy5mb3JFYWNoKGZ1bmN0aW9uKGltYWdlKSB7XHJcbiAgICAgICAgICAgIGltYWdlLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHpvb207XHJcbiAgICAgIH07XHJcbiAgICAgIHZhciBkZXRhY2ggPSBmdW5jdGlvbiBkZXRhY2goKSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBzZWxlY3RvcnMgPSBBcnJheShfbGVuMiksIF9rZXkyID0gMDsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xyXG4gICAgICAgICAgc2VsZWN0b3JzW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhY3RpdmUuem9vbWVkKSB7XHJcbiAgICAgICAgICBjbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgaW1hZ2VzVG9EZXRhY2ggPSBzZWxlY3RvcnMubGVuZ3RoID4gMCA/IHNlbGVjdG9ycy5yZWR1Y2UoZnVuY3Rpb24oaW1hZ2VzQWNjdW11bGF0b3IsIGN1cnJlbnRTZWxlY3Rvcikge1xyXG4gICAgICAgICAgcmV0dXJuIFtdLmNvbmNhdChpbWFnZXNBY2N1bXVsYXRvciwgZ2V0SW1hZ2VzRnJvbVNlbGVjdG9yKGN1cnJlbnRTZWxlY3RvcikpO1xyXG4gICAgICAgIH0sIFtdKSA6IGltYWdlcztcclxuICAgICAgICBpbWFnZXNUb0RldGFjaC5mb3JFYWNoKGZ1bmN0aW9uKGltYWdlKSB7XHJcbiAgICAgICAgICBpbWFnZS5jbGFzc0xpc3QucmVtb3ZlKFwibWVkaXVtLXpvb20taW1hZ2VcIik7XHJcbiAgICAgICAgICBpbWFnZS5kaXNwYXRjaEV2ZW50KGNyZWF0ZUN1c3RvbUV2ZW50KFwibWVkaXVtLXpvb206ZGV0YWNoXCIsIHtcclxuICAgICAgICAgICAgZGV0YWlsOiB7XHJcbiAgICAgICAgICAgICAgem9vbTogem9vbVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaW1hZ2VzID0gaW1hZ2VzLmZpbHRlcihmdW5jdGlvbihpbWFnZSkge1xyXG4gICAgICAgICAgcmV0dXJuIGltYWdlc1RvRGV0YWNoLmluZGV4T2YoaW1hZ2UpID09PSAtMTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gem9vbTtcclxuICAgICAgfTtcclxuICAgICAgdmFyIG9uID0gZnVuY3Rpb24gb24odHlwZSwgbGlzdGVuZXIpIHtcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XHJcbiAgICAgICAgaW1hZ2VzLmZvckVhY2goZnVuY3Rpb24oaW1hZ2UpIHtcclxuICAgICAgICAgIGltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJtZWRpdW0tem9vbTpcIiArIHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBldmVudExpc3RlbmVycy5wdXNoKHtcclxuICAgICAgICAgIHR5cGU6IFwibWVkaXVtLXpvb206XCIgKyB0eXBlLFxyXG4gICAgICAgICAgbGlzdGVuZXI6IGxpc3RlbmVyLFxyXG4gICAgICAgICAgb3B0aW9uczogb3B0aW9uc1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB6b29tO1xyXG4gICAgICB9O1xyXG4gICAgICB2YXIgb2ZmID0gZnVuY3Rpb24gb2ZmKHR5cGUsIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xyXG4gICAgICAgIGltYWdlcy5mb3JFYWNoKGZ1bmN0aW9uKGltYWdlKSB7XHJcbiAgICAgICAgICBpbWFnZS5yZW1vdmVFdmVudExpc3RlbmVyKFwibWVkaXVtLXpvb206XCIgKyB0eXBlLCBsaXN0ZW5lciwgb3B0aW9ucyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZXZlbnRMaXN0ZW5lcnMgPSBldmVudExpc3RlbmVycy5maWx0ZXIoZnVuY3Rpb24oZXZlbnRMaXN0ZW5lcikge1xyXG4gICAgICAgICAgcmV0dXJuICEoZXZlbnRMaXN0ZW5lci50eXBlID09PSBcIm1lZGl1bS16b29tOlwiICsgdHlwZSAmJiBldmVudExpc3RlbmVyLmxpc3RlbmVyLnRvU3RyaW5nKCkgPT09IGxpc3RlbmVyLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB6b29tO1xyXG4gICAgICB9O1xyXG4gICAgICB2YXIgb3BlbiA9IGZ1bmN0aW9uIG9wZW4oKSB7XHJcbiAgICAgICAgdmFyIF9yZWYyID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSwgdGFyZ2V0ID0gX3JlZjIudGFyZ2V0O1xyXG4gICAgICAgIHZhciBfYW5pbWF0ZSA9IGZ1bmN0aW9uIF9hbmltYXRlKCkge1xyXG4gICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHtcclxuICAgICAgICAgICAgd2lkdGg6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LFxyXG4gICAgICAgICAgICBsZWZ0OiAwLFxyXG4gICAgICAgICAgICB0b3A6IDAsXHJcbiAgICAgICAgICAgIHJpZ2h0OiAwLFxyXG4gICAgICAgICAgICBib3R0b206IDBcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICB2YXIgdmlld3BvcnRXaWR0aCA9IHZvaWQgMDtcclxuICAgICAgICAgIHZhciB2aWV3cG9ydEhlaWdodCA9IHZvaWQgMDtcclxuICAgICAgICAgIGlmICh6b29tT3B0aW9ucy5jb250YWluZXIpIHtcclxuICAgICAgICAgICAgaWYgKHpvb21PcHRpb25zLmNvbnRhaW5lciBpbnN0YW5jZW9mIE9iamVjdCkge1xyXG4gICAgICAgICAgICAgIGNvbnRhaW5lciA9IF9leHRlbmRzKHt9LCBjb250YWluZXIsIHpvb21PcHRpb25zLmNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgICAgdmlld3BvcnRXaWR0aCA9IGNvbnRhaW5lci53aWR0aCAtIGNvbnRhaW5lci5sZWZ0IC0gY29udGFpbmVyLnJpZ2h0IC0gem9vbU9wdGlvbnMubWFyZ2luICogMjtcclxuICAgICAgICAgICAgICB2aWV3cG9ydEhlaWdodCA9IGNvbnRhaW5lci5oZWlnaHQgLSBjb250YWluZXIudG9wIC0gY29udGFpbmVyLmJvdHRvbSAtIHpvb21PcHRpb25zLm1hcmdpbiAqIDI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgdmFyIHpvb21Db250YWluZXIgPSBpc05vZGUoem9vbU9wdGlvbnMuY29udGFpbmVyKSA/IHpvb21PcHRpb25zLmNvbnRhaW5lciA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioem9vbU9wdGlvbnMuY29udGFpbmVyKTtcclxuICAgICAgICAgICAgICB2YXIgX3pvb21Db250YWluZXIkZ2V0Qm91ID0gem9vbUNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgX3dpZHRoID0gX3pvb21Db250YWluZXIkZ2V0Qm91LndpZHRoLCBfaGVpZ2h0ID0gX3pvb21Db250YWluZXIkZ2V0Qm91LmhlaWdodCwgX2xlZnQgPSBfem9vbUNvbnRhaW5lciRnZXRCb3UubGVmdCwgX3RvcCA9IF96b29tQ29udGFpbmVyJGdldEJvdS50b3A7XHJcbiAgICAgICAgICAgICAgY29udGFpbmVyID0gX2V4dGVuZHMoe30sIGNvbnRhaW5lciwge1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IF93aWR0aCxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogX2hlaWdodCxcclxuICAgICAgICAgICAgICAgIGxlZnQ6IF9sZWZ0LFxyXG4gICAgICAgICAgICAgICAgdG9wOiBfdG9wXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHZpZXdwb3J0V2lkdGggPSB2aWV3cG9ydFdpZHRoIHx8IGNvbnRhaW5lci53aWR0aCAtIHpvb21PcHRpb25zLm1hcmdpbiAqIDI7XHJcbiAgICAgICAgICB2aWV3cG9ydEhlaWdodCA9IHZpZXdwb3J0SGVpZ2h0IHx8IGNvbnRhaW5lci5oZWlnaHQgLSB6b29tT3B0aW9ucy5tYXJnaW4gKiAyO1xyXG4gICAgICAgICAgdmFyIHpvb21UYXJnZXQgPSBhY3RpdmUuem9vbWVkSGQgfHwgYWN0aXZlLm9yaWdpbmFsO1xyXG4gICAgICAgICAgdmFyIG5hdHVyYWxXaWR0aCA9IGlzU3ZnKHpvb21UYXJnZXQpID8gdmlld3BvcnRXaWR0aCA6IHpvb21UYXJnZXQubmF0dXJhbFdpZHRoIHx8IHZpZXdwb3J0V2lkdGg7XHJcbiAgICAgICAgICB2YXIgbmF0dXJhbEhlaWdodCA9IGlzU3ZnKHpvb21UYXJnZXQpID8gdmlld3BvcnRIZWlnaHQgOiB6b29tVGFyZ2V0Lm5hdHVyYWxIZWlnaHQgfHwgdmlld3BvcnRIZWlnaHQ7XHJcbiAgICAgICAgICB2YXIgX3pvb21UYXJnZXQkZ2V0Qm91bmRpID0gem9vbVRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgdG9wID0gX3pvb21UYXJnZXQkZ2V0Qm91bmRpLnRvcCwgbGVmdCA9IF96b29tVGFyZ2V0JGdldEJvdW5kaS5sZWZ0LCB3aWR0aCA9IF96b29tVGFyZ2V0JGdldEJvdW5kaS53aWR0aCwgaGVpZ2h0ID0gX3pvb21UYXJnZXQkZ2V0Qm91bmRpLmhlaWdodDtcclxuICAgICAgICAgIHZhciBzY2FsZVggPSBNYXRoLm1pbihuYXR1cmFsV2lkdGgsIHZpZXdwb3J0V2lkdGgpIC8gd2lkdGg7XHJcbiAgICAgICAgICB2YXIgc2NhbGVZID0gTWF0aC5taW4obmF0dXJhbEhlaWdodCwgdmlld3BvcnRIZWlnaHQpIC8gaGVpZ2h0O1xyXG4gICAgICAgICAgdmFyIHNjYWxlID0gTWF0aC5taW4oc2NhbGVYLCBzY2FsZVkpO1xyXG4gICAgICAgICAgdmFyIHRyYW5zbGF0ZVggPSAoLWxlZnQgKyAodmlld3BvcnRXaWR0aCAtIHdpZHRoKSAvIDIgKyB6b29tT3B0aW9ucy5tYXJnaW4gKyBjb250YWluZXIubGVmdCkgLyBzY2FsZTtcclxuICAgICAgICAgIHZhciB0cmFuc2xhdGVZID0gKC10b3AgKyAodmlld3BvcnRIZWlnaHQgLSBoZWlnaHQpIC8gMiArIHpvb21PcHRpb25zLm1hcmdpbiArIGNvbnRhaW5lci50b3ApIC8gc2NhbGU7XHJcbiAgICAgICAgICB2YXIgdHJhbnNmb3JtID0gXCJzY2FsZShcIiArIHNjYWxlICsgXCIpIHRyYW5zbGF0ZTNkKFwiICsgdHJhbnNsYXRlWCArIFwicHgsIFwiICsgdHJhbnNsYXRlWSArIFwicHgsIDApXCI7XHJcbiAgICAgICAgICBhY3RpdmUuem9vbWVkLnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcclxuICAgICAgICAgIGlmIChhY3RpdmUuem9vbWVkSGQpIHtcclxuICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkLnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7XHJcbiAgICAgICAgICBpZiAodGFyZ2V0ICYmIGltYWdlcy5pbmRleE9mKHRhcmdldCkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUoem9vbSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHZhciBfaGFuZGxlT3BlbkVuZCA9IGZ1bmN0aW9uIF9oYW5kbGVPcGVuRW5kKCkge1xyXG4gICAgICAgICAgICBpc0FuaW1hdGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBhY3RpdmUuem9vbWVkLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIF9oYW5kbGVPcGVuRW5kKTtcclxuICAgICAgICAgICAgYWN0aXZlLm9yaWdpbmFsLmRpc3BhdGNoRXZlbnQoY3JlYXRlQ3VzdG9tRXZlbnQoXCJtZWRpdW0tem9vbTpvcGVuZWRcIiwge1xyXG4gICAgICAgICAgICAgIGRldGFpbDoge1xyXG4gICAgICAgICAgICAgICAgem9vbTogem9vbVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICByZXNvbHZlKHpvb20pO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIGlmIChhY3RpdmUuem9vbWVkKSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUoem9vbSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmICh0YXJnZXQpIHtcclxuICAgICAgICAgICAgYWN0aXZlLm9yaWdpbmFsID0gdGFyZ2V0O1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChpbWFnZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB2YXIgX2ltYWdlcyA9IGltYWdlcztcclxuICAgICAgICAgICAgYWN0aXZlLm9yaWdpbmFsID0gX2ltYWdlc1swXTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUoem9vbSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGFjdGl2ZS5vcmlnaW5hbC5kaXNwYXRjaEV2ZW50KGNyZWF0ZUN1c3RvbUV2ZW50KFwibWVkaXVtLXpvb206b3BlblwiLCB7XHJcbiAgICAgICAgICAgIGRldGFpbDoge1xyXG4gICAgICAgICAgICAgIHpvb206IHpvb21cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgc2Nyb2xsVG9wID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgfHwgMDtcclxuICAgICAgICAgIGlzQW5pbWF0aW5nID0gdHJ1ZTtcclxuICAgICAgICAgIGFjdGl2ZS56b29tZWQgPSBjbG9uZVRhcmdldChhY3RpdmUub3JpZ2luYWwpO1xyXG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdmVybGF5KTtcclxuICAgICAgICAgIGlmICh6b29tT3B0aW9ucy50ZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSBpc05vZGUoem9vbU9wdGlvbnMudGVtcGxhdGUpID8gem9vbU9wdGlvbnMudGVtcGxhdGUgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHpvb21PcHRpb25zLnRlbXBsYXRlKTtcclxuICAgICAgICAgICAgYWN0aXZlLnRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgYWN0aXZlLnRlbXBsYXRlLmFwcGVuZENoaWxkKHRlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhY3RpdmUudGVtcGxhdGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhY3RpdmUuem9vbWVkKTtcclxuICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChcIm1lZGl1bS16b29tLS1vcGVuZWRcIik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGFjdGl2ZS5vcmlnaW5hbC5jbGFzc0xpc3QuYWRkKFwibWVkaXVtLXpvb20taW1hZ2UtLWhpZGRlblwiKTtcclxuICAgICAgICAgIGFjdGl2ZS56b29tZWQuY2xhc3NMaXN0LmFkZChcIm1lZGl1bS16b29tLWltYWdlLS1vcGVuZWRcIik7XHJcbiAgICAgICAgICBhY3RpdmUuem9vbWVkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZSk7XHJcbiAgICAgICAgICBhY3RpdmUuem9vbWVkLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIF9oYW5kbGVPcGVuRW5kKTtcclxuICAgICAgICAgIGlmIChhY3RpdmUub3JpZ2luYWwuZ2V0QXR0cmlidXRlKFwiZGF0YS16b29tLXNyY1wiKSkge1xyXG4gICAgICAgICAgICBhY3RpdmUuem9vbWVkSGQgPSBhY3RpdmUuem9vbWVkLmNsb25lTm9kZSgpO1xyXG4gICAgICAgICAgICBhY3RpdmUuem9vbWVkSGQucmVtb3ZlQXR0cmlidXRlKFwic3Jjc2V0XCIpO1xyXG4gICAgICAgICAgICBhY3RpdmUuem9vbWVkSGQucmVtb3ZlQXR0cmlidXRlKFwic2l6ZXNcIik7XHJcbiAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZC5zcmMgPSBhY3RpdmUuem9vbWVkLmdldEF0dHJpYnV0ZShcImRhdGEtem9vbS1zcmNcIik7XHJcbiAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZC5vbmVycm9yID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChnZXRab29tVGFyZ2V0U2l6ZSk7XHJcbiAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiVW5hYmxlIHRvIHJlYWNoIHRoZSB6b29tIGltYWdlIHRhcmdldCBcIiArIGFjdGl2ZS56b29tZWRIZC5zcmMpO1xyXG4gICAgICAgICAgICAgIGFjdGl2ZS56b29tZWRIZCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgX2FuaW1hdGUoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIGdldFpvb21UYXJnZXRTaXplID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgaWYgKGFjdGl2ZS56b29tZWRIZC5jb21wbGV0ZSkge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChnZXRab29tVGFyZ2V0U2l6ZSk7XHJcbiAgICAgICAgICAgICAgICBhY3RpdmUuem9vbWVkSGQuY2xhc3NMaXN0LmFkZChcIm1lZGl1bS16b29tLWltYWdlLS1vcGVuZWRcIik7XHJcbiAgICAgICAgICAgICAgICBhY3RpdmUuem9vbWVkSGQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYWN0aXZlLnpvb21lZEhkKTtcclxuICAgICAgICAgICAgICAgIF9hbmltYXRlKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCAxMCk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGFjdGl2ZS5vcmlnaW5hbC5oYXNBdHRyaWJ1dGUoXCJzcmNzZXRcIikpIHtcclxuICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkID0gYWN0aXZlLnpvb21lZC5jbG9uZU5vZGUoKTtcclxuICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkLnJlbW92ZUF0dHJpYnV0ZShcInNpemVzXCIpO1xyXG4gICAgICAgICAgICB2YXIgbG9hZEV2ZW50TGlzdGVuZXIgPSBhY3RpdmUuem9vbWVkSGQuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGxvYWRFdmVudExpc3RlbmVyKTtcclxuICAgICAgICAgICAgICBhY3RpdmUuem9vbWVkSGQuY2xhc3NMaXN0LmFkZChcIm1lZGl1bS16b29tLWltYWdlLS1vcGVuZWRcIik7XHJcbiAgICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZSk7XHJcbiAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhY3RpdmUuem9vbWVkSGQpO1xyXG4gICAgICAgICAgICAgIF9hbmltYXRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgX2FuaW1hdGUoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuICAgICAgdmFyIGNsb3NlID0gZnVuY3Rpb24gY2xvc2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHtcclxuICAgICAgICAgIGlmIChpc0FuaW1hdGluZyB8fCAhYWN0aXZlLm9yaWdpbmFsKSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUoem9vbSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHZhciBfaGFuZGxlQ2xvc2VFbmQgPSBmdW5jdGlvbiBfaGFuZGxlQ2xvc2VFbmQoKSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZS5vcmlnaW5hbC5jbGFzc0xpc3QucmVtb3ZlKFwibWVkaXVtLXpvb20taW1hZ2UtLWhpZGRlblwiKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhY3RpdmUuem9vbWVkKTtcclxuICAgICAgICAgICAgaWYgKGFjdGl2ZS56b29tZWRIZCkge1xyXG4gICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYWN0aXZlLnpvb21lZEhkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG92ZXJsYXkpO1xyXG4gICAgICAgICAgICBhY3RpdmUuem9vbWVkLmNsYXNzTGlzdC5yZW1vdmUoXCJtZWRpdW0tem9vbS1pbWFnZS0tb3BlbmVkXCIpO1xyXG4gICAgICAgICAgICBpZiAoYWN0aXZlLnRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhY3RpdmUudGVtcGxhdGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlzQW5pbWF0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGFjdGl2ZS56b29tZWQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgX2hhbmRsZUNsb3NlRW5kKTtcclxuICAgICAgICAgICAgYWN0aXZlLm9yaWdpbmFsLmRpc3BhdGNoRXZlbnQoY3JlYXRlQ3VzdG9tRXZlbnQoXCJtZWRpdW0tem9vbTpjbG9zZWRcIiwge1xyXG4gICAgICAgICAgICAgIGRldGFpbDoge1xyXG4gICAgICAgICAgICAgICAgem9vbTogem9vbVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICBhY3RpdmUub3JpZ2luYWwgPSBudWxsO1xyXG4gICAgICAgICAgICBhY3RpdmUuem9vbWVkID0gbnVsbDtcclxuICAgICAgICAgICAgYWN0aXZlLnpvb21lZEhkID0gbnVsbDtcclxuICAgICAgICAgICAgYWN0aXZlLnRlbXBsYXRlID0gbnVsbDtcclxuICAgICAgICAgICAgcmVzb2x2ZSh6b29tKTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBpc0FuaW1hdGluZyA9IHRydWU7XHJcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJtZWRpdW0tem9vbS0tb3BlbmVkXCIpO1xyXG4gICAgICAgICAgYWN0aXZlLnpvb21lZC5zdHlsZS50cmFuc2Zvcm0gPSBcIlwiO1xyXG4gICAgICAgICAgaWYgKGFjdGl2ZS56b29tZWRIZCkge1xyXG4gICAgICAgICAgICBhY3RpdmUuem9vbWVkSGQuc3R5bGUudHJhbnNmb3JtID0gXCJcIjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChhY3RpdmUudGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgYWN0aXZlLnRlbXBsYXRlLnN0eWxlLnRyYW5zaXRpb24gPSBcIm9wYWNpdHkgMTUwbXNcIjtcclxuICAgICAgICAgICAgYWN0aXZlLnRlbXBsYXRlLnN0eWxlLm9wYWNpdHkgPSAwO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYWN0aXZlLm9yaWdpbmFsLmRpc3BhdGNoRXZlbnQoY3JlYXRlQ3VzdG9tRXZlbnQoXCJtZWRpdW0tem9vbTpjbG9zZVwiLCB7XHJcbiAgICAgICAgICAgIGRldGFpbDoge1xyXG4gICAgICAgICAgICAgIHpvb206IHpvb21cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgYWN0aXZlLnpvb21lZC5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBfaGFuZGxlQ2xvc2VFbmQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG4gICAgICB2YXIgdG9nZ2xlID0gZnVuY3Rpb24gdG9nZ2xlKCkge1xyXG4gICAgICAgIHZhciBfcmVmMyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sIHRhcmdldCA9IF9yZWYzLnRhcmdldDtcclxuICAgICAgICBpZiAoYWN0aXZlLm9yaWdpbmFsKSB7XHJcbiAgICAgICAgICByZXR1cm4gY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9wZW4oe1xyXG4gICAgICAgICAgdGFyZ2V0OiB0YXJnZXRcclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuICAgICAgdmFyIGdldE9wdGlvbnMgPSBmdW5jdGlvbiBnZXRPcHRpb25zKCkge1xyXG4gICAgICAgIHJldHVybiB6b29tT3B0aW9ucztcclxuICAgICAgfTtcclxuICAgICAgdmFyIGdldEltYWdlcyA9IGZ1bmN0aW9uIGdldEltYWdlcygpIHtcclxuICAgICAgICByZXR1cm4gaW1hZ2VzO1xyXG4gICAgICB9O1xyXG4gICAgICB2YXIgZ2V0Wm9vbWVkSW1hZ2UgPSBmdW5jdGlvbiBnZXRab29tZWRJbWFnZSgpIHtcclxuICAgICAgICByZXR1cm4gYWN0aXZlLm9yaWdpbmFsO1xyXG4gICAgICB9O1xyXG4gICAgICB2YXIgaW1hZ2VzID0gW107XHJcbiAgICAgIHZhciBldmVudExpc3RlbmVycyA9IFtdO1xyXG4gICAgICB2YXIgaXNBbmltYXRpbmcgPSBmYWxzZTtcclxuICAgICAgdmFyIHNjcm9sbFRvcCA9IDA7XHJcbiAgICAgIHZhciB6b29tT3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICAgIHZhciBhY3RpdmUgPSB7XHJcbiAgICAgICAgb3JpZ2luYWw6IG51bGwsXHJcbiAgICAgICAgem9vbWVkOiBudWxsLFxyXG4gICAgICAgIHpvb21lZEhkOiBudWxsLFxyXG4gICAgICAgIHRlbXBsYXRlOiBudWxsXHJcbiAgICAgIH07XHJcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoc2VsZWN0b3IpID09PSBcIltvYmplY3QgT2JqZWN0XVwiKSB7XHJcbiAgICAgICAgem9vbU9wdGlvbnMgPSBzZWxlY3RvcjtcclxuICAgICAgfSBlbHNlIGlmIChzZWxlY3RvciB8fCB0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICBhdHRhY2goc2VsZWN0b3IpO1xyXG4gICAgICB9XHJcbiAgICAgIHpvb21PcHRpb25zID0gX2V4dGVuZHMoe1xyXG4gICAgICAgIG1hcmdpbjogMCxcclxuICAgICAgICBiYWNrZ3JvdW5kOiBcIiNmZmZcIixcclxuICAgICAgICBzY3JvbGxPZmZzZXQ6IDQwLFxyXG4gICAgICAgIGNvbnRhaW5lcjogbnVsbCxcclxuICAgICAgICB0ZW1wbGF0ZTogbnVsbFxyXG4gICAgICB9LCB6b29tT3B0aW9ucyk7XHJcbiAgICAgIHZhciBvdmVybGF5ID0gY3JlYXRlT3ZlcmxheSh6b29tT3B0aW9ucy5iYWNrZ3JvdW5kKTtcclxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIF9oYW5kbGVDbGljayk7XHJcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBfaGFuZGxlS2V5VXApO1xyXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIF9oYW5kbGVTY3JvbGwpO1xyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBjbG9zZSk7XHJcbiAgICAgIHZhciB6b29tID0ge1xyXG4gICAgICAgIG9wZW46IG9wZW4sXHJcbiAgICAgICAgY2xvc2U6IGNsb3NlLFxyXG4gICAgICAgIHRvZ2dsZTogdG9nZ2xlLFxyXG4gICAgICAgIHVwZGF0ZTogdXBkYXRlLFxyXG4gICAgICAgIGNsb25lOiBjbG9uZSxcclxuICAgICAgICBhdHRhY2g6IGF0dGFjaCxcclxuICAgICAgICBkZXRhY2g6IGRldGFjaCxcclxuICAgICAgICBvbjogb24sXHJcbiAgICAgICAgb2ZmOiBvZmYsXHJcbiAgICAgICAgZ2V0T3B0aW9uczogZ2V0T3B0aW9ucyxcclxuICAgICAgICBnZXRJbWFnZXM6IGdldEltYWdlcyxcclxuICAgICAgICBnZXRab29tZWRJbWFnZTogZ2V0Wm9vbWVkSW1hZ2VcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHpvb207XHJcbiAgICB9O1xyXG4gICAgZnVuY3Rpb24gc3R5bGVJbmplY3QoY3NzLCByZWYpIHtcclxuICAgICAgaWYgKHJlZiA9PT0gdm9pZCAwKSByZWYgPSB7fTtcclxuICAgICAgdmFyIGluc2VydEF0ID0gcmVmLmluc2VydEF0O1xyXG4gICAgICBpZiAoIWNzcyB8fCB0eXBlb2YgZG9jdW1lbnQgPT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgdmFyIGhlYWQgPSBkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcclxuICAgICAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xyXG4gICAgICBzdHlsZS50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xyXG4gICAgICBpZiAoaW5zZXJ0QXQgPT09IFwidG9wXCIpIHtcclxuICAgICAgICBpZiAoaGVhZC5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgICBoZWFkLmluc2VydEJlZm9yZShzdHlsZSwgaGVhZC5maXJzdENoaWxkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XHJcbiAgICAgICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB2YXIgY3NzID0gXCIubWVkaXVtLXpvb20tb3ZlcmxheXtwb3NpdGlvbjpmaXhlZDt0b3A6MDtyaWdodDowO2JvdHRvbTowO2xlZnQ6MDtvcGFjaXR5OjA7dHJhbnNpdGlvbjpvcGFjaXR5IC4zczt3aWxsLWNoYW5nZTpvcGFjaXR5fS5tZWRpdW0tem9vbS0tb3BlbmVkIC5tZWRpdW0tem9vbS1vdmVybGF5e2N1cnNvcjpwb2ludGVyO2N1cnNvcjp6b29tLW91dDtvcGFjaXR5OjF9Lm1lZGl1bS16b29tLWltYWdle2N1cnNvcjpwb2ludGVyO2N1cnNvcjp6b29tLWluO3RyYW5zaXRpb246dHJhbnNmb3JtIC4zcyBjdWJpYy1iZXppZXIoLjIsMCwuMiwxKX0ubWVkaXVtLXpvb20taW1hZ2UtLWhpZGRlbnt2aXNpYmlsaXR5OmhpZGRlbn0ubWVkaXVtLXpvb20taW1hZ2UtLW9wZW5lZHtwb3NpdGlvbjpyZWxhdGl2ZTtjdXJzb3I6cG9pbnRlcjtjdXJzb3I6em9vbS1vdXQ7d2lsbC1jaGFuZ2U6dHJhbnNmb3JtfVwiO1xyXG4gICAgc3R5bGVJbmplY3QoY3NzKTtcclxuICAgIHJldHVybiBtZWRpdW1ab29tO1xyXG4gIH0pO1xyXG4oKCkgPT4ge1xyXG4gICAgbGV0XHJcbiAgICAgICAgc3dpcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm90aGVyLXNlcnZpY2VzX19zd2lwZXInKSxcclxuICAgICAgICBzd2lwZXJMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm90aGVyLXNlcnZpY2VzX19saXN0JyksXHJcbiAgICAgICAgc3dpcGVyV2lkdGggPSBwYXJzZUludChnZXRDb21wdXRlZFN0eWxlKHN3aXBlcikud2lkdGgpLFxyXG4gICAgICAgIHN3aXBlckxpc3RXaWR0aCA9IHBhcnNlSW50KGdldENvbXB1dGVkU3R5bGUoc3dpcGVyTGlzdCkud2lkdGgpO1xyXG5cclxuXHJcbiAgICB3aW5kb3cub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgIGxldCBoZWlnaHRPZlN3aXBlciA9IGdldENvbXB1dGVkU3R5bGUoc3dpcGVyKS5oZWlnaHQ7XHJcbiAgICAgICAgc3dpcGVyLnN0eWxlLmhlaWdodCA9IGAke3BhcnNlSW50KGhlaWdodE9mU3dpcGVyKSArIDQwfXB4YDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgc3dpcGVyTGlzdC5zdHlsZS5tYXJnaW5MZWZ0ID0gJzBweCc7XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIHN3aXBlKGV2ZW50KSB7XHJcblxyXG4gICAgICAgIHN3aXBlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgc3dpdGNoT2ZmU3dpcGVyKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc3dpdGNoT2ZmU3dpcGVyKCkge1xyXG4gICAgICAgICAgICBzd2lwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgc3dpcGVNb3VzZU1vdmVPbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzd2lwZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHN3aXBlTW91c2VNb3ZlT2ZmKTtcclxuXHJcbiAgICAgICAgbGV0XHJcbiAgICAgICAgICAgIGZpcnN0Q3Vyc29yUG9zaXRpb24gPSBldmVudC5wYWdlWCxcclxuICAgICAgICAgICAgaW5pdGlhbEN1cnNvclBvc2l0aW9uID0gZXZlbnQucGFnZVgsXHJcbiAgICAgICAgICAgIHN1bW1Td2lwZURpc3RhbmNlID0gMCxcclxuICAgICAgICAgICAgd2F5VG9XaGljaFN3aXBlSXNNYWRlLFxyXG4gICAgICAgICAgICBzd2lwZUxpc3RNYXJnaW5MZWZ0LFxyXG4gICAgICAgICAgICBpc0Zhc3RTd2lwZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBzd2lwZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgc3dpcGVNb3VzZU1vdmVPbik7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHN3aXBlTW91c2VNb3ZlT24oZXZlbnQpIHtcclxuXHJcbiAgICAgICAgICAgIGxldFxyXG4gICAgICAgICAgICAgICAgbmV3Q3Vyc29yUG9zaXRpb24gPSBldmVudC5wYWdlWCxcclxuICAgICAgICAgICAgICAgIHN3aXBlRGlzdGFuY2UgPSBNYXRoLmFicyhpbml0aWFsQ3Vyc29yUG9zaXRpb24gLSBuZXdDdXJzb3JQb3NpdGlvbik7XHJcblxyXG4gICAgICAgICAgICBzd2lwZUxpc3RNYXJnaW5MZWZ0ID0gcGFyc2VJbnQoc3dpcGVyTGlzdC5zdHlsZS5tYXJnaW5MZWZ0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChuZXdDdXJzb3JQb3NpdGlvbiA8IGluaXRpYWxDdXJzb3JQb3NpdGlvbikgd2F5VG9XaGljaFN3aXBlSXNNYWRlID0gJ2xlZnQnO1xyXG4gICAgICAgICAgICBlbHNlIGlmIChuZXdDdXJzb3JQb3NpdGlvbiA+IGluaXRpYWxDdXJzb3JQb3NpdGlvbikgd2F5VG9XaGljaFN3aXBlSXNNYWRlID0gJ3JpZ2h0JztcclxuICAgICAgICAgICAgZWxzZSBpZiAobmV3Q3Vyc29yUG9zaXRpb24gPSBpbml0aWFsQ3Vyc29yUG9zaXRpb24pIHdheVRvV2hpY2hTd2lwZUlzTWFkZSA9IHdheVRvV2hpY2hTd2lwZUlzTWFkZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHN3aXRjaCh3YXlUb1doaWNoU3dpcGVJc01hZGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2xlZnQnOlxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoLXN3aXBlTGlzdE1hcmdpbkxlZnQgPj0gKHN3aXBlckxpc3RXaWR0aCAtIHN3aXBlcldpZHRoKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXBlckxpc3Quc3R5bGUubWFyZ2luTGVmdCA9IGAke3N3aXBlTGlzdE1hcmdpbkxlZnQgLSBzd2lwZURpc3RhbmNlfXB4YDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlICdyaWdodCc6XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN3aXBlTGlzdE1hcmdpbkxlZnQgPj0gMCApIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICBzd2lwZXJMaXN0LnN0eWxlLm1hcmdpbkxlZnQgPSBgJHtzd2lwZUxpc3RNYXJnaW5MZWZ0ICsgc3dpcGVEaXN0YW5jZX1weGA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN1bW1Td2lwZURpc3RhbmNlICs9IHN3aXBlRGlzdGFuY2U7XHJcbiAgICAgICAgICAgIGluaXRpYWxDdXJzb3JQb3NpdGlvbiA9IG5ld0N1cnNvclBvc2l0aW9uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc3dpcGVNb3VzZU1vdmVPZmYoZXZlbnQpIHtcclxuICAgICAgICAgICAgc3dpcGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHN3aXBlTW91c2VNb3ZlT24pO1xyXG5cclxuICAgICAgICAgICAgaXNGYXN0U3dpcGUgPSAoc3VtbVN3aXBlRGlzdGFuY2UgPj0gMTAwKSA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKCFpc0Zhc3RTd2lwZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgc3VtbVN3aXBlRGlzdGFuY2UgPSAoc3VtbVN3aXBlRGlzdGFuY2UgPiAoc3dpcGVyTGlzdFdpZHRoIC0gc3dpcGVyV2lkdGgpKSA/IChzd2lwZXJMaXN0V2lkdGggLSBzd2lwZXJXaWR0aCkgOiBzdW1tU3dpcGVEaXN0YW5jZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxldCBhZGRpdGlvbmFsU3dpcGVEaXN0YW5jZSA9IChzdW1tU3dpcGVEaXN0YW5jZSAvIDEuNSk7IC8vIDwtLS0tIGNoYW5nZSBzd2lwZSBzcGVlZCwgZm9yIGV4YW1wbGU6IChzdW1tU3dpcGVEaXN0YW5jZSAvIDIuNSlcclxuXHJcblxyXG4gICAgICAgICAgICBsZXQgbGFzdEN1cnNvclBvc2l0aW9uID0gZXZlbnQucGFnZVg7XHJcbiAgICAgICAgICAgIHdheVRvV2hpY2hTd2lwZUlzTWFkZSA9IChsYXN0Q3Vyc29yUG9zaXRpb24gPCBmaXJzdEN1cnNvclBvc2l0aW9uKSA/ICdsZWZ0JyA6ICdyaWdodCc7XHJcblxyXG4gICAgICAgICAgICBzd2lwZUxpc3RNYXJnaW5MZWZ0ID0gcGFyc2VJbnQoc3dpcGVyTGlzdC5zdHlsZS5tYXJnaW5MZWZ0KTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCh3YXlUb1doaWNoU3dpcGVJc01hZGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2xlZnQnOlxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoLXN3aXBlTGlzdE1hcmdpbkxlZnQgPj0gKHN3aXBlckxpc3RXaWR0aCAtIHN3aXBlcldpZHRoKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxTd2lwZURpc3RhbmNlID0gKGFkZGl0aW9uYWxTd2lwZURpc3RhbmNlID4gKChzd2lwZXJMaXN0V2lkdGggLSBzd2lwZXJXaWR0aCkgKyBzd2lwZUxpc3RNYXJnaW5MZWZ0KSkgPyAoKHN3aXBlckxpc3RXaWR0aCAtIHN3aXBlcldpZHRoKSArIHN3aXBlTGlzdE1hcmdpbkxlZnQpIDogYWRkaXRpb25hbFN3aXBlRGlzdGFuY2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHN3aXBlckxpc3Quc3R5bGUudHJhbnNpdGlvbiA9ICdhbGwgMC4zNXMnO1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXBlckxpc3Quc3R5bGUubWFyZ2luTGVmdCA9IGAke3N3aXBlTGlzdE1hcmdpbkxlZnQgLSBhZGRpdGlvbmFsU3dpcGVEaXN0YW5jZX1weGA7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzd2lwZUxpc3RNYXJnaW5MZWZ0ID49IDAgKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxTd2lwZURpc3RhbmNlID0gKGFkZGl0aW9uYWxTd2lwZURpc3RhbmNlID4gLXN3aXBlTGlzdE1hcmdpbkxlZnQpID8gLXN3aXBlTGlzdE1hcmdpbkxlZnQgOiBhZGRpdGlvbmFsU3dpcGVEaXN0YW5jZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3dpcGVyTGlzdC5zdHlsZS50cmFuc2l0aW9uID0gJ2FsbCAwLjM1cyc7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpcGVyTGlzdC5zdHlsZS5tYXJnaW5MZWZ0ID0gYCR7c3dpcGVMaXN0TWFyZ2luTGVmdCArIGFkZGl0aW9uYWxTd2lwZURpc3RhbmNlfXB4YDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzd2lwZXJMaXN0LnN0eWxlLnRyYW5zaXRpb24gPSAnYWxsIDBzJztcclxuICAgICAgICAgICAgfSwgMjUwKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHN3aXBlci5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgc3dpcGVNb3VzZU1vdmVPZmYpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzd2lwZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgc3dpcGUpO1xyXG59KSgpO1xyXG4oKCkgPT4ge1xyXG4gIGNvbnN0IG1vZGFsVHJpZ2dlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcqW2RhdGEtbW9kYWwtdGFyZ2V0XScpO1xyXG4gIGNvbnN0IGNsb3NlTW9kYWxCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnKltkYXRhLW1vZGFsLWNsb3NlXScpO1xyXG4gIGxldCBvcGVuZWRNb2RhbElEO1xyXG5cclxuICBjb25zdCBvcGVuTW9kYWxXaW5kb3cgPSAoZXZ0KSA9PiB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSBldnQuY3VycmVudFRhcmdldDtcclxuICAgIGNvbnN0IG1vZGFsSUQgPSB0YXJnZXQuZGF0YXNldC5tb2RhbFRhcmdldDtcclxuICAgIGNvbnN0IHRhcmdldE1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobW9kYWxJRCk7XHJcblxyXG4gICAgKG9wZW5lZE1vZGFsSUQgIT09IHVuZGVmaW5lZCkgPyBjbG9zZU1vZGFsV2luZG93KG9wZW5lZE1vZGFsSUQpIDogbnVsbDtcclxuXHJcbiAgICAobW9kYWxJRCA9PT0gJ3NlcnZpY2UtZXhhbXBsZScpID8gY3JlYXRlU2VydmljZUV4YW1wbGVNb2RhbCh0YXJnZXQsIHRhcmdldE1vZGFsKSA6IG51bGw7XHJcblxyXG4gICAgb3BlbmVkTW9kYWxJRCA9IG1vZGFsSUQ7XHJcblxyXG4gICAgdGFyZ2V0TW9kYWwuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmNsYXNzTGlzdC5hZGQoJ2ZpeGVkJyk7XHJcblxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VNb2RhbEJ5QmFja2dyb3VuZCk7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGNsb3NlTW9kYWxCeUVzYyk7XHJcblxyXG4gICAgY29uc3RcclxuICAgICAgZm9jdXNhYmxlRWxlbWVudHMgPSB0YXJnZXRNb2RhbC5xdWVyeVNlbGVjdG9yQWxsKCdhW2hyZWZdOm5vdChbZGlzYWJsZWRdKSwgYnV0dG9uOm5vdChbZGlzYWJsZWRdKSwgdGV4dGFyZWE6bm90KFtkaXNhYmxlZF0pLCBpbnB1dFt0eXBlPVwidGV4dFwiXTpub3QoW2Rpc2FibGVkXSksIGlucHV0W3R5cGU9XCJyYWRpb1wiXTpub3QoW2Rpc2FibGVkXSksIGlucHV0W3R5cGU9XCJjaGVja2JveFwiXTpub3QoW2Rpc2FibGVkXSksIHNlbGVjdDpub3QoW2Rpc2FibGVkXSknKSxcclxuICAgICAgZmlyc3RGb2N1c2FibGVFbGVtZW50ID0gZm9jdXNhYmxlRWxlbWVudHNbMF0sXHJcbiAgICAgIGxhc3RGb2N1c2FibGVFbGVtZW50ID0gZm9jdXNhYmxlRWxlbWVudHNbZm9jdXNhYmxlRWxlbWVudHMubGVuZ3RoIC0gMV07XHJcblxyXG4gICAgZnVuY3Rpb24gbG9ja0ZvY3VzSW5Nb2RhbChldmVudCkge1xyXG4gICAgICBpZiAoZXZlbnQua2V5ID09PSAnVGFiJyB8fCBldmVudC5rZXlDb2RlID09PSA5KSB7XHJcbiAgICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gZmlyc3RGb2N1c2FibGVFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGxhc3RGb2N1c2FibGVFbGVtZW50LmZvY3VzKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBsYXN0Rm9jdXNhYmxlRWxlbWVudCkge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAgXHJcbiAgICAgICAgICAgIGZpcnN0Rm9jdXNhYmxlRWxlbWVudC5mb2N1cygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRhcmdldE1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBsb2NrRm9jdXNJbk1vZGFsKTtcclxuXHJcbiAgfTtcclxuXHJcbiAgY29uc3QgY2xvc2VNb2RhbEJ5RXNjID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgIGNsb3NlTW9kYWxXaW5kb3cob3BlbmVkTW9kYWxJRCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgY2xvc2VNb2RhbEJ5QmFja2dyb3VuZCA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kYWxfX2JnJykpIHtcclxuICAgICAgY2xvc2VNb2RhbFdpbmRvdyhvcGVuZWRNb2RhbElEKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBjbG9zZU1vZGFsQnlCdXR0b24gPSAoZXZ0KSA9PiBjbG9zZU1vZGFsV2luZG93KGV2dC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQubW9kYWxDbG9zZSk7XHJcblxyXG4gIGNvbnN0IGNsb3NlTW9kYWxXaW5kb3cgPSAobW9kYWxJRCkgPT4ge1xyXG4gICAgY29uc3QgdGFyZ2V0TW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtb2RhbElEKTtcclxuXHJcbiAgICB0YXJnZXRNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuY2xhc3NMaXN0LnJlbW92ZSgnZml4ZWQnKTtcclxuXHJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZU1vZGFsQnlCYWNrZ3JvdW5kKTtcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgY2xvc2VNb2RhbEJ5RXNjKTtcclxuICAgIC8vIHRhcmdldE1vZGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBsb2NrRm9jdXNJbk1vZGFsKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBpbml0aWFsaXplTW9kYWxUcmlnZ2VycyA9ICgpID0+IHtcclxuICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIG1vZGFsVHJpZ2dlcnMpIHtcclxuICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3Blbk1vZGFsV2luZG93KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjbG9zZU1vZGFsQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZU1vZGFsQnlCdXR0b24pKTtcclxuXHJcbiAgd2luZG93Lm1vZGFscyA9IHtcclxuICAgIG9wZW5Nb2RhbFdpbmRvdzogb3Blbk1vZGFsV2luZG93LFxyXG4gICAgY2xvc2VNb2RhbFdpbmRvdzogY2xvc2VNb2RhbFdpbmRvdyxcclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVTZXJ2aWNlRXhhbXBsZU1vZGFsKHRhcmdldCwgdGFyZ2V0TW9kYWwpIHtcclxuICAgIGNvbnN0XHJcbiAgICAgIHNlcnZpY2VUaXRsZSA9IHRhcmdldC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy53aGF0LXlvdS1nZXRfX2l0ZW0tdGl0bGUnKS50ZXh0Q29udGVudC5yZXBsYWNlKC9cXHMrL2csJyAnKS50cmltKCksXHJcbiAgICAgIG1vZGFsVGl0bGUgPSB0YXJnZXRNb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX3RpdGxlJyksXHJcbiAgICAgIHBhdGhUb0ltYWdlID0gdGFyZ2V0LmRhdGFzZXQubW9kYWxTZXJ2aWNlRXhhbXBsZUltYWdlLFxyXG4gICAgICBtb2RhbEltYWdlID0gdGFyZ2V0TW9kYWwucXVlcnlTZWxlY3RvcignLm1vZGFsX19pbWFnZScpO1xyXG4gICAgXHJcbiAgICBtb2RhbFRpdGxlLnRleHRDb250ZW50ID0gc2VydmljZVRpdGxlO1xyXG4gICAgbW9kYWxJbWFnZS5zcmMgPSBwYXRoVG9JbWFnZTtcclxuICB9XHJcblxyXG4gIGluaXRpYWxpemVNb2RhbFRyaWdnZXJzKCk7XHJcblxyXG59KSgpO1xyXG4oKCkgPT4ge1xyXG4gIGNvbnN0IHNjcm9sbGluZ0xpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnKltkYXRhLXNjcm9sbC1saW5rXScpO1xyXG5cclxuICBjb25zdCBzY3JvbGxUb0VsZW1lbnQgPSAoZXZ0KSA9PiB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSBldnQudGFyZ2V0O1xyXG4gICAgY29uc3Qgc2Nyb2xsVG8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXQuZGF0YXNldC5zY3JvbGxMaW5rKTtcclxuXHJcbiAgICBpZiAoc2Nyb2xsVG8pIHtcclxuICAgICAgc2Nyb2xsVG8uc2Nyb2xsSW50b1ZpZXcoe1xyXG4gICAgICAgIGJlaGF2aW9yOiAnc21vb3RoJ1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBpZihCb29sZWFuKHNjcm9sbGluZ0xpbmtzKSkge1xyXG4gICAgc2Nyb2xsaW5nTGlua3MuZm9yRWFjaChsaW5rID0+IGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzY3JvbGxUb0VsZW1lbnQpKTtcclxuICB9XHJcbn0pKCk7XHJcbigoKSA9PiB7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24oKSB7XHJcbiAgdmFyIGxhenlQaWN0dXJlcyA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcInBpY3R1cmUubGF6eVwiKSk7XHJcblxyXG4gIGlmIChcIkludGVyc2VjdGlvbk9ic2VydmVyXCIgaW4gd2luZG93KSB7XHJcbiAgICBsZXQgbGF6eVBpY3R1cmVPYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihmdW5jdGlvbihlbnRyaWVzLCBvYnNlcnZlcikge1xyXG4gICAgICBlbnRyaWVzLmZvckVhY2goZnVuY3Rpb24oZW50cnkpIHtcclxuICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcclxuICAgICAgICAgIGxldCBsYXp5UGljdHVyZSA9IGVudHJ5LnRhcmdldDtcclxuICAgICAgICAgIGxldCBsYXp5V2VicEltYWdlID0gbGF6eVBpY3R1cmUucXVlcnlTZWxlY3RvcignW3R5cGU9XCJpbWFnZS93ZWJwXCJdJyk7XHJcbiAgICAgICAgICBsZXQgbGF6eUltYWdlID0gbGF6eVBpY3R1cmUucXVlcnlTZWxlY3RvcignaW1nJyk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGxhenlXZWJwSW1hZ2Uuc3Jjc2V0ID0gbGF6eVdlYnBJbWFnZS5kYXRhc2V0LnNyYztcclxuICAgICAgICAgIGxhenlJbWFnZS5zcmMgPSBsYXp5SW1hZ2UuZGF0YXNldC5zcmM7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGxhenlQaWN0dXJlLnNldEF0dHJpYnV0ZSgnZGF0YS1waWN0dXJlJywgJ29wYWNpdHktMScpO1xyXG4gICAgICAgICAgbGF6eVBpY3R1cmUuY2xhc3NMaXN0LnJlbW92ZShcImxhenlcIik7XHJcbiAgICAgICAgICBsYXp5UGljdHVyZU9ic2VydmVyLnVub2JzZXJ2ZShsYXp5UGljdHVyZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGxhenlQaWN0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uKGxhenlQaWN0dXJlKSB7XHJcbiAgICAgIGxhenlQaWN0dXJlT2JzZXJ2ZXIub2JzZXJ2ZShsYXp5UGljdHVyZSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG59KSgpO1xyXG4oKCkgPT4ge1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbWFpbkJsb2NrcyA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zbW9vdGgtZGlzcGxheS1ibG9ja1wiKSk7XHJcbiAgXHJcbiAgICBpZiAoXCJJbnRlcnNlY3Rpb25PYnNlcnZlclwiIGluIHdpbmRvdykge1xyXG4gICAgICBsZXQgbWFpbkJsb2NrT2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oZW50cmllcywgb2JzZXJ2ZXIpIHtcclxuICAgICAgICBlbnRyaWVzLmZvckVhY2goZnVuY3Rpb24oZW50cnkpIHtcclxuICAgICAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZykge1xyXG4gICAgICAgICAgICBsZXQgbWFpbkJsb2NrID0gZW50cnkudGFyZ2V0O1xyXG5cclxuICAgICAgICAgICAgbWFpbkJsb2NrLnNldEF0dHJpYnV0ZShcImRhdGEtc21vb3RoLWRpc3BsYXktYmxvY2tcIiwgXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgIG1haW5CbG9ja09ic2VydmVyLnVub2JzZXJ2ZShtYWluQmxvY2spO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICBcclxuICAgICAgbWFpbkJsb2Nrcy5mb3JFYWNoKGZ1bmN0aW9uKG1haW5CbG9jaykge1xyXG4gICAgICAgIG1haW5CbG9ja09ic2VydmVyLm9ic2VydmUobWFpbkJsb2NrKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgfSkoKTtcclxuXHJcbm1lZGl1bVpvb20oJ1tkYXRhLXpvb21hYmxlXScpOyJdfQ==
